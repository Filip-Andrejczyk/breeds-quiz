(self.webpackChunkdog_quiz=self.webpackChunkdog_quiz||[]).push([[179],{8255:Xe=>{function Ne(F){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+F+"'");throw p.code="MODULE_NOT_FOUND",p})}Ne.keys=()=>[],Ne.resolve=Ne,Ne.id=8255,Xe.exports=Ne},7716:(Xe,Ne,F)=>{"use strict";F.d(Ne,{AFp:()=>Zv,ip1:()=>W3,CZH:()=>_0,hGG:()=>qw,z2F:()=>ge,sBO:()=>g7,_Vd:()=>$2,EJc:()=>or,SBq:()=>uo,qLn:()=>g,vpe:()=>xs,gxx:()=>t4,OlP:()=>jt,zs3:()=>xn,ZZ4:()=>y3,aQg:()=>_3,soG:()=>ih,h0i:()=>G2,PXZ:()=>T9,R0b:()=>Wi,FiY:()=>Hi,Lbi:()=>nh,g9A:()=>q3,Qsj:()=>d7,FYo:()=>m3,JOm:()=>Ci,Tiy:()=>p5,q3G:()=>Rn,Rgc:()=>w3,dDg:()=>E9,q4F:()=>m5,GfV:()=>v3,s_b:()=>y7,ifc:()=>Be,eFA:()=>He,G48:()=>Hw,Gpc:()=>W,X6Q:()=>A9,_c5:()=>L9,VLi:()=>K1,c2e:()=>C0,zSh:()=>Hl,wAp:()=>lt,vHH:()=>be,EiD:()=>wd,mCW:()=>h6,qzn:()=>R2,JVY:()=>al,pB0:()=>ul,eBb:()=>cl,L6k:()=>qu,LAX:()=>ll,cg1:()=>e0,Tjo:()=>J3,kL8:()=>t0,yhl:()=>Go,dqk:()=>tn,sIi:()=>O6,CqO:()=>d4,QGY:()=>Xl,F4k:()=>Gm,RDi:()=>K4,AaK:()=>ue,z3N:()=>Js,qOj:()=>s4,TTD:()=>vc,_Bn:()=>vb,xp6:()=>za,uIk:()=>_f,ekj:()=>jf,Xpm:()=>Pr,lG2:()=>ra,Yz7:()=>en,cJS:()=>Tt,oAB:()=>vo,Yjl:()=>ns,Y36:()=>h4,_UZ:()=>Lf,BQk:()=>q6,ynx:()=>W6,qZA:()=>$a,TgZ:()=>Nf,EpF:()=>q8,n5z:()=>a1,Ikx:()=>e7,LFG:()=>ln,$8M:()=>Zn,NdJ:()=>zf,CRH:()=>Rv,oxw:()=>Pf,ALo:()=>F5,lcZ:()=>G7,Hsn:()=>Vf,F$t:()=>qm,Q6J:()=>xf,s9C:()=>e3,MGl:()=>Z6,DdM:()=>Tv,VKq:()=>R5,WLB:()=>$7,iGM:()=>U5,MAs:()=>V8,CHM:()=>Cc,oJD:()=>m6,LSH:()=>g6,B6R:()=>xt,kYT:()=>na,YNc:()=>Sm,W1O:()=>Vv,_uU:()=>sg,Oqu:()=>qf,hij:()=>r5,Gf:()=>j5});var p=F(9765),se=F(5319),V=F(7574),ye=F(6682),ae=F(3522);function te(i){for(let s in i)if(i[s]===te)return s;throw Error("Could not find renamed property on target object.")}function De(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ee(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const O=te({__forward_ref__:te});function W(i){return i.__forward_ref__=W,i.toString=function(){return ue(this())},i}function G(i){return de(i)?i():i}function de(i){return"function"==typeof i&&i.hasOwnProperty(O)&&i.__forward_ref__===W}class be extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function j(i){return"string"==typeof i?i:null==i?"":String(i)}function X(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():j(i)}function ft(i,s){const a=s?` in ${s}`:"";throw new be("201",`No provider for ${X(i)} found${a}`)}function _t(i,s){null==i&&function(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Tt(i){return{providers:i.providers||[],imports:i.imports||[]}}function er(i){return tr(i,I1)||tr(i,Si)}function tr(i,s){return i.hasOwnProperty(s)?i[s]:null}function ts(i){return i&&(i.hasOwnProperty(zr)||i.hasOwnProperty(M1))?i[zr]:null}const I1=te({\u0275prov:te}),zr=te({\u0275inj:te}),Si=te({ngInjectableDef:te}),M1=te({ngInjectorDef:te});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let Ln;function Rr(i){const s=Ln;return Ln=i,s}function it(i,s,a){const c=er(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Qe.Optional?null:void 0!==s?s:void ft(ue(i),"Injector")}function Pt(i){return{toString:i}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),Be=(()=>((Be=Be||{})[Be.Emulated=0]="Emulated",Be[Be.None=2]="None",Be[Be.ShadowDom=3]="ShadowDom",Be))();const rt="undefined"!=typeof globalThis&&globalThis,xi="undefined"!=typeof window&&window,Yi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,tn=rt||"undefined"!=typeof global&&global||xi||Yi,q={},$=[],K=te({\u0275cmp:te}),Te=te({\u0275dir:te}),oe=te({\u0275pipe:te}),Ze=te({\u0275mod:te}),ht=te({\u0275loc:te}),Vt=te({\u0275fac:te}),nn=te({__NG_ELEMENT_ID__:te});let gn=0;function Pr(i){return Pt(()=>{const a={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||$,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Be.Emulated,id:"c",styles:i.styles||$,_:null,setInput:null,schemas:i.schemas||null,tView:null},u=i.directives,d=i.features,v=i.pipes;return c.id+=gn++,c.inputs=s2(i.inputs,a),c.outputs=s2(i.outputs),d&&d.forEach(y=>y(c)),c.directiveDefs=u?()=>("function"==typeof u?u():u).map(Wn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(ti):null,c})}function xt(i,s,a){const c=i.\u0275cmp;c.directiveDefs=()=>s.map(Wn),c.pipeDefs=()=>a.map(ti)}function Wn(i){return nr(i)||function(i){return i[Te]||null}(i)}function ti(i){return function(i){return i[oe]||null}(i)}const i2={};function vo(i){return Pt(()=>{const s={type:i.type,bootstrap:i.bootstrap||$,declarations:i.declarations||$,imports:i.imports||$,exports:i.exports||$,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(i2[i.id]=i.type),s})}function na(i,s){return Pt(()=>{const a=Li(i,!0);a.declarations=s.declarations||$,a.imports=s.imports||$,a.exports=s.exports||$})}function s2(i,s){if(null==i)return q;const a={};for(const c in i)if(i.hasOwnProperty(c)){let u=i[c],d=u;Array.isArray(u)&&(d=u[1],u=u[0]),a[u]=c,s&&(s[u]=d)}return a}const ra=Pr;function ns(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function nr(i){return i[K]||null}function Li(i,s){const a=i[Ze]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function Ji(i){return Array.isArray(i)&&"object"==typeof i[1]}function Cr(i){return Array.isArray(i)&&!0===i[1]}function sa(i){return 0!=(8&i.flags)}function bo(i){return 2==(2&i.flags)}function wo(i){return 1==(1&i.flags)}function Fr(i){return null!==i.template}function Fn(i){return 0!=(512&i[2])}function S1(i,s){return i.hasOwnProperty(Vt)?i[Vt]:null}class W4{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function vc(){return as}function as(i){return i.type.prototype.ngOnChanges&&(i.setInput=cs),Nu}function Nu(){const i=q4(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===q)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function cs(i,s,a,c){const u=q4(i)||function(i,s){return i[zi]=s}(i,{previous:q,current:null}),d=u.current||(u.current={}),v=u.previous,y=this.declaredInputs[a],w=v[y];d[y]=new W4(w&&w.currentValue,s,v===q),i[c]=s}vc.ngInherit=!0;const zi="__ngSimpleChanges__";function q4(i){return i[zi]||null}let h2;function K4(i){h2=i}function ls(){return void 0!==h2?h2:"undefined"!=typeof document?document:void 0}function an(i){return!!i.listen}const Pi={createRenderer:(i,s)=>ls()};function cn(i){for(;Array.isArray(i);)i=i[0];return i}function us(i,s){return cn(s[i])}function br(i,s){return cn(s[i.index])}function ca(i,s){return i.data[s]}function t1(i,s){return i[s]}function Hr(i,s){const a=s[i];return Ji(a)?a:a[0]}function m2(i){return 4==(4&i[2])}function _c(i){return 128==(128&i[2])}function x1(i,s){return null==s?null:i[s]}function Do(i){i[18]=0}function ds(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const at={lFrame:X4(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function v2(){return at.bindingsEnabled}function xe(){return at.lFrame.lView}function It(){return at.lFrame.tView}function Cc(i){return at.lFrame.contextLView=i,i[8]}function rn(){let i=bc();for(;null!==i&&64===i.type;)i=i.parent;return i}function bc(){return at.lFrame.currentTNode}function gi(i,s){const a=at.lFrame;a.currentTNode=i,a.isParent=s}function ua(){return at.lFrame.isParent}function So(){at.lFrame.isParent=!1}function xo(){return at.isInCheckNoChangesMode}function No(i){at.isInCheckNoChangesMode=i}function kn(){const i=at.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function fs(){return at.lFrame.bindingIndex++}function wc(i,s){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ec(s)}function Ec(i){at.lFrame.currentDirectiveIndex=i}function J4(){return at.lFrame.currentQueryIndex}function C2(i){at.lFrame.currentQueryIndex=i}function b2(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function w2(i,s,a){if(a&Qe.SkipSelf){let u=s,d=i;for(;!(u=u.parent,null!==u||a&Qe.Host||(u=b2(d),null===u||(d=d[15],10&u.type))););if(null===u)return!1;s=u,i=d}const c=at.lFrame=Hs();return c.currentTNode=s,c.lView=i,!0}function E2(i){const s=Hs(),a=i[1];at.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Hs(){const i=at.lFrame,s=null===i?null:i.child;return null===s?X4(i):s}function X4(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function e6(){const i=at.lFrame;return at.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const t6=e6;function Bs(){const i=e6();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Er(){return at.lFrame.selectedIndex}function I2(i){at.lFrame.selectedIndex=i}function Hn(){const i=at.lFrame;return ca(i.tView,i.selectedIndex)}function ko(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const d=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:M,ngOnDestroy:D}=d;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),y&&((i.contentHooks||(i.contentHooks=[])).push(a,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,y)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),M&&((i.viewHooks||(i.viewHooks=[])).push(a,M),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,M)),null!=D&&(i.destroyHooks||(i.destroyHooks=[])).push(a,D)}}function zo(i,s,a){Tc(i,s,3,a)}function M2(i,s,a,c){(3&i[2])===a&&Tc(i,s,a,c)}function Bn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Tc(i,s,a,c){const d=null!=c?c:-1,v=s.length-1;let y=0;for(let w=void 0!==c?65535&i[18]:0;w<v;w++)if("number"==typeof s[w+1]){if(y=s[w],null!=c&&y>=c)break}else s[w]<0&&(i[18]+=65536),(y<d||-1==d)&&(Dc(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function Dc(i,s,a,c){const u=a[c]<0,d=a[c+1],y=i[u?-a[c]:a[c]];if(u){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class ha{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function s1(i,s,a){const c=an(i);let u=0;for(;u<a.length;){const d=a[u];if("number"==typeof d){if(0!==d)break;u++;const v=a[u++],y=a[u++],w=a[u++];c?i.setAttribute(s,y,w,v):s.setAttributeNS(v,y,w)}else{const v=d,y=a[++u];o1(v)?c&&i.setProperty(s,v,y):c?i.setAttribute(s,v,y):s.setAttribute(v,y),u++}}return u}function r6(i){return 3===i||4===i||6===i}function o1(i){return 64===i.charCodeAt(0)}function L1(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const u=s[c];"number"==typeof u?a=u:0===a||i6(i,a,u,null,-1===a||2===a?s[++c]:null)}}return i}function i6(i,s,a,c,u){let d=0,v=i.length;if(-1===s)v=-1;else for(;d<i.length;){const y=i[d++];if("number"==typeof y){if(y===s){v=-1;break}if(y>s){v=d-1;break}}}for(;d<i.length;){const y=i[d];if("number"==typeof y)break;if(y===a){if(null===c)return void(null!==u&&(i[d+1]=u));if(c===i[d+1])return void(i[d+2]=u)}d++,null!==c&&d++,null!==u&&d++}-1!==v&&(i.splice(v,0,s),d=v+1),i.splice(d++,0,a),null!==c&&i.splice(d++,0,c),null!==u&&i.splice(d++,0,u)}function wn(i){return-1!==i}function k1(i){return 32767&i}function js(i,s){let a=function(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let T2=!0;function Ro(i){const s=T2;return T2=i,s}let Lc=0;function z1(i,s){const a=Vi(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,$s(c.data,i),$s(s,null),$s(c.blueprint,null));const u=zn(i,s),d=i.injectorIndex;if(wn(u)){const v=k1(u),y=js(u,s),w=y[1].data;for(let M=0;M<8;M++)s[d+M]=y[v+M]|w[v+M]}return s[d+8]=u,d}function $s(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Vi(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function zn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,u=s;for(;null!==u;){const d=u[1],v=d.type;if(c=2===v?d.declTNode:1===v?u[6]:null,null===c)return-1;if(a++,u=u[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Gs(i,s,a){!function(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(nn)&&(c=a[nn]),null==c&&(c=a[nn]=Lc++);const u=255&c;s.data[i+(u>>5)]|=1<<u}(i,s,a)}function D2(i,s,a){if(a&Qe.Optional)return i;ft(s,"NodeInjector")}function S2(i,s,a,c){if(a&Qe.Optional&&void 0===c&&(c=null),0==(a&(Qe.Self|Qe.Host))){const u=i[9],d=Rr(void 0);try{return u?u.get(s,c,a&Qe.Optional):it(s,c,a&Qe.Optional)}finally{Rr(d)}}return D2(c,s,a)}function Ws(i,s,a,c=Qe.Default,u){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(nn)?i[nn]:void 0;return"number"==typeof s?s>=0?255&s:R1:s}(a);if("function"==typeof d){if(!w2(s,i,c))return c&Qe.Host?D2(u,a,c):S2(s,a,c,u);try{const v=d(c);if(null!=v||c&Qe.Optional)return v;ft(a)}finally{t6()}}else if("number"==typeof d){let v=null,y=Vi(i,s),w=-1,M=c&Qe.Host?s[16][6]:null;for((-1===y||c&Qe.SkipSelf)&&(w=-1===y?zn(i,s):s[y+8],-1!==w&&fa(c,!1)?(v=s[1],y=k1(w),s=js(w,s)):y=-1);-1!==y;){const D=s[1];if(da(d,y,D.data)){const k=ps(y,s,a,v,c,M);if(k!==qs)return k}w=s[y+8],-1!==w&&fa(c,s[1].data[y+8]===M)&&da(d,y,s)?(v=D,y=k1(w),s=js(w,s)):y=-1}}}return S2(s,a,c,u)}const qs={};function R1(){return new Oi(rn(),xe())}function ps(i,s,a,c,u,d){const v=s[1],y=v.data[i+8],D=ms(y,v,a,null==c?bo(y)&&T2:c!=v&&0!=(3&y.type),u&Qe.Host&&d===y);return null!==D?Po(s,v,D,y):qs}function ms(i,s,a,c,u){const d=i.providerIndexes,v=s.data,y=1048575&d,w=i.directiveStart,D=d>>20,z=u?y+D:i.directiveEnd;for(let U=c?y:y+D;U<z;U++){const Z=v[U];if(U<w&&a===Z||U>=w&&Z.type===a)return U}if(u){const U=v[w];if(U&&Fr(U)&&U.type===a)return w}return null}function Po(i,s,a,c){let u=i[a];const d=s.data;if(function(i){return i instanceof ha}(u)){const v=u;v.resolving&&function(i,s){throw new be("200",`Circular dependency in DI detected for ${i}`)}(X(d[a]));const y=Ro(v.canSeeViewProviders);v.resolving=!0;const w=v.injectImpl?Rr(v.injectImpl):null;w2(i,c,Qe.Default);try{u=i[a]=v.factory(void 0,d,i,c),s.firstCreatePass&&a>=c.directiveStart&&function(i,s,a){const{ngOnChanges:c,ngOnInit:u,ngDoCheck:d}=s.type.prototype;if(c){const v=as(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}u&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,u),d&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,d),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,d))}(a,d[a],s)}finally{null!==w&&Rr(w),Ro(y),v.resolving=!1,t6()}}return u}function da(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function fa(i,s){return!(i&Qe.Self||i&Qe.Host&&s)}class Oi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a){return Ws(this._tNode,this._lView,s,void 0,a)}}function a1(i){return Pt(()=>{const s=i.prototype.constructor,a=s[Vt]||Zs(s),c=Object.prototype;let u=Object.getPrototypeOf(i.prototype).constructor;for(;u&&u!==c;){const d=u[Vt]||Zs(u);if(d&&d!==a)return d;u=Object.getPrototypeOf(u)}return d=>new d})}function Zs(i){return de(i)?()=>{const s=Zs(G(i));return s&&s()}:S1(i)}function Zn(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let u=0;for(;u<c;){const d=a[u];if(r6(d))break;if(0===d)u+=2;else if("number"==typeof d)for(u++;u<c&&"string"==typeof a[u];)u++;else{if(d===s)return a[u+1];u+=2}}}return null}(rn(),i)}const P1="__parameters__";function c1(i,s,a){return Pt(()=>{const c=function(i){return function(...a){if(i){const c=i(...a);for(const u in c)this[u]=c[u]}}}(s);function u(...d){if(this instanceof u)return c.apply(this,d),this;const v=new u(...d);return y.annotation=v,y;function y(w,M,D){const k=w.hasOwnProperty(P1)?w[P1]:Object.defineProperty(w,P1,{value:[]})[P1];for(;k.length<=D;)k.push(null);return(k[D]=k[D]||[]).push(v),w}}return a&&(u.prototype=Object.create(a.prototype)),u.prototype.ngMetadataName=i,u.annotationCls=u,u})}class jt{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}function sn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),sn(c,s)):s!==i&&s.push(c)}return s}function Un(i,s){i.forEach(a=>Array.isArray(a)?Un(a,s):s(a))}function O1(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Vo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Oo(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}function Mr(i,s,a){let c=Ks(i,s);return c>=0?i[1|c]=a:(c=~c,function(i,s,a,c){let u=i.length;if(u==s)i.push(a,c);else if(1===u)i.push(c,i[0]),i[0]=a;else{for(u--,i.push(i[u-1],i[u]);u>s;)i[u]=i[u-2],u--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ys(i,s){const a=Ks(i,s);if(a>=0)return i[1|a]}function Ks(i,s){return function(i,s,a){let c=0,u=i.length>>a;for(;u!==c;){const d=c+(u-c>>1),v=i[d<<a];if(s===v)return d<<a;v>s?u=d:c=d+1}return~(u<<a)}(i,s,1)}const J={},ve="__NG_DI_FLAG__",Le="ngTempTokenPath",We=/\n/gm,Kt="__source",sr=te({provide:String,useValue:te});let fn;function u1(i){const s=fn;return fn=i,s}function Bo(i,s=Qe.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?it(i,void 0,s):fn.get(i,s&Qe.Optional?null:void 0,s)}function ln(i,s=Qe.Default){return(Ln||Bo)(G(i),s)}function ai(i){const s=[];for(let a=0;a<i.length;a++){const c=G(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let u,d=Qe.Default;for(let v=0;v<c.length;v++){const y=c[v],w=k2(y);"number"==typeof w?-1===w?u=y.token:d|=w:u=y}s.push(ln(u,d))}else s.push(ln(c))}return s}function Uo(i,s){return i[ve]=s,i.prototype[ve]=s,i}function k2(i){return i[ve]}function jo(i,s,a,c){const u=i[Le];throw s[Kt]&&u.unshift(s[Kt]),i.message=function(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let u=ue(s);if(Array.isArray(s))u=s.map(ue).join(" -> ");else if("object"==typeof s){let d=[];for(let v in s)if(s.hasOwnProperty(v)){let y=s[v];d.push(v+":"+("string"==typeof y?JSON.stringify(y):ue(y)))}u=`{${d.join(", ")}}`}return`${a}${c?"("+c+")":""}[${u}]: ${i.replace(We,"\n  ")}`}("\n"+i.message,u,a,c),i.ngTokenPath=u,i[Le]=null,i}const Ea=Uo(c1("Inject",i=>({token:i})),-1),Hi=Uo(c1("Optional"),8),Ys=Uo(c1("SkipSelf"),4);let Aa,il;function z2(i){var s;return(null===(s=function(){if(void 0===Aa&&(Aa=null,tn.trustedTypes))try{Aa=tn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Aa}())||void 0===s?void 0:s.createHTML(i))||i}function $u(i){var s;return(null===(s=function(){if(void 0===il&&(il=null,tn.trustedTypes))try{il=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return il}())||void 0===s?void 0:s.createHTML(i))||i}class _s{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class sl extends _s{getTypeName(){return"HTML"}}class Wu extends _s{getTypeName(){return"Style"}}class ol extends _s{getTypeName(){return"Script"}}class pd extends _s{getTypeName(){return"URL"}}class u6 extends _s{getTypeName(){return"ResourceURL"}}function Js(i){return i instanceof _s?i.changingThisBreaksApplicationSecurity:i}function R2(i,s){const a=Go(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Go(i){return i instanceof _s&&i.getTypeName()||null}function al(i){return new sl(i)}function qu(i){return new Wu(i)}function cl(i){return new ol(i)}function ll(i){return new pd(i)}function ul(i){return new u6(i)}class md{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(z2(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class jc{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=z2(s),a;const c=this.inertDocument.createElement("body");return c.innerHTML=z2(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(s){const a=s.attributes;for(let u=a.length-1;0<u;u--){const v=a.item(u).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&s.removeAttribute(v)}let c=s.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const vd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,yd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function h6(i){return(i=String(i)).match(vd)||i.match(yd)?i:"unsafe:"+i}function Cs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Da(...i){const s={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(s[c]=!0);return s}const f6=Cs("area,br,col,hr,img,wbr"),p6=Cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fl=Cs("rp,rt"),ml=Da(f6,Da(p6,Cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Da(fl,Cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Da(fl,p6)),Sa=Cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),P2=Cs("srcset"),Ku=Da(Sa,P2,Cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),gl=Cs("script,style,template");class Cd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let u=this.checkClobberedElement(a,a.nextSibling);if(u){a=u;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!ml.hasOwnProperty(a))return this.sanitizedSomething=!0,!gl.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=s.attributes;for(let u=0;u<c.length;u++){const d=c.item(u),v=d.name,y=v.toLowerCase();if(!Ku.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=d.value;Sa[y]&&(w=h6(w)),P2[y]&&(i=w,w=(i=String(i)).split(",").map(s=>h6(s.trim())).join(", ")),this.buf.push(" ",v,'="',vl(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();ml.hasOwnProperty(a)&&!f6.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(vl(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const Yu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,bd=/([^\#-~ |!])/g;function vl(i){return i.replace(/&/g,"&amp;").replace(Yu,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(bd,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let xa;function wd(i,s){let a=null;try{xa=xa||function(i){const s=new jc(i);return function(){try{return!!(new window.DOMParser).parseFromString(z2(""),"text/html")}catch(i){return!1}}()?new md(s):s}(i);let c=s?String(s):"";a=xa.getInertBodyElement(c);let u=5,d=c;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,c=d,d=a.innerHTML,a=xa.getInertBodyElement(c)}while(c!==d);return z2((new Cd).sanitizeChildren(yl(a)||a))}finally{if(a){const c=yl(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function yl(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function m6(i){const s=Xs();return s?$u(s.sanitize(Rn.HTML,i)||""):R2(i,"HTML")?$u(Js(i)):wd(ls(),j(i))}function g6(i){const s=Xs();return s?s.sanitize(Rn.URL,i)||"":R2(i,"URL")?Js(i):h6(j(i))}function Xs(){const i=xe();return i&&i[12]}const wl="__ngContext__";function yn(i,s){i[wl]=s}function y6(i){const s=function(i){return i[wl]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function C6(i){return i.ngOriginalError}function f(i,...s){i.error(...s)}class g{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),c=this._findContext(s),u=(i=s)&&i.ngErrorLogger||f;var i;u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a),c&&u(this._console,"ERROR CONTEXT",c)}_findContext(s){return s?s.ngDebugContext||this._findContext(C6(s)):null}_findOriginalError(s){let a=s&&C6(s);for(;a&&C6(a);)a=C6(a);return a||null}}const t8=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tn))();function ws(i){return i instanceof Function?i():i}var Ci=(()=>((Ci=Ci||{})[Ci.Important=1]="Important",Ci[Ci.DashCase=2]="DashCase",Ci))();function i8(i,s){return undefined(i,s)}function Al(i){const s=i[3];return Cr(s)?s[3]:s}function xd(i){return E_(i[13])}function Nd(i){return E_(i[4])}function E_(i){for(;null!==i&&!Cr(i);)i=i[4];return i}function Na(i,s,a,c,u){if(null!=c){let d,v=!1;Cr(c)?d=c:Ji(c)&&(v=!0,c=c[0]);const y=cn(c);0===i&&null!==a?null==u?Tp(s,a,y):Qc(s,a,y,u||null,!0):1===i&&null!==a?Qc(s,a,y,u||null,!0):2===i?function(i,s,a){const c=l8(i,s);c&&function(i,s,a,c){an(i)?i.removeChild(s,a,c):s.removeChild(a)}(i,c,s,a)}(s,y,v):3===i&&s.destroyNode(y),null!=d&&function(i,s,a,c,u){const d=a[7];d!==cn(a)&&Na(s,i,c,d,u);for(let y=10;y<a.length;y++){const w=a[y];w6(w[1],w,i,s,c,d)}}(s,i,d,a,u)}}function a8(i,s,a){return an(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function b6(i,s){const a=i[9],c=a.indexOf(s),u=s[3];1024&s[2]&&(s[2]&=-1025,ds(u,-1)),a.splice(c,1)}function zd(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const u=c[17];null!==u&&u!==i&&b6(u,c),s>0&&(i[a-1][4]=c[4]);const d=Vo(i,10+s);!function(i,s){w6(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=d[19];null!==v&&v.detachView(d[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ip(i,s){if(!(256&s[2])){const a=s[11];an(a)&&a.destroyNode&&w6(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return c8(i[1],i);for(;s;){let a=null;if(Ji(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Ji(s)&&c8(s[1],s),s=s[3];null===s&&(s=i),Ji(s)&&c8(s[1],s),a=s&&s[4]}s=a}}(s)}}function c8(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const u=s[a[c]];if(!(u instanceof ha)){const d=a[c+1];if(Array.isArray(d))for(let v=0;v<d.length;v+=2){const y=u[d[v]],w=d[v+1];try{w.call(y)}finally{}}else try{d.call(u)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,c=s[7];let u=-1;if(null!==a)for(let d=0;d<a.length-1;d+=2)if("string"==typeof a[d]){const v=a[d+1],y="function"==typeof v?v(s):cn(s[v]),w=c[u=a[d+2]],M=a[d+3];"boolean"==typeof M?y.removeEventListener(a[d],w,M):M>=0?c[u=M]():c[u=-M].unsubscribe(),d+=2}else{const v=c[u=a[d+1]];a[d].call(v)}if(null!==c){for(let d=u+1;d<c.length;d++)c[d]();s[7]=null}}(i,s),1===s[1].type&&an(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Cr(s[3])){a!==s[3]&&b6(a,s);const c=s[19];null!==c&&c.detachView(i)}}}function Mp(i,s,a){return function(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const u=i.data[c.directiveStart].encapsulation;if(u===Be.None||u===Be.Emulated)return null}return br(c,a)}(i,s.parent,a)}function Qc(i,s,a,c,u){an(i)?i.insertBefore(s,a,c,u):s.insertBefore(a,c,u)}function Tp(i,s,a){an(i)?i.appendChild(s,a):s.appendChild(a)}function Dp(i,s,a,c,u){null!==c?Qc(i,s,a,c,u):Tp(i,s,a)}function l8(i,s){return an(i)?i.parentNode(s):s.parentNode}function Sp(i,s,a){return En(i,s,a)}let En=function(i,s,a){return 40&i.type?br(i,a):null};function Dl(i,s,a,c){const u=Mp(i,c,s),d=s[11],y=Sp(c.parent||s[6],c,s);if(null!=u)if(Array.isArray(a))for(let w=0;w<a.length;w++)Dp(d,u,a[w],y,!1);else Dp(d,u,a,y,!1)}function Es(i,s){if(null!==s){const a=s.type;if(3&a)return br(s,i);if(4&a)return F1(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Es(i,c);{const u=i[s.index];return Cr(u)?F1(-1,u):cn(u)}}if(32&a)return i8(s,i)()||cn(i[s.index]);{const c=Ie(i,s);return null!==c?Array.isArray(c)?c[0]:Es(Al(i[16]),c):Es(i,s.next)}}return null}function Ie(i,s){return null!==s?i[16][6].projection[s.projection]:null}function F1(i,s){const a=10+i+1;if(a<s.length){const c=s[a],u=c[1].firstChild;if(null!==u)return Es(c,u)}return s[7]}function H1(i,s,a,c,u,d,v){for(;null!=a;){const y=c[a.index],w=a.type;if(v&&0===s&&(y&&yn(cn(y),c),a.flags|=4),64!=(64&a.flags))if(8&w)H1(i,s,a.child,c,u,d,!1),Na(s,i,u,y,d);else if(32&w){const M=i8(a,c);let D;for(;D=M();)Na(s,i,u,D,d);Na(s,i,u,y,d)}else 16&w?u8(i,s,c,a,u,d):Na(s,i,u,y,d);a=v?a.projectionNext:a.next}}function w6(i,s,a,c,u,d){H1(a,c,i.firstChild,s,u,d,!1)}function u8(i,s,a,c,u,d){const v=a[16],w=v[6].projection[c.projection];if(Array.isArray(w))for(let M=0;M<w.length;M++)Na(s,i,u,w[M],d);else H1(i,s,w,v[3],u,d,!0)}function kp(i,s,a){an(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function h8(i,s,a){an(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function ka(i,s,a){let c=i.length;for(;;){const u=i.indexOf(s,a);if(-1===u)return u;if(0===u||i.charCodeAt(u-1)<=32){const d=s.length;if(u+d===c||i.charCodeAt(u+d)<=32)return u}a=u+1}}const Jc="ng-template";function Rp(i,s,a){let c=0;for(;c<i.length;){let u=i[c++];if(a&&"class"===u){if(u=i[c],-1!==ka(u.toLowerCase(),s,0))return!0}else if(1===u){for(;c<i.length&&"string"==typeof(u=i[c++]);)if(u.toLowerCase()===s)return!0;return!1}}return!1}function Rd(i){return 4===i.type&&i.value!==Jc}function Sl(i,s,a){return s===(4!==i.type||a?i.value:Jc)}function Xc(i,s,a){let c=4;const u=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(r6(i[s]))return s;return i.length}(u);let v=!1;for(let y=0;y<s.length;y++){const w=s[y];if("number"!=typeof w){if(!v)if(4&c){if(c=2|1&c,""!==w&&!Sl(i,w,a)||""===w&&1===s.length){if(Is(c))return!1;v=!0}}else{const M=8&c?w:s[++y];if(8&c&&null!==i.attrs){if(!Rp(i.attrs,M,a)){if(Is(c))return!1;v=!0}continue}const k=Pp(8&c?"class":w,u,Rd(i),a);if(-1===k){if(Is(c))return!1;v=!0;continue}if(""!==M){let z;z=k>d?"":u[k+1].toLowerCase();const U=8&c?z:null;if(U&&-1!==ka(U,M,0)||2&c&&M!==z){if(Is(c))return!1;v=!0}}}}else{if(!v&&!Is(c)&&!Is(w))return!1;if(v&&Is(w))continue;v=!1,c=w|1&c}}return Is(c)||v}function Is(i){return 0==(1&i)}function Pp(i,s,a,c){if(null===s)return-1;let u=0;if(c||!a){let d=!1;for(;u<s.length;){const v=s[u];if(v===i)return u;if(3===v||6===v)d=!0;else{if(1===v||2===v){let y=s[++u];for(;"string"==typeof y;)y=s[++u];continue}if(4===v)break;if(0===v){u+=4;continue}}u+=d?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Ar(i,s,a=!1){for(let c=0;c<s.length;c++)if(Xc(i,s[c],a))return!0;return!1}function Ui(i,s){e:for(let a=0;a<s.length;a++){const c=s[a];if(i.length===c.length){for(let u=0;u<i.length;u++)if(i[u]!==c[u])continue e;return!0}}return!1}function Vp(i,s){return i?":not("+s.trim()+")":s}function d8(i){let s=i[0],a=1,c=2,u="",d=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const y=i[++a];u+="["+v+(y.length>0?'="'+y+'"':"")+"]"}else 8&c?u+="."+v:4&c&&(u+=" "+v);else""!==u&&!Is(v)&&(s+=Vp(d,u),u=""),c=v,d=d||!Is(c);a++}return""!==u&&(s+=Vp(d,u)),s}const ot={};function za(i){Op(It(),xe(),Er()+i,xo())}function Op(i,s,a,c){if(!c)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&zo(s,d,a)}else{const d=i.preOrderHooks;null!==d&&M2(s,d,0,a)}I2(a)}function Ra(i,s){return i<<17|s<<2}function B1(i){return i>>17&32767}function f8(i){return 2|i}function F2(i){return(131068&i)>>2}function Od(i,s){return-131069&i|s<<2}function Fd(i){return 1|i}function Zd(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const u=a[c],d=a[c+1];if(-1!==d){const v=i.data[d];C2(u),v.contentQueries(2,s[d],d)}}}function kl(i,s,a,c,u,d,v,y,w,M){const D=s.blueprint.slice();return D[0]=u,D[2]=140|c,Do(D),D[3]=D[15]=i,D[8]=a,D[10]=v||i&&i[10],D[11]=y||i&&i[11],D[12]=w||i&&i[12]||null,D[9]=M||i&&i[9]||null,D[6]=d,D[16]=2==s.type?i[16]:D,D}function to(i,s,a,c,u){let d=i.data[s];if(null===d)d=function(i,s,a,c,u){const d=bc(),v=ua(),w=i.data[s]=function(i,s,a,c,u,d){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?d:d&&d.parent,a,s,c,u);return null===i.firstChild&&(i.firstChild=w),null!==d&&(v?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(i,s,a,c,u),at.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=a,d.value=c,d.attrs=u;const v=function(){const i=at.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===v?-1:v.injectorIndex}return gi(d,!0),d}function E6(i,s,a,c){if(0===a)return-1;const u=s.length;for(let d=0;d<a;d++)s.push(c),i.blueprint.push(c),i.data.push(null);return u}function Rl(i,s,a){E2(s);try{const c=i.viewQuery;null!==c&&D6(1,c,a);const u=i.template;null!==u&&y8(i,s,u,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Zd(i,s),i.staticViewQueries&&D6(2,i.viewQuery,a);const d=i.components;null!==d&&function(i,s){for(let a=0;a<s.length;a++)K_(i,s[a])}(s,d)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Bs()}}function Zo(i,s,a,c){const u=s[2];if(256==(256&u))return;E2(s);const d=xo();try{Do(s),function(i){at.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&y8(i,s,a,2,c);const v=3==(3&u);if(!d)if(v){const M=i.preOrderCheckHooks;null!==M&&zo(s,M,null)}else{const M=i.preOrderHooks;null!==M&&M2(s,M,0,null),Bn(s,0)}if(function(i){for(let s=xd(i);null!==s;s=Nd(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const u=a[c],d=u[3];0==(1024&u[2])&&ds(d,1),u[2]|=1024}}}(s),function(i){for(let s=xd(i);null!==s;s=Nd(s))for(let a=10;a<s.length;a++){const c=s[a],u=c[1];_c(c)&&Zo(u,c,u.template,c[8])}}(s),null!==i.contentQueries&&Zd(i,s),!d)if(v){const M=i.contentCheckHooks;null!==M&&zo(s,M)}else{const M=i.contentHooks;null!==M&&M2(s,M,1),Bn(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const u=a[c];if(u<0)I2(~u);else{const d=u,v=a[++c],y=a[++c];wc(v,d),y(2,s[d])}}}finally{I2(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let a=0;a<s.length;a++)Z_(i,s[a])}(s,y);const w=i.viewQuery;if(null!==w&&D6(2,w,c),!d)if(v){const M=i.viewCheckHooks;null!==M&&zo(s,M)}else{const M=i.viewHooks;null!==M&&M2(s,M,2),Bn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ds(s[3],-1))}finally{Bs()}}function Pl(i,s,a,c){const u=s[10],d=!xo(),v=m2(s);try{d&&!v&&u.begin&&u.begin(),v&&Rl(i,s,c),Zo(i,s,a,c)}finally{d&&!v&&u.end&&u.end()}}function y8(i,s,a,c,u){const d=Er(),v=2&c;try{I2(-1),v&&s.length>20&&Op(i,s,20,xo()),a(c,u)}finally{I2(d)}}function Qp(i,s,a){if(sa(s)){const u=s.directiveEnd;for(let d=s.directiveStart;d<u;d++){const v=i.data[d];v.contentQueries&&v.contentQueries(1,a[d],d)}}}function Kd(i,s,a){!v2()||(function(i,s,a,c){const u=a.directiveStart,d=a.directiveEnd;i.firstCreatePass||z1(a,s),yn(c,s);const v=a.initialInputs;for(let y=u;y<d;y++){const w=i.data[y],M=Fr(w);M&&Ms(s,a,w);const D=Po(s,i,y,a);yn(D,s),null!==v&&W_(0,y-u,D,w,0,v),M&&(Hr(a.index,s)[8]=D)}}(i,s,a,br(a,s)),128==(128&a.flags)&&function(i,s,a){const c=a.directiveStart,u=a.directiveEnd,v=a.index,y=at.lFrame.currentDirectiveIndex;try{I2(v);for(let w=c;w<u;w++){const M=i.data[w],D=s[w];Ec(w),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&M6(M,D)}}finally{I2(-1),Ec(y)}}(i,s,a))}function Yd(i,s,a=br){const c=s.localNames;if(null!==c){let u=s.index+1;for(let d=0;d<c.length;d+=2){const v=c[d+1],y=-1===v?a(s,i):i[v];i[u++]=y}}}function Jp(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=I6(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function I6(i,s,a,c,u,d,v,y,w,M){const D=20+c,k=D+u,z=function(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:ot);return a}(D,k),U="function"==typeof M?M():M;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:y,declTNode:s,data:z.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:w,consts:U,incompleteFirstPass:!1}}function Qd(i,s,a,c){const u=$i(s);null===a?u.push(c):(u.push(a),i.firstCreatePass&&um(i).push(c,u.length-1))}function Jd(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const u=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,u):a[c]=[s,u]}return a}function m1(i,s,a,c,u,d,v,y){const w=br(s,a);let D,M=s.inputs;!y&&null!=M&&(D=M[c])?(hm(i,a,D,c,u),bo(s)&&function(i,s){const a=Hr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(c=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),u=null!=v?v(u,s.value||"",c):u,an(d)?d.setProperty(w,c,u):o1(c)||(w.setProperty?w.setProperty(c,u):w[c]=u))}function Lt(i,s,a,c){let u=!1;if(v2()){const d=function(i,s,a){const c=i.directiveRegistry;let u=null;if(c)for(let d=0;d<c.length;d++){const v=c[d];Ar(a,v.selectors,!1)&&(u||(u=[]),Gs(z1(a,s),i,v.type),Fr(v)?(Sn(i,a),u.unshift(v)):u.push(v))}return u}(i,s,a),v=null===c?null:{"":-1};if(null!==d){u=!0,am(a,i.data.length,d.length);for(let D=0;D<d.length;D++){const k=d[D];k.providersResolver&&k.providersResolver(k)}let y=!1,w=!1,M=E6(i,s,d.length,null);for(let D=0;D<d.length;D++){const k=d[D];a.mergedAttrs=L1(a.mergedAttrs,k.hostAttrs),_8(i,a,s,M,k),ji(M,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const z=k.type.prototype;!y&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!w&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),M++}!function(i,s){const c=s.directiveEnd,u=i.data,d=s.attrs,v=[];let y=null,w=null;for(let M=s.directiveStart;M<c;M++){const D=u[M],k=D.inputs,z=null===d||Rd(s)?null:cm(k,d);v.push(z),y=Jd(k,M,y),w=Jd(D.outputs,M,w)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=y,s.outputs=w}(i,a)}v&&function(i,s,a){if(s){const c=i.localNames=[];for(let u=0;u<s.length;u+=2){const d=a[s[u+1]];if(null==d)throw new be("301",`Export of name '${s[u+1]}' not found!`);c.push(s[u],d)}}}(a,c,v)}return a.mergedAttrs=L1(a.mergedAttrs,a.attrs),u}function H2(i,s,a,c,u,d){const v=d.hostBindings;if(v){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(c,u,v)}}function M6(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Sn(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function ji(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Fr(s)&&(a[""]=i)}}function am(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function _8(i,s,a,c,u){i.data[c]=u;const d=u.factory||(u.factory=S1(u.type)),v=new ha(d,Fr(u),null);i.blueprint[c]=v,a[c]=v,H2(i,s,0,c,E6(i,a,u.hostVars,ot),u)}function Ms(i,s,a){const c=br(s,i),u=Jp(a),d=i[10],v=w8(i,kl(i,u,null,a.onPush?64:16,c,s,d,d.createRenderer(c,a),null,null));i[s.index]=v}function Ko(i,s,a,c,u,d){const v=br(i,s);!function(i,s,a,c,u,d,v){if(null==d)an(i)?i.removeAttribute(s,u,a):s.removeAttribute(u);else{const y=null==v?j(d):v(d,c||"",u);an(i)?i.setAttribute(s,u,y,a):a?s.setAttributeNS(a,u,y):s.setAttribute(u,y)}}(s[11],v,d,i.value,a,c,u)}function W_(i,s,a,c,u,d){const v=d[s];if(null!==v){const y=c.setInput;for(let w=0;w<v.length;){const M=v[w++],D=v[w++],k=v[w++];null!==y?c.setInput(a,k,M,D):a[D]=k}}}function cm(i,s){let a=null,c=0;for(;c<s.length;){const u=s[c];if(0!==u)if(5!==u){if("number"==typeof u)break;i.hasOwnProperty(u)&&(null===a&&(a=[]),a.push(u,i[u],s[c+1])),c+=2}else c+=2;else c+=4}return a}function C8(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Z_(i,s){const a=Hr(s,i);if(_c(a)){const c=a[1];80&a[2]?Zo(c,a,c.template,a[8]):a[5]>0&&b8(a)}}function b8(i){for(let c=xd(i);null!==c;c=Nd(c))for(let u=10;u<c.length;u++){const d=c[u];if(1024&d[2]){const v=d[1];Zo(v,d,v.template,d[8])}else d[5]>0&&b8(d)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const u=Hr(a[c],i);_c(u)&&u[5]>0&&b8(u)}}function K_(i,s){const a=Hr(s,i),c=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Rl(c,a,a[8])}function w8(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function E8(i){for(;i;){i[2]|=64;const s=Al(i);if(Fn(i)&&!s)return i;i=s}return null}function T6(i,s,a){const c=s[10];c.begin&&c.begin();try{Zo(i,s,i.template,a)}catch(u){throw M8(s,u),u}finally{c.end&&c.end()}}function Ol(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=y6(a),u=c[1];Pl(u,c,u.template,a)}}(i[8])}function D6(i,s,a){C2(0),s(i,a)}const Q_=(()=>Promise.resolve(null))();function $i(i){return i[7]||(i[7]=[])}function um(i){return i.cleanup||(i.cleanup=[])}function M8(i,s){const a=i[9],c=a?a.get(g,null):null;c&&c.handleError(s)}function hm(i,s,a,c,u){for(let d=0;d<a.length;){const v=a[d++],y=a[d++],w=s[v],M=i.data[v];null!==M.setInput?M.setInput(w,u,c,y):w[y]=u}}function Jo(i,s,a){const c=us(s,i);!function(i,s,a){an(i)?i.setValue(s,a):s.textContent=a}(i[11],c,a)}function Fl(i,s,a){let c=a?i.styles:null,u=a?i.classes:null,d=0;if(null!==s)for(let v=0;v<s.length;v++){const y=s[v];"number"==typeof y?d=y:1==d?u=ee(u,y):2==d&&(c=ee(c,y+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=u:i.classesWithoutHost=u}const t4=new jt("INJECTOR",-1);class fm{get(s,a=J){if(a===J){const c=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw c.name="NullInjectorError",c}return a}}const Hl=new jt("Set Injector scope."),Bl={},In={};let rf;function pm(){return void 0===rf&&(rf=new fm),rf}function T8(i,s=null,a=null,c){return new x6(i,a,s||pm(),c)}class x6{constructor(s,a,c,u=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];a&&Un(a,y=>this.processProvider(y,s,a)),Un([s],y=>this.processInjectorType(y,[],d)),this.records.set(t4,Xo(void 0,this));const v=this.records.get(Hl);this.scope=null!=v?v.value:null,this.source=u||("object"==typeof s?null:ue(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=J,c=Qe.Default){this.assertNotDestroyed();const u=u1(this),d=Rr(void 0);try{if(!(c&Qe.SkipSelf)){let y=this.records.get(s);if(void 0===y){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof jt)&&er(s);y=w&&this.injectableDefInScope(w)?Xo(no(s),Bl):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(c&Qe.Self?pm():this.parent).get(s,a=c&Qe.Optional&&a===J?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Le]=v[Le]||[]).unshift(ue(s)),u)throw v;return jo(v,s,"R3InjectorError",this.source)}throw v}finally{Rr(d),u1(u)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((c,u)=>s.push(ue(u))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,c){if(!(s=G(s)))return!1;let u=ts(s);const d=null==u&&s.ngModule||void 0,v=void 0===d?s:d,y=-1!==c.indexOf(v);if(void 0!==d&&(u=ts(d)),null==u)return!1;if(null!=u.imports&&!y){let D;c.push(v);try{Un(u.imports,k=>{this.processInjectorType(k,a,c)&&(void 0===D&&(D=[]),D.push(k))})}finally{}if(void 0!==D)for(let k=0;k<D.length;k++){const{ngModule:z,providers:U}=D[k];Un(U,Z=>this.processProvider(Z,z,U||$))}}this.injectorDefTypes.add(v);const w=S1(v)||(()=>new v);this.records.set(v,Xo(w,Bl));const M=u.providers;if(null!=M&&!y){const D=s;Un(M,k=>this.processProvider(k,D,M))}return void 0!==d&&void 0!==s.providers}processProvider(s,a,c){let u=N6(s=G(s))?s:G(s&&s.provide);const d=gm(i=s)?Xo(void 0,i.useValue):Xo(mm(i),Bl);var i;if(N6(s)||!0!==s.multi)this.records.get(u);else{let v=this.records.get(u);v||(v=Xo(void 0,Bl,!0),v.factory=()=>ai(v.multi),this.records.set(u,v)),u=s,v.multi.push(s)}this.records.set(u,d)}hydrate(s,a){return a.value===Bl&&(a.value=In,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=G(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function no(i){const s=er(i),a=null!==s?s.factory:S1(i);if(null!==a)return a;if(i instanceof jt)throw new Error(`Token ${ue(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const c=Oo(s,"?");throw new Error(`Can't resolve all parameters for ${ue(i)}: (${c.join(", ")}).`)}const a=function(i){const s=i&&(i[I1]||i[Si]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function mm(i,s,a){let c;if(N6(i)){const u=G(i);return S1(u)||no(u)}if(gm(i))c=()=>G(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...ai(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))c=()=>ln(G(i.useExisting));else{const u=G(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return S1(u)||no(u);c=()=>new u(...ai(i.deps))}return c}function Xo(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function gm(i){return null!==i&&"object"==typeof i&&sr in i}function N6(i){return"function"==typeof i}const cf=function(i,s,a){return function(i,s=null,a=null,c){const u=T8(i,s,a,c);return u._resolveInjectorDefTypes(),u}({name:a},s,i,a)};let xn=(()=>{class i{static create(a,c){return Array.isArray(a)?cf(a,c,""):cf(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=J,i.NULL=new fm,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>ln(t4)}),i.__NG_ELEMENT_ID__=-1,i})();function sC(i,s){ko(y6(i)[1],rn())}function s4(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let u;if(Fr(i))u=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");u=s.\u0275dir}if(u){if(a){c.push(u);const v=i;v.inputs=P6(i.inputs),v.declaredInputs=P6(i.declaredInputs),v.outputs=P6(i.outputs);const y=u.hostBindings;y&&oC(i,y);const w=u.viewQuery,M=u.contentQueries;if(w&&o4(i,w),M&&vf(i,M),De(i.inputs,u.inputs),De(i.declaredInputs,u.declaredInputs),De(i.outputs,u.outputs),Fr(u)&&u.data.animation){const D=i.data;D.animation=(D.animation||[]).concat(u.data.animation)}}const d=u.features;if(d)for(let v=0;v<d.length;v++){const y=d[v];y&&y.ngInherit&&y(i),y===s4&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const u=i[c];u.hostVars=s+=u.hostVars,u.hostAttrs=L1(u.hostAttrs,a=L1(a,u.hostAttrs))}}(c)}function P6(i){return i===q?{}:i===$?[]:i}function o4(i,s){const a=i.viewQuery;i.viewQuery=a?(c,u)=>{s(c,u),a(c,u)}:s}function vf(i,s){const a=i.contentQueries;i.contentQueries=a?(c,u,d)=>{s(c,u,d),a(c,u,d)}:s}function oC(i,s){const a=i.hostBindings;i.hostBindings=a?(c,u)=>{s(c,u),a(c,u)}:s}let V6=null;function a4(){if(!V6){const i=tn.Symbol;if(i&&i.iterator)V6=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(V6=c)}}}return V6}class li{constructor(s){this.wrapped=s}static wrap(s){return new li(s)}static unwrap(s){return li.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof li}}function O6(i){return!!Ha(i)&&(Array.isArray(i)||!(i instanceof Map)&&a4()in i)}function Ha(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function io(i,s,a){return i[s]=a}function bi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function _f(i,s,a,c){const u=xe();return bi(u,fs(),s)&&(It(),Ko(Hn(),u,i,s,a,c)),_f}function H6(i,s,a,c){return bi(i,fs(),a)?s+j(a)+c:ot}function Sm(i,s,a,c,u,d,v,y){const w=xe(),M=It(),D=i+20,k=M.firstCreatePass?function(i,s,a,c,u,d,v,y,w){const M=s.consts,D=to(s,i,4,v||null,x1(M,y));Lt(s,a,D,x1(M,w)),ko(s,D);const k=D.tViews=I6(2,D,c,u,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,M);return null!==s.queries&&(s.queries.template(s,D),k.queries=s.queries.embeddedTView(D)),D}(D,M,w,s,a,c,u,d,v):M.data[D];gi(k,!1);const z=w[11].createComment("");Dl(M,w,z,k),yn(z,w),w8(w,w[D]=C8(z,w,z,k)),wo(k)&&Kd(M,w,k),null!=v&&Yd(w,k,y)}function V8(i){return t1(at.lFrame.contextLView,20+i)}function h4(i,s=Qe.Default){const a=xe();return null===a?ln(i,s):Ws(rn(),a,G(i),s)}function xf(i,s,a){const c=xe();return bi(c,fs(),s)&&m1(It(),Hn(),c,i,s,c[11],a,!1),xf}function G8(i,s,a,c,u){const v=u?"class":"style";hm(i,a,s.inputs[v],v,c)}function Nf(i,s,a,c){const u=xe(),d=It(),v=20+i,y=u[11],w=u[v]=a8(y,s,at.lFrame.currentNamespace),M=d.firstCreatePass?function(i,s,a,c,u,d,v){const y=s.consts,M=to(s,i,2,u,x1(y,d));return Lt(s,a,M,x1(y,v)),null!==M.attrs&&Fl(M,M.attrs,!1),null!==M.mergedAttrs&&Fl(M,M.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,M),M}(v,d,u,0,s,a,c):d.data[v];gi(M,!0);const D=M.mergedAttrs;null!==D&&s1(y,w,D);const k=M.classes;null!==k&&h8(y,w,k);const z=M.styles;null!==z&&kp(y,w,z),64!=(64&M.flags)&&Dl(d,u,w,M),0===at.lFrame.elementDepthCount&&yn(w,u),at.lFrame.elementDepthCount++,wo(M)&&(Kd(d,u,M),Qp(d,M,u)),null!==c&&Yd(u,M)}function $a(){let i=rn();ua()?So():(i=i.parent,gi(i,!1));const s=i;at.lFrame.elementDepthCount--;const a=It();a.firstCreatePass&&(ko(a,i),sa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&G8(a,s,xe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&G8(a,s,xe(),s.stylesWithoutHost,!1)}function Lf(i,s,a,c){Nf(i,s,a,c),$a()}function W6(i,s,a){const c=xe(),u=It(),d=i+20,v=u.firstCreatePass?function(i,s,a,c,u){const d=s.consts,v=x1(d,c),y=to(s,i,8,"ng-container",v);return null!==v&&Fl(y,v,!0),Lt(s,a,y,x1(d,u)),null!==s.queries&&s.queries.elementStart(s,y),y}(d,u,c,s,a):u.data[d];gi(v,!0);const y=c[d]=c[11].createComment("");Dl(u,c,y,v),yn(y,c),wo(v)&&(Kd(u,c,v),Qp(u,v,c)),null!=a&&Yd(c,v)}function q6(){let i=rn();const s=It();ua()?So():(i=i.parent,gi(i,!1)),s.firstCreatePass&&(ko(s,i),sa(i)&&s.queries.elementEnd(i))}function q8(){return xe()}function Xl(i){return!!i&&"function"==typeof i.then}function Gm(i){return!!i&&"function"==typeof i.subscribe}const d4=Gm;function zf(i,s,a,c){const u=xe(),d=It(),v=rn();return function(i,s,a,c,u,d,v,y){const w=wo(c),D=i.firstCreatePass&&um(i),k=s[8],z=$i(s);let U=!0;if(3&c.type||y){const ne=br(c,s),Pe=y?y(ne):ne,Me=z.length,Je=y?tt=>y(cn(tt[c.index])):c.index;if(an(a)){let tt=null;if(!y&&w&&(tt=function(i,s,a,c){const u=i.cleanup;if(null!=u)for(let d=0;d<u.length-1;d+=2){const v=u[d];if(v===a&&u[d+1]===c){const y=s[7],w=u[d+2];return y.length>w?y[w]:null}"string"==typeof v&&(d+=2)}return null}(i,s,u,c.index)),null!==tt)(tt.__ngLastListenerFn__||tt).__ngNextListenerFn__=d,tt.__ngLastListenerFn__=d,U=!1;else{d=Rf(c,s,k,d,!1);const Ht=a.listen(Pe,u,d);z.push(d,Ht),D&&D.push(u,Je,Me,Me+1)}}else d=Rf(c,s,k,d,!0),Pe.addEventListener(u,d,v),z.push(d),D&&D.push(u,Je,Me,v)}else d=Rf(c,s,k,d,!1);const Z=c.outputs;let he;if(U&&null!==Z&&(he=Z[u])){const ne=he.length;if(ne)for(let Pe=0;Pe<ne;Pe+=2){const vr=s[he[Pe]][he[Pe+1]].subscribe(d),yr=z.length;z.push(d,vr),D&&D.push(u,c.index,yr,-(yr+1))}}}(d,u,u[11],v,i,s,!!a,c),zf}function K8(i,s,a,c){try{return!1!==a(c)}catch(u){return M8(i,u),!1}}function Rf(i,s,a,c,u){return function d(v){if(v===Function)return c;const y=2&i.flags?Hr(i.index,s):s;0==(32&s[2])&&E8(y);let w=K8(s,0,c,v),M=d.__ngNextListenerFn__;for(;M;)w=K8(s,0,M,v)&&w,M=M.__ngNextListenerFn__;return u&&!1===w&&(v.preventDefault(),v.returnValue=!1),w}}function Pf(i=1){return function(i){return(at.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,at.lFrame.contextLView))[8]}(i)}function EC(i,s){let a=null;const c=function(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let u=0;u<s.length;u++){const d=s[u];if("*"!==d){if(null===c?Ar(i,d,!0):Ui(c,d))return u}else a=u}return a}function qm(i){const s=xe()[16][6];if(!s.projection){const c=s.projection=Oo(i?i.length:1,null),u=c.slice();let d=s.child;for(;null!==d;){const v=i?EC(d,i):0;null!==v&&(u[v]?u[v].projectionNext=d:c[v]=d,u[v]=d),d=d.next}}}function Vf(i,s=0,a){const c=xe(),u=It(),d=to(u,20+i,16,null,a||null);null===d.projection&&(d.projection=s),So(),64!=(64&d.flags)&&function(i,s,a){u8(s[11],0,s,a,Mp(i,a,s),Sp(a.parent||s[6],a,s))}(u,c,d)}function e3(i,s,a){return Z6(i,"",s,"",a),e3}function Z6(i,s,a,c,u){const d=xe(),v=H6(d,s,a,c);return v!==ot&&m1(It(),Hn(),d,i,v,d[11],u,!1),Z6}function Km(i,s,a,c,u){const d=i[a+1],v=null===s;let y=c?B1(d):F2(d),w=!1;for(;0!==y&&(!1===w||v);){const D=i[y+1];IC(i[y],s)&&(w=!0,i[y+1]=c?Fd(D):f8(D)),y=c?B1(D):F2(D)}w&&(i[a+1]=c?f8(d):Fd(d))}function IC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ks(i,s)>=0}function jf(i,s){return function(i,s,a,c){const u=xe(),d=It(),v=function(i){const s=at.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);d.firstUpdatePass&&function(i,s,a,c){const u=i.data;if(null===u[a+1]){const d=u[Er()],v=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,c)&&null===s&&!v&&(s=!1),s=function(i,s,a,c){const u=function(i){const s=at.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=c?s.residualClasses:s.residualStyles;if(null===u)0===(c?s.classBindings:s.styleBindings)&&(a=a3(a=e5(null,i,s,a,c),s.attrs,c),d=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==u)if(a=e5(u,i,s,a,c),null===d){let w=function(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==F2(c))return i[B1(c)]}(i,s,c);void 0!==w&&Array.isArray(w)&&(w=e5(null,i,s,w[1],c),w=a3(w,s.attrs,c),function(i,s,a,c){i[B1(a?s.classBindings:s.styleBindings)]=c}(i,s,c,w))}else d=function(i,s,a){let c;const u=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<u;d++)c=a3(c,i[d].hostAttrs,a);return a3(c,s.attrs,a)}(i,s,c)}return void 0!==d&&(c?s.residualClasses=d:s.residualStyles=d),a}(u,d,s,c),function(i,s,a,c,u,d){let v=d?s.classBindings:s.styleBindings,y=B1(v),w=F2(v);i[c]=a;let D,M=!1;if(Array.isArray(a)){const k=a;D=k[1],(null===D||Ks(k,D)>0)&&(M=!0)}else D=a;if(u)if(0!==w){const z=B1(i[y+1]);i[c+1]=Ra(z,y),0!==z&&(i[z+1]=Od(i[z+1],c)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],c)}else i[c+1]=Ra(y,0),0!==y&&(i[y+1]=Od(i[y+1],c)),y=c;else i[c+1]=Ra(w,0),0===y?y=c:i[w+1]=Od(i[w+1],c),w=c;M&&(i[c+1]=f8(i[c+1])),Km(i,D,c,!0),Km(i,D,c,!1),function(i,s,a,c,u){const d=u?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&Ks(d,s)>=0&&(a[c+1]=Fd(a[c+1]))}(s,D,i,c,d),v=Ra(y,w),d?s.classBindings=v:s.styleBindings=v}(u,d,s,a,v,c)}}(d,i,v,c),s!==ot&&bi(u,v,s)&&function(i,s,a,c,u,d,v,y){if(!(3&s.type))return;const w=i.data,M=w[y+1];n5(function(i){return 1==(1&i)}(M)?ig(w,s,a,u,F2(M),v):void 0)||(n5(d)||function(i){return 2==(2&i)}(M)&&(d=ig(w,null,a,u,y,v)),function(i,s,a,c,u){const d=an(i);if(s)u?d?i.addClass(a,c):a.classList.add(c):d?i.removeClass(a,c):a.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:Ci.DashCase;if(null==u)d?i.removeStyle(a,c,v):a.style.removeProperty(c);else{const y="string"==typeof u&&u.endsWith("!important");y&&(u=u.slice(0,-10),v|=Ci.Important),d?i.setStyle(a,c,u,v):a.style.setProperty(c,u,y?"important":"")}}}(c,v,us(Er(),a),u,d))}(d,d.data[Er()],u,u[11],i,u[v+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ue(Js(i)))),i}(s,a),c,v)}(i,s,null,!0),jf}function e5(i,s,a,c,u){let d=null;const v=a.directiveEnd;let y=a.directiveStylingLast;for(-1===y?y=a.directiveStart:y++;y<v&&(d=s[y],c=a3(c,d.hostAttrs,u),d!==i);)y++;return null!==i&&(a.directiveStylingLast=y),c}function a3(i,s,a){const c=a?1:2;let u=-1;if(null!==s)for(let d=0;d<s.length;d++){const v=s[d];"number"==typeof v?u=v:u===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Mr(i,v,!!a||s[++d]))}return void 0===i?null:i}function ig(i,s,a,c,u,d){const v=null===s;let y;for(;u>0;){const w=i[u],M=Array.isArray(w),D=M?w[1]:w,k=null===D;let z=a[u+1];z===ot&&(z=k?$:void 0);let U=k?ys(z,c):D===c?z:void 0;if(M&&!n5(U)&&(U=ys(w,c)),n5(U)&&(y=U,v))return y;const Z=i[u+1];u=v?B1(Z):F2(Z)}if(null!==s){let w=d?s.residualClasses:s.residualStyles;null!=w&&(y=ys(w,c))}return y}function n5(i){return void 0!==i}function sg(i,s=""){const a=xe(),c=It(),u=i+20,d=c.firstCreatePass?to(c,u,1,s,null):c.data[u],v=a[u]=function(i,s){return an(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Dl(c,a,v,d),gi(d,!1)}function qf(i){return r5("",i,""),qf}function r5(i,s,a){const c=xe(),u=H6(c,i,s,a);return u!==ot&&Jo(c,Er(),u),r5}function e7(i,s,a){const c=xe();return bi(c,fs(),s)&&m1(It(),Hn(),c,i,s,c[11],a,!0),e7}const j2=void 0;var RC=["en",[["a","p"],["AM","PM"],j2],[["AM","PM"],j2,j2],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],j2,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],j2,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",j2,"{1} 'at' {0}",j2],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let X6={};function e0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=a5(s);if(a)return a;const c=s.split("-")[0];if(a=a5(c),a)return a;if("en"===c)return RC;throw new Error(`Missing locale data for the locale "${i}".`)}function t0(i){return e0(i)[lt.PluralCase]}function a5(i){return i in X6||(X6[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),X6[i]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const y1="en-US";let Cg=y1;function n7(i){_t(i,"Expected localeId to be defined"),"string"==typeof i&&(Cg=i.toLowerCase().replace(/_/g,"-"))}function a7(i,s,a,c,u){if(i=G(i),Array.isArray(i))for(let d=0;d<i.length;d++)a7(i[d],s,a,c,u);else{const d=It(),v=xe();let y=N6(i)?i:G(i.provide),w=mm(i);const M=rn(),D=1048575&M.providerIndexes,k=M.directiveStart,z=M.providerIndexes>>20;if(N6(i)||!i.multi){const U=new ha(w,u,h4),Z=Ug(y,s,u?D:D+z,k);-1===Z?(Gs(z1(M,v),d,y),c7(d,i,s.length),s.push(y),M.directiveStart++,M.directiveEnd++,u&&(M.providerIndexes+=1048576),a.push(U),v.push(U)):(a[Z]=U,v[Z]=U)}else{const U=Ug(y,s,D+z,k),Z=Ug(y,s,D,D+z),he=U>=0&&a[U],ne=Z>=0&&a[Z];if(u&&!ne||!u&&!he){Gs(z1(M,v),d,y);const Pe=function(i,s,a,c,u){const d=new ha(i,a,h4);return d.multi=[],d.index=s,d.componentProviders=0,gb(d,u,c&&!a),d}(u?aA:oA,a.length,u,c,w);!u&&ne&&(a[Z].providerFactory=Pe),c7(d,i,s.length,0),s.push(y),M.directiveStart++,M.directiveEnd++,u&&(M.providerIndexes+=1048576),a.push(Pe),v.push(Pe)}else c7(d,i,U>-1?U:Z,gb(a[u?Z:U],w,!u&&c));!u&&c&&ne&&a[Z].componentProviders++}}}function c7(i,s,a,c){const u=N6(s);if(u||function(i){return!!i.useClass}(s)){const v=(s.useClass||s).prototype.ngOnDestroy;if(v){const y=i.destroyHooks||(i.destroyHooks=[]);if(!u&&s.multi){const w=y.indexOf(a);-1===w?y.push(a,[c,v]):y[w+1].push(c,v)}else y.push(a,v)}}}function gb(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ug(i,s,a,c){for(let u=a;u<c;u++)if(s[u]===i)return u;return-1}function oA(i,s,a,c){return jg(this.multi,[])}function aA(i,s,a,c){const u=this.multi;let d;if(this.providerFactory){const v=this.providerFactory.componentProviders,y=Po(a,a[1],this.providerFactory.index,c);d=y.slice(0,v),jg(u,d);for(let w=v;w<y.length;w++)d.push(y[w])}else d=[],jg(u,d);return d}function jg(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function vb(i,s=[]){return a=>{a.providersResolver=(c,u)=>function(i,s,a){const c=It();if(c.firstCreatePass){const u=Fr(i);a7(a,c.data,c.blueprint,u,!0),a7(s,c.data,c.blueprint,u,!1)}}(c,u?u(i):i,s)}}class l7{}const Gg="ngComponent";class t2{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s[Gg]=i,s}(s)}}let $2=(()=>{class i{}return i.NULL=new t2,i})();function f5(...i){}function s0(i,s){return new uo(br(i,s))}const W1=function(){return s0(rn(),xe())};let uo=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=W1,i})();function h7(i){return i instanceof uo?i.nativeElement:i}class m3{}let d7=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>bb(),i})();const bb=function(){const i=xe(),a=Hr(rn().index,i);return function(i){return i[11]}(Ji(a)?a:i)};let p5=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class v3{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const m5=new v3("12.2.11");class qg{constructor(){}supports(s){return O6(s)}create(s){return new Ib(s)}}const Eb=(i,s)=>s;class Ib{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Eb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,u=0,d=null;for(;a||c;){const v=!c||a&&a.currentIndex<g5(c,u,d)?a:c,y=g5(v,u,d),w=v.currentIndex;if(v===c)u--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)u++;else{d||(d=[]);const M=y-u,D=w-u;if(M!=D){for(let z=0;z<M;z++){const U=z<d.length?d[z]:d[z]=0,Z=U+z;D<=Z&&Z<M&&(d[z]=U+1)}d[v.previousIndex]=D-M}}y!==w&&s(v,y,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!O6(s))throw new Error(`Error trying to diff '${ue(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let u,d,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)d=s[y],v=this._trackByFn(y,d),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,d,v,y)),Object.is(a.item,d)||this._addIdentityChange(a,d)):(a=this._mismatch(a,d,v,y),c=!0),a=a._next}else u=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[a4()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,y=>{v=this._trackByFn(u,y),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,y,v,u)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,v,u),c=!0),a=a._next,u++}),this.length=u;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,u){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,d,u)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,u))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,d,u)):s=this._addAfter(new Zg(a,c),d,u),s}_verifyReinsertion(s,a,c,u){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==d?s=this._reinsertAfter(d,s._prev,u):s.currentIndex!=u&&(s.currentIndex=u,this._addToMoves(s,u)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const u=s._prevRemoved,d=s._nextRemoved;return null===u?this._removalsHead=d:u._nextRemoved=d,null===d?this._removalsTail=u:d._prevRemoved=u,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const u=null===a?this._itHead:a._next;return s._next=u,s._prev=a,null===u?this._itTail=s:u._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new p7),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new p7),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Zg{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class f7{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class p7{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new f7,this.map.set(a,c)),c.add(s)}get(s,a){const u=this.map.get(s);return u?u.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function g5(i,s,a){const c=i.previousIndex;if(null===c)return c;let u=0;return a&&c<a.length&&(u=a[c]),c+s+u}class m7{constructor(){}supports(s){return s instanceof Map||Ha(s)}create(){return new v5}}class v5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ha(s)))throw new Error(`Error trying to diff '${ue(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,u)=>{if(a&&a.key===u)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const d=this._getOrCreateRecordForKey(u,c);a=this._insertBeforeOrAppend(a,d)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const u=this._records.get(s);this._maybeAddToChanges(u,a);const d=u._prev,v=u._next;return d&&(d._next=v),v&&(v._prev=d),u._next=null,u._prev=null,u}const c=new Mb(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Mb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function y5(){return new y3([new qg])}let y3=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const u=c.factories.slice();a=a.concat(u)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||y5()),deps:[[i,new Ys,new Hi]]}}find(a){const c=this.factories.find(u=>u.supports(a));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:y5}),i})();function _5(){return new _3([new m7])}let _3=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const u=c.factories.slice();a=a.concat(u)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||_5()),deps:[[i,new Ys,new Hi]]}}find(a){const c=this.factories.find(u=>u.supports(a));if(c)return c;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:_5}),i})();function C3(i,s,a,c,u=!1){for(;null!==a;){const d=s[a.index];if(null!==d&&c.push(cn(d)),Cr(d))for(let y=10;y<d.length;y++){const w=d[y],M=w[1].firstChild;null!==M&&C3(w[1],w,M,c)}const v=a.type;if(8&v)C3(i,s,a.child,c);else if(32&v){const y=i8(a,s);let w;for(;w=y();)c.push(w)}else if(16&v){const y=Ie(s,a);if(Array.isArray(y))c.push(...y);else{const w=Al(s[16]);C3(w[1],w,y,c,!0)}}a=u?a.projectionNext:a.next}return c}class m4{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return C3(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Cr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(zd(s,c),Vo(a,c))}this._attachedToViewContainer=!1}Ip(this._lView[1],this._lView)}onDestroy(s){Qd(this._lView[1],this._lView,null,s)}markForCheck(){E8(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){T6(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){No(!0);try{T6(i,s,a)}finally{No(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,w6(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Tb extends m4{constructor(s){super(s),this._view=s}detectChanges(){Ol(this._view)}checkNoChanges(){!function(i){No(!0);try{Ol(i)}finally{No(!1)}}(this._view)}get context(){return null}}const C5=function(i){return function(i,s,a){if(bo(i)&&!a){const c=Hr(i.index,s);return new m4(c,c)}return 47&i.type?new m4(s[16],s):null}(rn(),xe(),16==(16&i))};let g7=(()=>{class i{}return i.__NG_ELEMENT_ID__=C5,i})();const Sb=[new m7],b3=new y3([new qg]),xb=new _3(Sb),Lb=function(){return b5(rn(),xe())};let w3=(()=>{class i{}return i.__NG_ELEMENT_ID__=Lb,i})();const kb=w3,zb=class extends kb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s){const a=this._declarationTContainer.tViews,c=kl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(c[19]=d.createEmbeddedView(a)),Rl(a,c,s),new m4(c)}};function b5(i,s){return 4&i.type?new zb(s,i,s0(i,s)):null}class G2{}const Jg=function(){return ev(rn(),xe())};let y7=(()=>{class i{}return i.__NG_ELEMENT_ID__=Jg,i})();const gA=y7,Fb=class extends gA{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return s0(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const s=zn(this._hostTNode,this._hostLView);if(wn(s)){const a=js(s,this._hostLView),c=k1(s);return new Oi(a[1].data[c+8],a)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=w5(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){const u=s.createEmbeddedView(a||{});return this.insert(u,c),u}createComponent(s,a,c,u,d){const v=c||this.parentInjector;if(!d&&null==s.ngModule&&v){const w=v.get(G2,null);w&&(d=w)}const y=s.create(v,u,void 0,d);return this.insert(y.hostView,a),y}insert(s,a){const c=s._lView,u=c[1];if(Cr(c[3])){const D=this.indexOf(s);if(-1!==D)this.detach(D);else{const k=c[3],z=new Fb(k,k[6],k[3]);z.detach(z.indexOf(s))}}const d=this._adjustIndex(a),v=this._lContainer;!function(i,s,a,c){const u=10+c,d=a.length;c>0&&(a[u-1][4]=s),c<d-10?(s[4]=a[u],O1(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(u,c,v,d);const y=F1(d,v),w=c[11],M=l8(w,v[7]);return null!==M&&function(i,s,a,c,u,d){c[0]=u,c[6]=s,w6(i,c,a,1,u,d)}(u,v[6],w,c,M,y),s.attachToViewContainerRef(),O1(Xg(v),d,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=w5(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=zd(this._lContainer,a);c&&(Vo(Xg(this._lContainer),a),Ip(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=zd(this._lContainer,a);return c&&null!=Vo(Xg(this._lContainer),a)?new m4(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function w5(i){return i[8]}function Xg(i){return i[8]||(i[8]=[])}function ev(i,s){let a;const c=s[i.index];if(Cr(c))a=c;else{let u;if(8&i.type)u=cn(c);else{const d=s[11];u=d.createComment("");const v=br(i,s);Qc(d,l8(d,v),u,function(i,s){return an(i)?i.nextSibling(s):s.nextSibling}(d,v),!1)}s[i.index]=a=C8(c,s,u,i),w8(s,a)}return new Fb(a,i,s)}const W2={};class L5 extends $2{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=nr(s);return new Iv(a,this.ngModule)}}function O7(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Ev=new jt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>t8});class Iv extends l7{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(d8).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return O7(this.componentDef.inputs)}get outputs(){return O7(this.componentDef.outputs)}create(s,a,c,u){const d=(u=u||this.ngModule)?function(i,s){return{get:(a,c,u)=>{const d=i.get(a,W2,u);return d!==W2||c===W2?d:s.get(a,c,u)}}}(s,u.injector):s,v=d.get(m3,Pi),y=d.get(p5,null),w=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",D=c?function(i,s,a){if(an(i))return i.selectRootElement(s,a===Be.ShadowDom);let c="string"==typeof s?i.querySelector(s):s;return c.textContent="",c}(w,c,this.componentDef.encapsulation):a8(v.createRenderer(null,this.componentDef),M,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(M)),k=this.componentDef.onPush?576:528,z=function(i,s){return{components:[],scheduler:i||t8,clean:Q_,playerHandler:s||null,flags:0}}(),U=I6(0,null,null,1,0,null,null,null,null,null),Z=kl(null,U,z,k,null,null,v,w,y,d);let he,ne;E2(Z);try{const Pe=function(i,s,a,c,u,d){const v=a[1];a[20]=i;const w=to(v,20,2,"#host",null),M=w.mergedAttrs=s.hostAttrs;null!==M&&(Fl(w,M,!0),null!==i&&(s1(u,i,M),null!==w.classes&&h8(u,i,w.classes),null!==w.styles&&kp(u,i,w.styles)));const D=c.createRenderer(i,s),k=kl(a,Jp(s),null,s.onPush?64:16,a[20],w,c,D,d||null,null);return v.firstCreatePass&&(Gs(z1(w,a),v,s.type),Sn(v,w),am(w,a.length,1)),w8(a,k),a[20]=k}(D,this.componentDef,Z,v,w);if(D)if(c)s1(w,D,["ng-version",m5.full]);else{const{attrs:Me,classes:Je}=function(i){const s=[],a=[];let c=1,u=2;for(;c<i.length;){let d=i[c];if("string"==typeof d)2===u?""!==d&&s.push(d,i[++c]):8===u&&a.push(d);else{if(!Is(u))break;u=d}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Me&&s1(w,D,Me),Je&&Je.length>0&&h8(w,D,Je.join(" "))}if(ne=ca(U,20),void 0!==a){const Me=ne.projection=[];for(let Je=0;Je<this.ngContentSelectors.length;Je++){const tt=a[Je];Me.push(null!=tt?Array.from(tt):null)}}he=function(i,s,a,c,u){const d=a[1],v=function(i,s,a){const c=rn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),_8(i,c,s,E6(i,s,1,null),a));const u=Po(s,i,c.directiveStart,c);yn(u,s);const d=br(c,s);return d&&yn(d,s),u}(d,a,s);if(c.components.push(v),i[8]=v,u&&u.forEach(w=>w(v,s)),s.contentQueries){const w=rn();s.contentQueries(1,v,w.directiveStart)}const y=rn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(I2(y.index),H2(a[1],y,0,y.directiveStart,y.directiveEnd,s),M6(s,v)),v}(Pe,this.componentDef,Z,z,[sC]),Rl(U,Z,null)}finally{Bs()}return new Mv(this.componentType,he,s0(ne,Z),Z,ne)}}class Mv extends class{}{constructor(s,a,c,u,d){super(),this.location=c,this._rootLView=u,this._tNode=d,this.instance=a,this.hostView=this.changeDetectorRef=new Tb(u),this.componentType=s}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const y4=new Map;class U7 extends G2{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new L5(this);const c=Li(s),u=s[ht]||null;u&&n7(u),this._bootstrapComponents=ws(c.bootstrap),this._r3Injector=T8(s,a,[{provide:G2,useValue:this},{provide:$2,useValue:this.componentFactoryResolver}],ue(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=xn.THROW_IF_NOT_FOUND,c=Qe.Default){return s===xn||s===G2||s===t4?this:this._r3Injector.get(s,a,c)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class j7 extends class{}{constructor(s){super(),this.moduleType=s,null!==Li(s)&&function(i){const s=new Set;!function a(c){const u=Li(c,!0),d=u.id;null!==d&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ue(s)} vs ${ue(s.name)}`)}(d,y4.get(d),c),y4.set(d,c));const v=ws(u.imports);for(const y of v)s.has(y)||(s.add(y),a(y))}(i)}(s)}create(s){return new U7(this.moduleType,s)}}function Tv(i,s,a){const c=kn()+i,u=xe();return u[c]===ot?io(u,c,a?s.call(a):s()):function(i,s){return i[s]}(u,c)}function R5(i,s,a,c){return k3(xe(),kn(),i,s,a,c)}function $7(i,s,a,c,u){return function(i,s,a,c,u,d,v){const y=s+a;return function(i,s,a,c){const u=bi(i,s,a);return bi(i,s+1,c)||u}(i,y,u,d)?io(i,y+2,v?c.call(v,u,d):c(u,d)):L3(i,y+2)}(xe(),kn(),i,s,a,c,u)}function L3(i,s){const a=i[s];return a===ot?void 0:a}function k3(i,s,a,c,u,d){const v=s+a;return bi(i,v,u)?io(i,v+1,d?c.call(d,u):c(u)):L3(i,v+1)}function F5(i,s){const a=It();let c;const u=i+20;a.firstCreatePass?(c=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}throw new be("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[u]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(u,c.onDestroy)):c=a.data[u];const d=c.factory||(c.factory=S1(c.type)),v=Rr(h4);try{const y=Ro(!1),w=d();return Ro(y),function(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,xe(),u,w),w}finally{Rr(v)}}function G7(i,s,a){const c=i+20,u=xe(),d=t1(u,c);return function(i,s){li.isWrapped(s)&&(s=li.unwrap(s),i[at.lFrame.bindingIndex]=ot);return s}(u,function(i,s){return i[1].data[s].pure}(u,c)?k3(u,kn(),s,d.transform,a,d):d.transform(a))}function P3(i){return s=>{setTimeout(i,void 0,s)}}const xs=class extends p.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var u,d,v;let y=s,w=a||(()=>null),M=c;if(s&&"object"==typeof s){const k=s;y=null===(u=k.next)||void 0===u?void 0:u.bind(k),w=null===(d=k.error)||void 0===d?void 0:d.bind(k),M=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(w=P3(w),y&&(y=P3(y)),M&&(M=P3(M)));const D=super.subscribe({next:y,error:w,complete:M});return s instanceof se.w&&s.add(D),D}};function Gr(){return this._results[a4()]()}class dr{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=a4(),c=dr.prototype;c[a]||(c[a]=Gr)}get changes(){return this._changes||(this._changes=new xs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const u=sn(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let u=i[c],d=s[c];if(a&&(u=a(u),d=a(d)),d!==u)return!1}return!0}(c._results,u,a))&&(c._results=u,c.length=u.length,c.last=u[this.length-1],c.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class K7{constructor(s){this.queryList=s,this.matches=null}clone(){return new K7(this.queryList)}setDirty(){this.queryList.setDirty()}}class B5{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,u=[];for(let d=0;d<c;d++){const v=a.getByIndex(d);u.push(this.queries[v.indexInDeclarationView].clone())}return new B5(u)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==F3(s,a).matches&&this.queries[a].setDirty()}}class Nv{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Y7{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const u=null!==a?a.length:0,d=this.getByIndex(c).embeddedTView(s,u);d&&(d.indexInDeclarationView=c,null!==a?a.push(d):a=[d])}return null!==a?new Y7(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class V3{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new V3(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let u=0;u<c.length;u++){const d=c[u];this.matchTNodeWithReadOption(s,a,Q7(a,d)),this.matchTNodeWithReadOption(s,a,ms(a,s,d,!1,!1))}else c===w3?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ms(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const u=this.metadata.read;if(null!==u)if(u===uo||u===y7||u===w3&&4&a.type)this.addMatch(a.index,-2);else{const d=ms(a,s,u,!1,!1);null!==d&&this.addMatch(a.index,d)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Q7(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function J7(i,s,a,c){return-1===a?function(i,s){return 11&i.type?s0(i,s):4&i.type?b5(i,s):null}(s,i):-2===a?function(i,s,a){return a===uo?s0(s,i):a===w3?b5(s,i):a===y7?ev(s,i):void 0}(i,s,c):Po(i,i[1],a,s)}function kv(i,s,a,c){const u=s[19].queries[c];if(null===u.matches){const d=i.data,v=a.matches,y=[];for(let w=0;w<v.length;w+=2){const M=v[w];y.push(M<0?null:J7(s,d[M],v[w+1],a.metadata.read))}u.matches=y}return u.matches}function p0(i,s,a,c){const u=i.queries.getByIndex(a),d=u.matches;if(null!==d){const v=kv(i,s,u,a);for(let y=0;y<d.length;y+=2){const w=d[y];if(w>0)c.push(v[y/2]);else{const M=d[y+1],D=s[-w];for(let k=10;k<D.length;k++){const z=D[k];z[17]===z[3]&&p0(z[1],z,M,c)}if(null!==D[9]){const k=D[9];for(let z=0;z<k.length;z++){const U=k[z];p0(U[1],U,M,c)}}}}}return c}function U5(i){const s=xe(),a=It(),c=J4();C2(c+1);const u=F3(a,c);if(i.dirty&&m2(s)===(2==(2&u.metadata.flags))){if(null===u.matches)i.reset([]);else{const d=u.crossesNgTemplate?p0(a,s,c,[]):kv(a,s,u,c);i.reset(d,h7),i.notifyOnChanges()}return!0}return!1}function j5(i,s,a){const c=It();c.firstCreatePass&&(function(i,s,a){null===i.queries&&(i.queries=new Y7),i.queries.track(new V3(s,a))}(c,new Nv(i,s,a),-1),2==(2&s)&&(c.staticViewQueries=!0)),function(i,s,a){const c=new dr(4==(4&a));Qd(i,s,c,c.destroy),null===s[19]&&(s[19]=new B5),s[19].queries.push(new K7(c))}(c,xe(),s)}function Rv(){return i=xe(),s=J4(),i[19].queries[s].queryList;var i,s}function F3(i,s){return i.queries.getByIndex(s)}function Vv(i,s){return b5(i,s)}const W3=new jt("Application Initializer");let _0=(()=>{class i{constructor(a){this.appInits=a,this.resolve=f5,this.reject=f5,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const d=this.appInits[u]();if(Xl(d))a.push(d);else if(d4(d)){const v=new Promise((y,w)=>{d.subscribe({complete:y,error:w})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(u=>{this.reject(u)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(ln(W3,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const Zv=new jt("AppId"),th={provide:Zv,useFactory:function(){return`${I4()}${I4()}${I4()}`},deps:[]};function I4(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const q3=new jt("Platform Initializer"),nh=new jt("Platform ID"),Kv=new jt("appBootstrapListener");let C0=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const ih=new jt("LocaleId"),or=new jt("DefaultCurrencyCode");class Yv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const sh=function(i){return new j7(i)},q2=sh,g9=function(i){return Promise.resolve(sh(i))},v9=function(i){const s=sh(i),c=ws(Li(i).declarations).reduce((u,d)=>{const v=nr(d);return v&&u.push(new Iv(v)),u},[]);return new Yv(s,c)},y9=v9,C9=function(i){return Promise.resolve(v9(i))};let M4=(()=>{class i{constructor(){this.compileModuleSync=q2,this.compileModuleAsync=g9,this.compileModuleAndAllComponentsSync=y9,this.compileModuleAndAllComponentsAsync=C9}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();const K3=(()=>Promise.resolve(0))();function ah(i){"undefined"==typeof Zone?K3.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Wi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xs(!1),this.onMicrotaskEmpty=new xs(!1),this.onStable=new xs(!1),this.onError=new xs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!c&&a,u.shouldCoalesceRunChangeDetection=c,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let i=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,uh(i),i.isCheckStableRunning=!0,ch(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),uh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,u,d,v,y)=>{try{return ic(i),a.invokeTask(u,d,v,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),w9(i)}},onInvoke:(a,c,u,d,v,y,w)=>{try{return ic(i),a.invoke(u,d,v,y,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),w9(i)}},onHasTask:(a,c,u,d)=>{a.hasTask(u,d),c===u&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,uh(i),ch(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(a,c,u,d)=>(a.handleError(u,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Wi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,u){const d=this._inner,v=d.scheduleEventTask("NgZoneEvent: "+u,s,b9,f5,f5);try{return d.runTask(v,a,c)}finally{d.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const b9={};function ch(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function uh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ic(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function w9(i){i._nesting--,ch(i)}class ey{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xs,this.onMicrotaskEmpty=new xs,this.onStable=new xs,this.onError=new xs}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,u){return s.apply(a,c)}}let E9=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wi.assertNotInAngularZone(),ah(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ah(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,u){let d=-1;c&&c>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==d),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:d,updateCb:u})}whenStable(a,c,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,u){return[]}}return i.\u0275fac=function(a){return new(a||i)(ln(Wi))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),I9=(()=>{class i{constructor(){this._applications=new Map,dh.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return dh.findTestabilityInTree(this,a,c)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();class hh{addToWindow(s){}findTestabilityInTree(s,a,c){return null}}function K1(i){dh=i}let dh=new hh,M9=!0,A4=!1;function A9(){return A4=!0,M9}function Hw(){if(A4)throw new Error("Cannot enable prod mode after platform setup.");M9=!1}let Y1;const Z2=new jt("AllowMultipleToken");class T9{constructor(s,a){this.name=s,this.token=a}}function He(i,s,a=[]){const c=`Platform: ${s}`,u=new jt(c);return(d=[])=>{let v=mh();if(!v||v.injector.get(Z2,!1))if(i)i(a.concat(d).concat({provide:u,useValue:!0}));else{const y=a.concat(d).concat({provide:u,useValue:!0},{provide:Hl,useValue:"platform"});!function(i){if(Y1&&!Y1.destroyed&&!Y1.injector.get(Z2,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Y1=i.get(et);const s=i.get(q3,null);s&&s.forEach(a=>a())}(xn.create({providers:y,name:c}))}return function(i){const s=mh();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(u)}}function mh(){return Y1&&!Y1.destroyed?Y1:null}let et=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const y=function(i,s){let a;return a="noop"===i?new ey:("zone.js"===i?void 0:i)||new Wi({enableLongStackTrace:A9(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),w=[{provide:Wi,useValue:y}];return y.run(()=>{const M=xn.create({providers:w,parent:this.injector,name:a.moduleType.name}),D=a.create(M),k=D.injector.get(g,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const z=y.onError.subscribe({next:U=>{k.handleError(U)}});D.onDestroy(()=>{ke(this._modules,D),z.unsubscribe()})}),function(i,s,a){try{const c=a();return Xl(c)?c.catch(u=>{throw s.runOutsideAngular(()=>i.handleError(u)),u}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(k,y,()=>{const z=D.injector.get(_0);return z.runInitializers(),z.donePromise.then(()=>(n7(D.injector.get(ih,y1)||y1),this._moduleDoBootstrap(D),D))})})}bootstrapModule(a,c=[]){const u=je({},c);return function(i,s,a){const c=new j7(a);return Promise.resolve(c)}(0,0,a).then(d=>this.bootstrapModuleFactory(d,u))}_moduleDoBootstrap(a){const c=a.injector.get(ge);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(u=>c.bootstrap(u));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${ue(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(ln(xn))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();function je(i,s){return Array.isArray(s)?s.reduce(je,i):Object.assign(Object.assign({},i),s)}let ge=(()=>{class i{constructor(a,c,u,d,v){this._zone=a,this._injector=c,this._exceptionHandler=u,this._componentFactoryResolver=d,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new V.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),w=new V.y(M=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Wi.assertNotInAngularZone(),ah(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Wi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{D.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ye.T)(y,w.pipe((0,ae.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=a instanceof l7?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(u.componentType);const d=function(i){return i.isBoundToModule}(u)?void 0:this._injector.get(G2),y=u.create(xn.NULL,[],c||u.selector,d),w=y.location.nativeElement,M=y.injector.get(E9,null),D=M&&y.injector.get(I9);return M&&D&&D.registerApplication(w,M),y.onDestroy(()=>{this.detachView(y.hostView),ke(this.components,y),D&&D.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ke(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Kv,[]).concat(this._bootstrapListeners).forEach(u=>u(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(ln(Wi),ln(xn),ln(g),ln($2),ln(_0))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})();function ke(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const J3=function(i){return null},L9=He(null,"core",[{provide:nh,useValue:"unknown"},{provide:et,deps:[xn]},{provide:I9,deps:[]},{provide:C0,deps:[]}]),py=[{provide:ge,useClass:ge,deps:[Wi,xn,g,$2,_0]},{provide:Ev,deps:[Wi],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:_0,useClass:_0,deps:[[new Hi,W3]]},{provide:M4,useClass:M4,deps:[]},th,{provide:y3,useFactory:function(){return b3},deps:[]},{provide:_3,useFactory:function(){return xb},deps:[]},{provide:ih,useFactory:function(i){return n7(i=i||"undefined"!=typeof $localize&&$localize.locale||y1),i},deps:[[new Ea(ih),new Hi,new Ys]]},{provide:or,useValue:"USD"}];let qw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(ln(ge))},i.\u0275mod=vo({type:i}),i.\u0275inj=Tt({providers:py}),i})()},8939:(Xe,Ne,F)=>{"use strict";F.d(Ne,{hO:()=>de,xv:()=>ee,Dh:()=>ue,GT:()=>te,cc:()=>fe,on:()=>O,pX:()=>ae});var p=F(7716),se=F(7841),V=F(7758);Xe=F.hmd(Xe);const ye=["ngOnDestroy"],ae=(j,X,ce,me={})=>new Proxy(j,{get:(Oe,ft)=>ce.runOutsideAngular(()=>{var Et;if(j[ft])return(null===(Et=null==me?void 0:me.spy)||void 0===Et?void 0:Et.get)&&me.spy.get(ft,j[ft]),j[ft];if(ye.indexOf(ft)>-1)return()=>{};const vt=X.toPromise().then(Se=>{const ie=Se&&Se[ft];return"function"==typeof ie?ie.bind(Se):ie&&ie.then?ie.then(le=>ce.run(()=>le)):ce.run(()=>ie)});return new Proxy(()=>{},{get:(Se,ie)=>vt[ie],apply:(Se,ie,le)=>vt.then(Ee=>{var pe;const Re=Ee&&Ee(...le);return(null===(pe=null==me?void 0:me.spy)||void 0===pe?void 0:pe.apply)&&me.spy.apply(ft,le,Re),Re})})})}),te=(j,X)=>{X.forEach(ce=>{Object.getOwnPropertyNames(ce.prototype||ce).forEach(me=>{Object.defineProperty(j.prototype,me,Object.getOwnPropertyDescriptor(ce.prototype||ce,me))})})};class De{constructor(X){return X}}const ue=new p.OlP("angularfire2.app.options"),ee=new p.OlP("angularfire2.app.name");function O(j,X,ce){const Oe="object"==typeof ce&&ce||{};Oe.name=Oe.name||"string"==typeof ce&&ce||"[DEFAULT]";const Et=se.Z.apps.filter(vt=>vt&&vt.name===Oe.name)[0]||X.runOutsideAngular(()=>se.Z.initializeApp(j,Oe));try{JSON.stringify(j)!==JSON.stringify(Et.options)&&W("error",`${Et.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(vt){}return new De(Et)}const W=(j,...X)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[j](...X)},G={provide:De,useFactory:O,deps:[ue,p.R0b,[new p.FiY,ee]]};let de=(()=>{class j{constructor(ce){se.Z.registerVersion("angularfire",V.q4.full,"core"),se.Z.registerVersion("angularfire",V.q4.full,"app-compat"),se.Z.registerVersion("angular",p.q4F.full,ce.toString())}static initializeApp(ce,me){return{ngModule:j,providers:[{provide:ue,useValue:ce},{provide:ee,useValue:me}]}}}return j.\u0275fac=function(ce){return new(ce||j)(p.LFG(p.Lbi))},j.\u0275mod=p.oAB({type:j}),j.\u0275inj=p.cJS({providers:[G]}),j})();function fe(j,X,ce,me,Oe){const[,ft,Et]=globalThis.\u0275AngularfireInstanceCache.find(vt=>vt[0]===j)||[];if(ft)return function(j,X){try{return j.toString()===X.toString()}catch(ce){return j===X}}(Oe,Et)||(re("error",`${X} was already initialized on the ${ce} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),re("warn",{is:Oe,was:Et})),ft;{const vt=me();return globalThis.\u0275AngularfireInstanceCache.push([j,vt,Oe]),vt}}const we=!!Xe.hot,re=(j,...X)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[j](...X)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7758:(Xe,Ne,F)=>{"use strict";F.d(Ne,{q4:()=>_n,iC:()=>Oc,HU:()=>Mr,vb:()=>Vc,JM:()=>ba});var p=F(7716),se=F(2329),V=F(8239),ye=F(5452),ae=F(3854),te=F(6034),De=F(5601),ue=F(6676);const ee="@firebase/installations",O="0.5.2",G=`w:${O}`,de="FIS_v2",X=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ce(I){return I instanceof ae.ZR&&I.code.includes("request-failed")}function me({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Oe(I){return{token:I.token,requestStatus:2,expiresIn:Ee(I.expiresIn),creationTime:Date.now()}}function ft(I,A){return Et.apply(this,arguments)}function Et(){return(Et=(0,V.Z)(function*(I,A){const H=(yield A.json()).error;return X.create("request-failed",{requestName:I,serverCode:H.code,serverMessage:H.message,serverStatus:H.status})})).apply(this,arguments)}function vt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Se(I,{refreshToken:A}){const N=vt(I);return N.append("Authorization",function(I){return`${de} ${I}`}(A)),N}function ie(I){return le.apply(this,arguments)}function le(){return(le=(0,V.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function Ee(I){return Number(I.replace("s","000"))}function Re(I,A){return _e.apply(this,arguments)}function _e(){return(_e=(0,V.Z)(function*(I,{fid:A}){const N=me(I),ve={method:"POST",headers:vt(I),body:JSON.stringify({fid:A,authVersion:de,appId:I.appId,sdkVersion:G})},Le=yield ie(()=>fetch(N,ve));if(Le.ok){const qe=yield Le.json();return{fid:qe.fid||A,registrationStatus:2,refreshToken:qe.refreshToken,authToken:Oe(qe.authToken)}}throw yield ft("Create Installation",Le)})).apply(this,arguments)}function ut(I){return new Promise(A=>{setTimeout(A,I)})}const Tn=/^[cdef][\w-]{21}$/;function _t(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Tn.test(N)?N:""}catch(I){return""}}function Xt(I){return`${I.appName}!${I.appId}`}const Xn=new Map;function kr(I,A){const N=Xt(I);Tt(N,A),function(I,A){const N=(!tr&&"BroadcastChannel"in self&&(tr=new BroadcastChannel("[Firebase] FID Change"),tr.onmessage=I=>{Tt(I.data.key,I.data.fid)}),tr);N&&N.postMessage({key:I,fid:A}),0===Xn.size&&tr&&(tr.close(),tr=null)}(N,A)}function Tt(I,A){const N=Xn.get(I);if(N)for(const H of N)H(A)}let tr=null;const zr="firebase-installations-store";let Si=null;function M1(){return Si||(Si=(0,ue.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(zr)}})),Si}function Qe(I,A){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,V.Z)(function*(I,A){const N=Xt(I),J=(yield M1()).transaction(zr,"readwrite"),ve=J.objectStore(zr),Le=yield ve.get(N);return yield ve.put(A,N),yield J.complete,(!Le||Le.fid!==A.fid)&&kr(I,A.fid),A})).apply(this,arguments)}function Xr(I){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,V.Z)(function*(I){const A=Xt(I),H=(yield M1()).transaction(zr,"readwrite");yield H.objectStore(zr).delete(A),yield H.complete})).apply(this,arguments)}function it(I,A){return nt.apply(this,arguments)}function nt(){return(nt=(0,V.Z)(function*(I,A){const N=Xt(I),J=(yield M1()).transaction(zr,"readwrite"),ve=J.objectStore(zr),Le=yield ve.get(N),qe=A(Le);return void 0===qe?yield ve.delete(N):yield ve.put(qe,N),yield J.complete,qe&&(!Le||Le.fid!==qe.fid)&&kr(I,qe.fid),qe})).apply(this,arguments)}function Pt(I){return St.apply(this,arguments)}function St(){return(St=(0,V.Z)(function*(I){let A;const N=yield it(I,H=>{const J=lr(H),ve=qt(I,J);return A=ve.registrationPromise,ve.installationEntry});return""===N.fid?{installationEntry:yield A}:{installationEntry:N,registrationPromise:A}})).apply(this,arguments)}function lr(I){return tn(I||{fid:_t(),registrationStatus:0})}function qt(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(X.create("app-offline"))};const N={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:N,registrationPromise:function(I,A){return rt.apply(this,arguments)}(I,N)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:xi(I)}:{installationEntry:A}}function rt(){return(rt=(0,V.Z)(function*(I,A){try{return Qe(I,yield Re(I,A))}catch(N){throw ce(N)&&409===N.customData.serverCode?yield Xr(I):yield Qe(I,{fid:A.fid,registrationStatus:0}),N}})).apply(this,arguments)}function xi(I){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,V.Z)(function*(I){let A=yield Ni(I);for(;1===A.registrationStatus;)yield ut(100),A=yield Ni(I);if(0===A.registrationStatus){const{installationEntry:N,registrationPromise:H}=yield Pt(I);return H||N}return A})).apply(this,arguments)}function Ni(I){return it(I,A=>{if(!A)throw X.create("installation-not-found");return tn(A)})}function tn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function go(I,A){return q.apply(this,arguments)}function q(){return(q=(0,V.Z)(function*({appConfig:I,platformLoggerProvider:A},N){const H=$(I,N),J=Se(I,N),ve=A.getImmediate({optional:!0});ve&&J.append("x-firebase-client",ve.getPlatformInfoString());const qe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:G}})},We=yield ie(()=>fetch(H,qe));if(We.ok)return Oe(yield We.json());throw yield ft("Generate Auth Token",We)})).apply(this,arguments)}function $(I,{fid:A}){return`${me(I)}/${A}/authTokens:generate`}function K(I){return Te.apply(this,arguments)}function Te(){return(Te=(0,V.Z)(function*(I,A=!1){let N;const H=yield it(I.appConfig,ve=>{if(!gn(ve))throw X.create("not-registered");const Le=ve.authToken;if(!A&&Pr(Le))return ve;if(1===Le.requestStatus)return N=oe(I,A),ve;{if(!navigator.onLine)throw X.create("app-offline");const qe=Wn(ve);return N=Vt(I,qe),qe}});return N?yield N:H.authToken})).apply(this,arguments)}function oe(I,A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,V.Z)(function*(I,A){let N=yield ht(I.appConfig);for(;1===N.authToken.requestStatus;)yield ut(100),N=yield ht(I.appConfig);const H=N.authToken;return 0===H.requestStatus?K(I,A):H})).apply(this,arguments)}function ht(I){return it(I,A=>{if(!gn(A))throw X.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Vt(I,A){return nn.apply(this,arguments)}function nn(){return(nn=(0,V.Z)(function*(I,A){try{const N=yield go(I,A),H=Object.assign(Object.assign({},A),{authToken:N});return yield Qe(I.appConfig,H),N}catch(N){if(!ce(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const H=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Qe(I.appConfig,H)}else yield Xr(I.appConfig);throw N}})).apply(this,arguments)}function gn(I){return void 0!==I&&2===I.registrationStatus}function Pr(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Wn(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function vo(){return(vo=(0,V.Z)(function*(I){const A=I,{installationEntry:N,registrationPromise:H}=yield Pt(A.appConfig);return H?H.catch(console.error):K(A).catch(console.error),N.fid})).apply(this,arguments)}function s2(){return(s2=(0,V.Z)(function*(I,A=!1){const N=I;return yield ra(N.appConfig),(yield K(N,A)).token})).apply(this,arguments)}function ra(I){return ns.apply(this,arguments)}function ns(){return(ns=(0,V.Z)(function*(I){const{registrationPromise:A}=yield Pt(I);A&&(yield A)})).apply(this,arguments)}function Zt(I){return X.create("missing-app-config-values",{valueName:I})}const Or="installations";(0,ye._registerComponent)(new te.wA(Or,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Zt("App Configuration");if(!I.name)throw Zt("App Name");const A=["projectId","apiKey","appId"];for(const N of A)if(!I.options[N])throw Zt(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),platformLoggerProvider:(0,ye._getProvider)(A,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ye._registerComponent)(new te.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),N=(0,ye._getProvider)(A,Or).getImmediate();return{getId:()=>function(I){return vo.apply(this,arguments)}(N),getToken:J=>function(I){return s2.apply(this,arguments)}(N,J)}},"PRIVATE")),(0,ye.registerVersion)(ee,O),(0,ye.registerVersion)(ee,O,"esm2017");const Os="@firebase/remote-config",qn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wo{constructor(A,N,H,J){this.client=A,this.storage=N,this.storageCache=H,this.logger=J}isCachedDataFresh(A,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const H=Date.now()-N,J=H<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${H}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${J}.`),J}fetch(A){var N=this;return(0,V.Z)(function*(){const[H,J]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(J&&N.isCachedDataFresh(A.cacheMaxAgeMillis,H))return J;A.eTag=J&&J.eTag;const ve=yield N.client.fetch(A),Le=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ve.status&&Le.push(N.storage.setLastSuccessfulFetchResponse(ve)),yield Promise.all(Le),ve})()}}function Fr(I=navigator){return I.languages&&I.languages[0]||I.language}class Fn{constructor(A,N,H,J,ve,Le){this.firebaseInstallations=A,this.sdkVersion=N,this.namespace=H,this.projectId=J,this.apiKey=ve,this.appId=Le}fetch(A){var N=this;return(0,V.Z)(function*(){const[H,J]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Le=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},We={sdk_version:N.sdkVersion,app_instance_id:H,app_instance_id_token:J,app_id:N.appId,language_code:Fr()},Ot={method:"POST",headers:qe,body:JSON.stringify(We)},Kt=fetch(Le,Ot),oi=new Promise((_i,L2)=>{A.signal.addEventListener(()=>{const ai=new Error("The operation was aborted.");ai.name="AbortError",L2(ai)})});let sr;try{yield Promise.race([Kt,oi]),sr=yield Kt}catch(_i){let L2="fetch-client-network";throw"AbortError"===_i.name&&(L2="fetch-timeout"),qn.create(L2,{originalErrorMessage:_i.message})}let fn=sr.status;const u1=sr.headers.get("ETag")||void 0;let Bo,ln;if(200===sr.status){let _i;try{_i=yield sr.json()}catch(L2){throw qn.create("fetch-client-parse",{originalErrorMessage:L2.message})}Bo=_i.entries,ln=_i.state}if("INSTANCE_STATE_UNSPECIFIED"===ln?fn=500:"NO_CHANGE"===ln?fn=304:("NO_TEMPLATE"===ln||"EMPTY_CONFIG"===ln)&&(Bo={}),304!==fn&&200!==fn)throw qn.create("fetch-status",{httpStatus:fn});return{status:fn,eTag:u1,config:Bo}})()}}class Xi{constructor(A,N){this.client=A,this.storage=N}fetch(A){var N=this;return(0,V.Z)(function*(){const H=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(A,H)})()}attemptFetch(A,{throttleEndTimeMillis:N,backoffCount:H}){var J=this;return(0,V.Z)(function*(){yield function(I,A){return new Promise((N,H)=>{const J=Math.max(A-Date.now(),0),ve=setTimeout(N,J);I.addEventListener(()=>{clearTimeout(ve),H(qn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,N);try{const ve=yield J.client.fetch(A);return yield J.storage.deleteThrottleMetadata(),ve}catch(ve){if(!function(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ve))throw ve;const Le={throttleEndTimeMillis:Date.now()+(0,ae.$s)(H),backoffCount:H+1};return yield J.storage.setThrottleMetadata(Le),J.attemptFetch(A,Le)}})()}}class Au{constructor(A,N,H,J,ve){this.app=A,this._client=N,this._storageCache=H,this._storage=J,this._logger=ve,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function c2(I,A){const N=I.target.error||void 0;return qn.create(A,{originalErrorMessage:N&&N.message})}const Eo="app_namespace_store";class G4{constructor(A,N,H,J=function(){return new Promise((I,A)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=H=>{A(c2(H,"storage-open"))},N.onsuccess=H=>{I(H.target.result)},N.onupgradeneeded=H=>{const J=H.target.result;switch(H.oldVersion){case 0:J.createObjectStore(Eo,{keyPath:"compositeKey"})}}}catch(N){A(qn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=A,this.appName=N,this.namespace=H,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var N=this;return(0,V.Z)(function*(){const H=yield N.openDbPromise;return new Promise((J,ve)=>{const qe=H.transaction([Eo],"readonly").objectStore(Eo),We=N.createCompositeKey(A);try{const Ot=qe.get(We);Ot.onerror=Kt=>{ve(c2(Kt,"storage-get"))},Ot.onsuccess=Kt=>{const oi=Kt.target.result;J(oi?oi.value:void 0)}}catch(Ot){ve(qn.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(A,N){var H=this;return(0,V.Z)(function*(){const J=yield H.openDbPromise;return new Promise((ve,Le)=>{const We=J.transaction([Eo],"readwrite").objectStore(Eo),Ot=H.createCompositeKey(A);try{const Kt=We.put({compositeKey:Ot,value:N});Kt.onerror=oi=>{Le(c2(oi,"storage-set"))},Kt.onsuccess=()=>{ve()}}catch(Kt){Le(qn.create("storage-set",{originalErrorMessage:Kt&&Kt.message}))}})})()}delete(A){var N=this;return(0,V.Z)(function*(){const H=yield N.openDbPromise;return new Promise((J,ve)=>{const qe=H.transaction([Eo],"readwrite").objectStore(Eo),We=N.createCompositeKey(A);try{const Ot=qe.delete(We);Ot.onerror=Kt=>{ve(c2(Kt,"storage-delete"))},Ot.onsuccess=()=>{J()}}catch(Ot){ve(qn.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class Io{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,V.Z)(function*(){const N=A.storage.getLastFetchStatus(),H=A.storage.getLastSuccessfulFetchTimestampMillis(),J=A.storage.getActiveConfig(),ve=yield N;ve&&(A.lastFetchStatus=ve);const Le=yield H;Le&&(A.lastSuccessfulFetchTimestampMillis=Le);const qe=yield J;qe&&(A.activeConfig=qe)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function xu(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,V.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ye._registerComponent)(new te.wA("remote-config",function(A,{instanceIdentifier:N}){const H=A.getProvider("app").getImmediate(),J=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw qn.create("registration-window");if(!(0,ae.hl)())throw qn.create("indexed-db-unavailable");const{projectId:ve,apiKey:Le,appId:qe}=H.options;if(!ve)throw qn.create("registration-project-id");if(!Le)throw qn.create("registration-api-key");if(!qe)throw qn.create("registration-app-id");const We=new G4(qe,H.name,N=N||"firebase"),Ot=new Io(We),Kt=new De.Yd(Os);Kt.logLevel=De.in.ERROR;const oi=new Fn(J,ye.SDK_VERSION,N,ve,Le,qe),sr=new Xi(oi,We),fn=new wo(sr,We,Ot,Kt),u1=new Au(H,fn,Ot,We,Kt);return function(I){const A=(0,ae.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(u1),u1},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(Os,"0.3.1"),(0,ye.registerVersion)(Os,"0.3.1","esm2017");const e1="/firebase-messaging-sw.js",l2="/firebase-cloud-messaging-push-scope",os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",S1="google.c.a.c_id",W4="google.c.a.c_l",vc="google.c.a.ts",as="google.c.a.e";var cs=(()=>{return(I=cs||(cs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",cs;var I})();function zi(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function q4(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),H=atob(N),J=new Uint8Array(H.length);for(let ve=0;ve<H.length;++ve)J[ve]=H.charCodeAt(ve);return J}const To="fcm_token_details_db",Z4="fcm_token_object_Store";function Ri(I){return u2.apply(this,arguments)}function u2(){return(u2=(0,V.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ve=>ve.name).includes(To))return null;let A=null;return(yield(0,ue.openDb)(To,5,function(){var H=(0,V.Z)(function*(J){var ve;if(J.oldVersion<2||!J.objectStoreNames.contains(Z4))return;const Le=J.transaction.objectStore(Z4),qe=yield Le.index("fcmSenderId").get(I);if(yield Le.clear(),qe)if(2===J.oldVersion){const We=qe;if(!We.auth||!We.p256dh||!We.endpoint)return;A={token:We.fcmToken,createTime:null!==(ve=We.createTime)&&void 0!==ve?ve:Date.now(),subscriptionOptions:{auth:We.auth,p256dh:We.p256dh,endpoint:We.endpoint,swScope:We.swScope,vapidKey:"string"==typeof We.vapidKey?We.vapidKey:zi(We.vapidKey)}}}else if(3===J.oldVersion){const We=qe;A={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:zi(We.auth),p256dh:zi(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:zi(We.vapidKey)}}}else if(4===J.oldVersion){const We=qe;A={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:zi(We.auth),p256dh:zi(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:zi(We.vapidKey)}}}});return function(J){return H.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(To),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),oa(A)?A:null})).apply(this,arguments)}function oa(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const ls="firebase-messaging-store";let d2=null;function an(){return d2||(d2=(0,ue.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(ls)}})),d2}function f2(I){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,V.Z)(function*(I){const A=us(I),H=yield(yield an()).transaction(ls).objectStore(ls).get(A);if(H)return H;{const J=yield Ri(I.appConfig.senderId);if(J)return yield p2(I,J),J}})).apply(this,arguments)}function p2(I,A){return cn.apply(this,arguments)}function cn(){return(cn=(0,V.Z)(function*(I,A){const N=us(I),J=(yield an()).transaction(ls,"readwrite");return yield J.objectStore(ls).put(A,N),yield J.complete,A})).apply(this,arguments)}function yc(I){return aa.apply(this,arguments)}function aa(){return(aa=(0,V.Z)(function*(I){const A=us(I),H=(yield an()).transaction(ls,"readwrite");yield H.objectStore(ls).delete(A),yield H.complete})).apply(this,arguments)}function us({appConfig:I}){return I.appId}const Dn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ca(I,A){return t1.apply(this,arguments)}function t1(){return(t1=(0,V.Z)(function*(I,A){const N=yield Do(I),H=at(A),J={method:"POST",headers:N,body:JSON.stringify(H)};let ve;try{ve=yield(yield fetch(x1(I.appConfig),J)).json()}catch(Le){throw Dn.create("token-subscribe-failed",{errorInfo:Le})}if(ve.error)throw Dn.create("token-subscribe-failed",{errorInfo:ve.error.message});if(!ve.token)throw Dn.create("token-subscribe-no-token");return ve.token})).apply(this,arguments)}function Hr(I,A){return m2.apply(this,arguments)}function m2(){return(m2=(0,V.Z)(function*(I,A){const N=yield Do(I),H=at(A.subscriptionOptions),J={method:"PATCH",headers:N,body:JSON.stringify(H)};let ve;try{ve=yield(yield fetch(`${x1(I.appConfig)}/${A.token}`,J)).json()}catch(Le){throw Dn.create("token-update-failed",{errorInfo:Le})}if(ve.error)throw Dn.create("token-update-failed",{errorInfo:ve.error.message});if(!ve.token)throw Dn.create("token-update-no-token");return ve.token})).apply(this,arguments)}function _c(I,A){return hs.apply(this,arguments)}function hs(){return(hs=(0,V.Z)(function*(I,A){const H={method:"DELETE",headers:yield Do(I)};try{const ve=yield(yield fetch(`${x1(I.appConfig)}/${A}`,H)).json();if(ve.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:ve.error.message})}catch(J){throw Dn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function x1({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Do(I){return ds.apply(this,arguments)}function ds(){return(ds=(0,V.Z)(function*({appConfig:I,installations:A}){const N=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function at({p256dh:I,auth:A,endpoint:N,vapidKey:H}){const J={web:{endpoint:N,auth:A,p256dh:I}};return H!==os&&(J.web.applicationPubKey=H),J}const la=6048e5;function j0(I){return g2.apply(this,arguments)}function g2(){return(g2=(0,V.Z)(function*(I){const A=yield Cc(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:zi(A.getKey("auth")),p256dh:zi(A.getKey("p256dh"))},H=yield f2(I.firebaseDependencies);if(H){if(bc(H.subscriptionOptions,N))return Date.now()>=H.createTime+la?$0(I,{token:H.token,createTime:Date.now(),subscriptionOptions:N}):H.token;try{yield _c(I.firebaseDependencies,H.token)}catch(J){console.warn(J)}return xe(I.firebaseDependencies,N)}return xe(I.firebaseDependencies,N)})).apply(this,arguments)}function Y4(I){return v2.apply(this,arguments)}function v2(){return(v2=(0,V.Z)(function*(I){const A=yield f2(I.firebaseDependencies);A&&(yield _c(I.firebaseDependencies,A.token),yield yc(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function $0(I,A){return N1.apply(this,arguments)}function N1(){return(N1=(0,V.Z)(function*(I,A){try{const N=yield Hr(I.firebaseDependencies,A),H=Object.assign(Object.assign({},A),{token:N,createTime:Date.now()});return yield p2(I.firebaseDependencies,H),N}catch(N){throw yield Y4(I),N}})).apply(this,arguments)}function xe(I,A){return It.apply(this,arguments)}function It(){return(It=(0,V.Z)(function*(I,A){const H={token:yield ca(I,A),createTime:Date.now(),subscriptionOptions:A};return yield p2(I,H),H.token})).apply(this,arguments)}function Cc(I,A){return rn.apply(this,arguments)}function rn(){return(rn=(0,V.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:q4(A)})})).apply(this,arguments)}function bc(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function n1(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,A){if(!A.notification)return;I.notification={};const N=A.notification.title;N&&(I.notification.title=N);const H=A.notification.body;H&&(I.notification.body=H);const J=A.notification.image;J&&(I.notification.image=J)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const N=A.fcmOptions.link;N&&(I.fcmOptions.link=N);const H=A.fcmOptions.analytics_label;H&&(I.fcmOptions.analyticsLabel=H)}(A,I),A}function Lu(I){return"object"==typeof I&&!!I&&S1 in I}function Q4(I,A){const N=[];for(let H=0;H<I.length;H++)N.push(I.charAt(H)),H<A.length&&N.push(A.charAt(H));return N.join("")}function No(I){return Dn.create("missing-app-config-values",{valueName:I})}Q4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Q4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kn{constructor(A,N,H){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function(I){if(!I||!I.options)throw No("App Configuration Object");if(!I.name)throw No("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const H of A)if(!N[H])throw No(H);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:J,installations:N,analyticsProvider:H}}_delete(){return Promise.resolve()}}function vi(I){return y2.apply(this,arguments)}function y2(){return(y2=(0,V.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(e1,{scope:l2}),I.swRegistration.update().catch(()=>{})}catch(A){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function fs(I,A){return wr.apply(this,arguments)}function wr(){return(wr=(0,V.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield vi(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ku(I,A){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,V.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=os)})).apply(this,arguments)}function _2(){return(_2=(0,V.Z)(function*(I,A){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield ku(I,null==A?void 0:A.vapidKey),yield fs(I,null==A?void 0:A.serviceWorkerRegistration),j0(I)})).apply(this,arguments)}function Ec(I,A,N){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,V.Z)(function*(I,A,N){const H=J4(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(H,{message_id:N[S1],message_name:N[W4],message_time:N[vc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function J4(I){switch(I){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function b2(){return(b2=(0,V.Z)(function*(I,A){const N=A.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===cs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(n1(N)):I.onMessageHandler.next(n1(N)));const H=N.data;Lu(H)&&"1"===H[as]&&(yield Ec(I,N.messageType,H))})).apply(this,arguments)}const w2="@firebase/messaging";function t6(){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,V.Z)(function*(){return"undefined"!=typeof window&&(0,ae.hl)()&&(yield(0,ae.eu)())&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ye._registerComponent)(new te.wA("messaging",I=>{const A=new kn(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function(I,A){return b2.apply(this,arguments)}(A,N)),A},"PUBLIC")),(0,ye._registerComponent)(new te.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:H=>function(I,A){return _2.apply(this,arguments)}(A,H)}},"PRIVATE")),(0,ye.registerVersion)(w2,"0.9.2"),(0,ye.registerVersion)(w2,"0.9.2","esm2017");const Mc="analytics",Ac="firebase_id",zo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",M2="https://www.googletagmanager.com/gtag/js",Bn=new De.Yd("@firebase/analytics");function Tc(I){return Promise.all(I.map(A=>A.catch(N=>N)))}function Dc(I,A){const N=document.createElement("script");N.src=`${M2}?l=${I}&id=${A}`,N.async=!0,document.head.appendChild(N)}function ha(I,A,N,H,J,ve){return A2.apply(this,arguments)}function A2(){return(A2=(0,V.Z)(function*(I,A,N,H,J,ve){const Le=H[J];try{if(Le)yield A[Le];else{const We=(yield Tc(N)).find(Ot=>Ot.measurementId===J);We&&(yield A[We.appId])}}catch(qe){Bn.error(qe)}I("config",J,ve)})).apply(this,arguments)}function n6(I,A,N,H,J){return Us.apply(this,arguments)}function Us(){return(Us=(0,V.Z)(function*(I,A,N,H,J){try{let ve=[];if(J&&J.send_to){let Le=J.send_to;Array.isArray(Le)||(Le=[Le]);const qe=yield Tc(N);for(const We of Le){const Ot=qe.find(oi=>oi.measurementId===We),Kt=Ot&&A[Ot.appId];if(!Kt){ve=[];break}ve.push(Kt)}}0===ve.length&&(ve=Object.values(A)),yield Promise.all(ve),I("event",H,J||{})}catch(ve){Bn.error(ve)}})).apply(this,arguments)}function ud(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(M2))return A;return null}const i1=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),L1=new class{constructor(A={},N=1e3){this.throttleMetadata=A,this.intervalMillis=N}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,N){this.throttleMetadata[A]=N}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function i6(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function wn(I){return k1.apply(this,arguments)}function k1(){return(k1=(0,V.Z)(function*(I){var A;const{appId:N,apiKey:H}=I,J={method:"GET",headers:i6(H)},ve=zo.replace("{app-id}",N),Le=yield fetch(ve,J);if(200!==Le.status&&304!==Le.status){let qe="";try{const We=yield Le.json();(null===(A=We.error)||void 0===A?void 0:A.message)&&(qe=We.error.message)}catch(We){}throw i1.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:qe})}return Le.json()})).apply(this,arguments)}function s6(I){return js.apply(this,arguments)}function js(){return(js=(0,V.Z)(function*(I,A=L1,N){const{appId:H,apiKey:J,measurementId:ve}=I.options;if(!H)throw i1.create("no-app-id");if(!J){if(ve)return{measurementId:ve,appId:H};throw i1.create("no-api-key")}const Le=A.getThrottleMetadata(H)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Z0;return setTimeout((0,V.Z)(function*(){qe.abort()}),void 0!==N?N:6e4),T2({appId:H,apiKey:J,measurementId:ve},Le,qe,A)})).apply(this,arguments)}function T2(I,A,N){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,V.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:N},H,J=L1){const{appId:ve,measurementId:Le}=I;try{yield hd(H,A)}catch(qe){if(Le)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:ve,measurementId:Le};throw qe}try{const qe=yield wn(I);return J.deleteThrottleMetadata(ve),qe}catch(qe){if(!Nc(qe)){if(J.deleteThrottleMetadata(ve),Le)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Le} provided in the "measurementId" field in the local Firebase config. [${qe.message}]`),{appId:ve,measurementId:Le};throw qe}const We=503===Number(qe.customData.httpStatus)?(0,ae.$s)(N,J.intervalMillis,30):(0,ae.$s)(N,J.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+We,backoffCount:N+1};return J.setThrottleMetadata(ve,Ot),Bn.debug(`Calling attemptFetch again in ${We} millis`),T2(I,Ot,H,J)}})).apply(this,arguments)}function hd(I,A){return new Promise((N,H)=>{const J=Math.max(A-Date.now(),0),ve=setTimeout(N,J);I.addEventListener(()=>{clearTimeout(ve),H(i1.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Nc(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Z0{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Lc(){return kc.apply(this,arguments)}function kc(){return(kc=(0,V.Z)(function*(){if(!(0,ae.hl)())return Bn.warn(i1.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(I){return Bn.warn(i1.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function $s(){return($s=(0,V.Z)(function*(I,A,N,H,J,ve,Le){var qe;const We=s6(I);We.then(fn=>{N[fn.measurementId]=fn.appId,I.options.measurementId&&fn.measurementId!==I.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${fn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(fn=>Bn.error(fn)),A.push(We);const Ot=Lc().then(fn=>{if(fn)return H.getId()}),[Kt,oi]=yield Promise.all([We,Ot]);ud()||Dc(ve,Kt.measurementId),J("js",new Date);const sr=null!==(qe=null==Le?void 0:Le.config)&&void 0!==qe?qe:{};return sr.origin="firebase",sr.update=!0,null!=oi&&(sr[Ac]=oi),J("config",Kt.measurementId,sr),Kt.measurementId})).apply(this,arguments)}class Vi{constructor(A){this.app=A}_delete(){return delete zn[this.app.options.appId],Promise.resolve()}}let zn={},Gs=[];const Nt={};let Ws,qs,D2="dataLayer",R1=!1;function Po(I,A,N){!function(){const I=[];if((0,ae.ru)()&&I.push("This is a browser extension environment."),(0,ae.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((H,J)=>`(${J+1}) ${H}`).join(" "),N=i1.create("invalid-analytics-context",{errorInfo:A});Bn.warn(N.message)}}();const H=I.options.appId;if(!H)throw i1.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw i1.create("no-api-key");Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zn[H])throw i1.create("already-exists",{id:H});if(!R1){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(D2);const{wrappedGtag:ve,gtagCore:Le}=function(I,A,N,H,J){let ve=function(...Le){window[H].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ve=window[J]),window[J]=function(I,A,N,H){function ve(){return(ve=(0,V.Z)(function*(Le,qe,We){try{"event"===Le?yield n6(I,A,N,qe,We):"config"===Le?yield ha(I,A,N,H,qe,We):I("set",qe)}catch(Ot){Bn.error(Ot)}})).apply(this,arguments)}return function(Le,qe,We){return ve.apply(this,arguments)}}(ve,I,A,N),{gtagCore:ve,wrappedGtag:window[J]}}(zn,Gs,Nt,D2,"gtag");qs=ve,Ws=Le,R1=!0}return zn[H]=function(I,A,N,H,J,ve,Le){return $s.apply(this,arguments)}(I,Gs,Nt,A,Ws,D2,N),new Vi(I)}function da(){return(da=(0,V.Z)(function*(I,A,N,H,J){if(J&&J.global)I("event",N,H);else{const ve=yield A;I("event",N,Object.assign(Object.assign({},H),{send_to:ve}))}})).apply(this,arguments)}function c1(){return zc.apply(this,arguments)}function zc(){return(zc=(0,V.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(I){return!1}})).apply(this,arguments)}const o6="@firebase/analytics";(0,ye._registerComponent)(new te.wA(Mc,(A,{options:N})=>Po(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ye._registerComponent)(new te.wA("analytics-internal",function(A){try{const N=A.getProvider(Mc).getImmediate();return{logEvent:(H,J,ve)=>function(I,A,N,H){I=(0,ae.m9)(I),function(I,A,N,H,J){return da.apply(this,arguments)}(qs,zn[I.app.options.appId],A,N,H).catch(J=>Bn.error(J))}(N,H,J,ve)}}catch(N){throw i1.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ye.registerVersion)(o6,"0.7.2"),(0,ye.registerVersion)(o6,"0.7.2","esm2017");var Rc=F(7771),Pu=F(3637),Pc=F(7393);function gs(){}var ga=F(9105);class va{constructor(A,N,H){this.nextOrObserver=A,this.error=N,this.complete=H}call(A,N){return N.subscribe(new ya(A,this.nextOrObserver,this.error,this.complete))}}class ya extends Pc.L{constructor(A,N,H,J){super(A),this._tapNext=gs,this._tapError=gs,this._tapComplete=gs,this._tapError=H||gs,this._tapComplete=J||gs,(0,ga.m)(N)?(this._context=this,this._tapNext=N):N&&(this._context=N,this._tapNext=N.next||gs,this._tapError=N.error||gs,this._tapComplete=N.complete||gs)}_next(A){try{this._tapNext.call(this._context,A)}catch(N){return void this.destination.error(N)}this.destination.next(A)}_error(A){try{this._tapError.call(this._context,A)}catch(N){return void this.destination.error(N)}this.destination.error(A)}_complete(){try{this._tapComplete.call(this._context)}catch(A){return void this.destination.error(A)}return this.destination.complete()}}var vs=F(3101),el=F(309);const _n=new p.GfV("7.1.1"),si="__angularfire_symbol__analyticsIsSupported",Ca="__angularfire_symbol__remoteConfigIsSupported",Un="__angularfire_symbol__messagingIsSupported";function ba(I,A,N){if(A){if(1===A.length)return A[0];const ve=A.filter(Le=>Le.app===N);if(1===ve.length)return ve[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[si]||(globalThis[si]=c1().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[Un]||(globalThis[Un]=t6().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Ca]||(globalThis[Ca]=xu().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const Vc=(I,A)=>{const N=A?[A]:(0,se.C6)(),H=[];return N.forEach(J=>{J.container.getProvider(I).instances.forEach(Le=>{H.includes(Le)||H.push(Le)})}),H};function l1(){}class tl{constructor(A,N=Rc.N){this.zone=A,this.delegate=N}now(){return this.delegate.now()}schedule(A,N,H){const J=this.zone;return this.delegate.schedule(function(Le){J.runGuarded(()=>{A.apply(this,[Le])})},N,H)}}class Fo{constructor(A){this.zone=A,this.task=null}call(A,N){const H=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l1,{},l1,l1)),N.pipe((I={next:H,complete:H,error:H},function(J){return J.lift(new va(I,void 0,void 0))})).subscribe(A).add(H);var I}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mr=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new tl(Zone.current)),this.insideAngular=N.run(()=>new tl(Zone.current,Pu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ys(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Oc(I){return ys(),function(I){return function(N){return(N=N.lift(new Fo(I.ngZone))).pipe((0,vs.R)(I.outsideAngular),(0,el.QV)(I.insideAngular))}}(ys())(I)}},4486:(Xe,Ne,F)=>{"use strict";F.d(Ne,{Z:()=>be});var p=F(3854),se=F(6034),V=F(5452),ye=F(5601);class ae{constructor(re,j){this._delegate=re,this.firebase=j,(0,V._addComponent)(re,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this._delegate.automaticDataCollectionEnabled=re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(re=>{this._delegate.checkDestroyed(),re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(re,j=V._DEFAULT_ENTRY_NAME){var X;this._delegate.checkDestroyed();const ce=this._delegate.container.getProvider(re);return!ce.isInitialized()&&"EXPLICIT"===(null===(X=ce.getComponent())||void 0===X?void 0:X.instantiationMode)&&ce.initialize(),ce.getImmediate({identifier:j})}_removeServiceInstance(re,j=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(re).clearInstance(j)}_addComponent(re){(0,V._addComponent)(this._delegate,re)}_addOrOverwriteComponent(re){(0,V._addOrOverwriteComponent)(this._delegate,re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const De=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),O=function ee(){const we=function(we){const re={},j={__esModule:!0,initializeApp:function(vt,Se={}){const ie=V.initializeApp(vt,Se);if((0,p.r3)(re,ie.name))return re[ie.name];const le=new we(ie,j);return re[ie.name]=le,le},app:ce,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function(vt){const Se=vt.name,ie=Se.replace("-compat","");if(V._registerComponent(vt)&&"PUBLIC"===vt.type){const le=(Ee=ce())=>{if("function"!=typeof Ee[ie])throw De.create("invalid-app-argument",{appName:Se});return Ee[ie]()};void 0!==vt.serviceProps&&(0,p.ZB)(le,vt.serviceProps),j[ie]=le,we.prototype[ie]=function(...Ee){return this._getService.bind(this,Se).apply(this,vt.multipleInstances?Ee:[])}}return"PUBLIC"===vt.type?j[ie]:null},removeApp:function(vt){delete re[vt]},useAsService:function(vt,Se){return"serverAuth"===Se?null:Se},modularAPIs:V}};function ce(vt){if(!(0,p.r3)(re,vt=vt||V._DEFAULT_ENTRY_NAME))throw De.create("no-app",{appName:vt});return re[vt]}return j.default=j,Object.defineProperty(j,"apps",{get:function(){return Object.keys(re).map(vt=>re[vt])}}),ce.App=we,j}(ae);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:ee,extendNamespace:function(j){(0,p.ZB)(we,j)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),we}(),W=new ye.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=O;(0,V.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(Xe,Ne,F)=>{"use strict";F.r(Ne),F.d(Ne,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>Jr,_DEFAULT_ENTRY_NAME:()=>Tn,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>Xn,_apps:()=>_t,_clearComponents:()=>Tt,_components:()=>mt,_getProvider:()=>en,_registerComponent:()=>kr,_removeServiceInstance:()=>dn,deleteApp:()=>Si,getApp:()=>I1,getApps:()=>zr,initializeApp:()=>ts,onLog:()=>Ln,registerVersion:()=>Qe,setLogLevel:()=>Xr});var p=F(8239),se=F(6034),V=F(5601),ye=F(3854);class ae{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function(it){const nt=it.getComponent();return"VERSION"===(null==nt?void 0:nt.type)}(Pt)){const St=Pt.getImmediate();return`${St.library}/${St.version}`}return null}).filter(Pt=>Pt).join(" ")}}const De="@firebase/app",ee=new V.Yd("@firebase/app"),Tn="[DEFAULT]",pt={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,mt=new Map;function Xt(it,nt){try{it.container.addComponent(nt)}catch(Pt){ee.debug(`Component ${nt.name} failed to register with FirebaseApp ${it.name}`,Pt)}}function Xn(it,nt){it.container.addOrOverwriteComponent(nt)}function kr(it){const nt=it.name;if(mt.has(nt))return ee.debug(`There were multiple attempts to register component ${nt}.`),!1;mt.set(nt,it);for(const Pt of _t.values())Xt(Pt,it);return!0}function en(it,nt){return it.container.getProvider(nt)}function dn(it,nt,Pt=Tn){en(it,nt).clearInstance(Pt)}function Tt(){mt.clear()}const tr=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class es{constructor(nt,Pt,St){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}const Jr="9.1.3";function ts(it,nt={}){"object"!=typeof nt&&(nt={name:nt});const Pt=Object.assign({name:Tn,automaticDataCollectionEnabled:!1},nt),St=Pt.name;if("string"!=typeof St||!St)throw tr.create("bad-app-name",{appName:String(St)});const lr=_t.get(St);if(lr){if((0,ye.vZ)(it,lr.options)&&(0,ye.vZ)(Pt,lr.config))return lr;throw tr.create("duplicate-app",{appName:St})}const qt=new se.H0(St);for(const rt of mt.values())qt.addComponent(rt);const Be=new es(it,Pt,qt);return _t.set(St,Be),Be}function I1(it=Tn){const nt=_t.get(it);if(!nt)throw tr.create("no-app",{appName:it});return nt}function zr(){return Array.from(_t.values())}function Si(it){return M1.apply(this,arguments)}function M1(){return(M1=(0,p.Z)(function*(it){const nt=it.name;_t.has(nt)&&(_t.delete(nt),yield Promise.all(it.container.getProviders().map(Pt=>Pt.delete())),it.isDeleted=!0)})).apply(this,arguments)}function Qe(it,nt,Pt){var St;let lr=null!==(St=pt[it])&&void 0!==St?St:it;Pt&&(lr+=`-${Pt}`);const qt=lr.match(/\s|\//),Be=nt.match(/\s|\//);if(qt||Be){const rt=[`Unable to register library "${lr}" with version "${nt}":`];return qt&&rt.push(`library name "${lr}" contains illegal characters (whitespace or "/")`),qt&&Be&&rt.push("and"),Be&&rt.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void ee.warn(rt.join(" "))}kr(new se.wA(`${lr}-version`,()=>({library:lr,version:nt}),"VERSION"))}function Ln(it,nt){if(null!==it&&"function"!=typeof it)throw tr.create("invalid-log-argument");(0,V.Am)(it,nt)}function Xr(it){(0,V.Ub)(it)}kr(new se.wA("platform-logger",nt=>new ae(nt),"PRIVATE")),Qe(De,"0.7.4",""),Qe(De,"0.7.4","esm2017"),Qe("fire-js","")},6034:(Xe,Ne,F)=>{"use strict";F.d(Ne,{wA:()=>V,H0:()=>ue,zt:()=>ae});var p=F(4762),se=F(3854),V=function(){function ee(O,W,G){this.name=O,this.instanceFactory=W,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ee.prototype.setInstantiationMode=function(O){return this.instantiationMode=O,this},ee.prototype.setMultipleInstances=function(O){return this.multipleInstances=O,this},ee.prototype.setServiceProps=function(O){return this.serviceProps=O,this},ee.prototype.setInstanceCreatedCallback=function(O){return this.onInstanceCreated=O,this},ee}(),ye="[DEFAULT]",ae=function(){function ee(O,W){this.name=O,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ee.prototype.get=function(O){var W=this.normalizeInstanceIdentifier(O);if(!this.instancesDeferred.has(W)){var G=new se.BH;if(this.instancesDeferred.set(W,G),this.isInitialized(W)||this.shouldAutoInitialize())try{var de=this.getOrInitializeService({instanceIdentifier:W});de&&G.resolve(de)}catch(fe){}}return this.instancesDeferred.get(W).promise},ee.prototype.getImmediate=function(O){var W,G=this.normalizeInstanceIdentifier(null==O?void 0:O.identifier),de=null!==(W=null==O?void 0:O.optional)&&void 0!==W&&W;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(de)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(fe){if(de)return null;throw fe}},ee.prototype.getComponent=function(){return this.component},ee.prototype.setComponent=function(O){var W,G;if(O.name!==this.name)throw Error("Mismatching Component "+O.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=O,this.shouldAutoInitialize()){if(function(ee){return"EAGER"===ee.instantiationMode}(O))try{this.getOrInitializeService({instanceIdentifier:ye})}catch(ce){}try{for(var de=(0,p.XA)(this.instancesDeferred.entries()),fe=de.next();!fe.done;fe=de.next()){var be=(0,p.CR)(fe.value,2),re=be[1],j=this.normalizeInstanceIdentifier(be[0]);try{var X=this.getOrInitializeService({instanceIdentifier:j});re.resolve(X)}catch(ce){}}}catch(ce){W={error:ce}}finally{try{fe&&!fe.done&&(G=de.return)&&G.call(de)}finally{if(W)throw W.error}}}},ee.prototype.clearInstance=function(O){void 0===O&&(O=ye),this.instancesDeferred.delete(O),this.instancesOptions.delete(O),this.instances.delete(O)},ee.prototype.delete=function(){return(0,p.mG)(this,void 0,void 0,function(){var O;return(0,p.Jh)(this,function(W){switch(W.label){case 0:return O=Array.from(this.instances.values()),[4,Promise.all((0,p.ev)((0,p.ev)([],(0,p.CR)(O.filter(function(G){return"INTERNAL"in G}).map(function(G){return G.INTERNAL.delete()}))),(0,p.CR)(O.filter(function(G){return"_delete"in G}).map(function(G){return G._delete()}))))];case 1:return W.sent(),[2]}})})},ee.prototype.isComponentSet=function(){return null!=this.component},ee.prototype.isInitialized=function(O){return void 0===O&&(O=ye),this.instances.has(O)},ee.prototype.getOptions=function(O){return void 0===O&&(O=ye),this.instancesOptions.get(O)||{}},ee.prototype.initialize=function(O){var W,G;void 0===O&&(O={});var de=O.options,fe=void 0===de?{}:de,be=this.normalizeInstanceIdentifier(O.instanceIdentifier);if(this.isInitialized(be))throw Error(this.name+"("+be+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var we=this.getOrInitializeService({instanceIdentifier:be,options:fe});try{for(var re=(0,p.XA)(this.instancesDeferred.entries()),j=re.next();!j.done;j=re.next()){var X=(0,p.CR)(j.value,2),me=X[1];be===this.normalizeInstanceIdentifier(X[0])&&me.resolve(we)}}catch(ft){W={error:ft}}finally{try{j&&!j.done&&(G=re.return)&&G.call(re)}finally{if(W)throw W.error}}return we},ee.prototype.onInit=function(O,W){var G,de=this.normalizeInstanceIdentifier(W),fe=null!==(G=this.onInitCallbacks.get(de))&&void 0!==G?G:new Set;fe.add(O),this.onInitCallbacks.set(de,fe);var be=this.instances.get(de);return be&&O(be,de),function(){fe.delete(O)}},ee.prototype.invokeOnInitCallbacks=function(O,W){var G,de,fe=this.onInitCallbacks.get(W);if(fe)try{for(var be=(0,p.XA)(fe),we=be.next();!we.done;we=be.next()){var re=we.value;try{re(O,W)}catch(j){}}}catch(j){G={error:j}}finally{try{we&&!we.done&&(de=be.return)&&de.call(be)}finally{if(G)throw G.error}}},ee.prototype.getOrInitializeService=function(O){var W=O.instanceIdentifier,G=O.options,de=void 0===G?{}:G,fe=this.instances.get(W);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:te(W),options:de}),this.instances.set(W,fe),this.instancesOptions.set(W,de),this.invokeOnInitCallbacks(fe,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,fe)}catch(be){}return fe||null},ee.prototype.normalizeInstanceIdentifier=function(O){return void 0===O&&(O=ye),this.component?this.component.multipleInstances?O:ye:O},ee.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},ee}();function te(ee){return ee===ye?void 0:ee}var ue=function(){function ee(O){this.name=O,this.providers=new Map}return ee.prototype.addComponent=function(O){var W=this.getProvider(O.name);if(W.isComponentSet())throw new Error("Component "+O.name+" has already been registered with "+this.name);W.setComponent(O)},ee.prototype.addOrOverwriteComponent=function(O){this.getProvider(O.name).isComponentSet()&&this.providers.delete(O.name),this.addComponent(O)},ee.prototype.getProvider=function(O){if(this.providers.has(O))return this.providers.get(O);var W=new ae(O,this);return this.providers.set(O,W),W},ee.prototype.getProviders=function(){return Array.from(this.providers.values())},ee}()},5601:(Xe,Ne,F)=>{"use strict";F.d(Ne,{in:()=>se,Yd:()=>De,Ub:()=>ue,Am:()=>ee});const p=[];var se=(()=>{return(O=se||(se={}))[O.DEBUG=0]="DEBUG",O[O.VERBOSE=1]="VERBOSE",O[O.INFO=2]="INFO",O[O.WARN=3]="WARN",O[O.ERROR=4]="ERROR",O[O.SILENT=5]="SILENT",se;var O})();const V={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},ye=se.INFO,ae={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},te=(O,W,...G)=>{if(W<O.logLevel)return;const de=(new Date).toISOString(),fe=ae[W];if(!fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[fe](`[${de}]  ${O.name}:`,...G)};class De{constructor(W){this.name=W,this._logLevel=ye,this._logHandler=te,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in se))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?V[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...W),this._logHandler(this,se.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...W),this._logHandler(this,se.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,se.INFO,...W),this._logHandler(this,se.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,se.WARN,...W),this._logHandler(this,se.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...W),this._logHandler(this,se.ERROR,...W)}}function ue(O){p.forEach(W=>{W.setLogLevel(O)})}function ee(O,W){for(const G of p){let de=null;W&&W.level&&(de=V[W.level]),G.userLogHandler=null===O?null:(fe,be,...we)=>{const re=we.map(j=>{if(null==j)return null;if("string"==typeof j)return j;if("number"==typeof j||"boolean"==typeof j)return j.toString();if(j instanceof Error)return j.message;try{return JSON.stringify(j)}catch(X){return null}}).filter(j=>j).join(" ");be>=(null!=de?de:fe.logLevel)&&O({level:se[be].toLowerCase(),message:re,args:we,type:fe.name})}}}},3854:(Xe,Ne,F)=>{"use strict";F.d(Ne,{BH:()=>de,LL:()=>_e,ZR:()=>Re,gQ:()=>zr,zI:()=>le,hu:()=>se,g5:()=>V,US:()=>te,tV:()=>ee,h$:()=>De,$s:()=>Ni,r3:()=>en,Sg:()=>fe,ne:()=>Si,p$:()=>O,vZ:()=>tr,ZB:()=>W,gK:()=>it,pd:()=>I1,m9:()=>go,z$:()=>be,GJ:()=>kr,jU:()=>j,ru:()=>X,d:()=>me,xb:()=>Tt,w1:()=>Oe,hl:()=>Se,uI:()=>we,UG:()=>re,Yr:()=>Et,b$:()=>ce,G6:()=>vt,Mn:()=>ft,w9:()=>Xn,cI:()=>Tn,UI:()=>er,xO:()=>Jr,zd:()=>ts,DV:()=>dn,ug:()=>qt,dS:()=>lr,Pz:()=>pt,Dv:()=>Rr,Wj:()=>Pt,lb:()=>St,eu:()=>ie});const se=function(q,$){if(!q)throw V($)},V=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},ye=function(q){const $=[];let K=0;for(let Te=0;Te<q.length;Te++){let oe=q.charCodeAt(Te);oe<128?$[K++]=oe:oe<2048?($[K++]=oe>>6|192,$[K++]=63&oe|128):55296==(64512&oe)&&Te+1<q.length&&56320==(64512&q.charCodeAt(Te+1))?(oe=65536+((1023&oe)<<10)+(1023&q.charCodeAt(++Te)),$[K++]=oe>>18|240,$[K++]=oe>>12&63|128,$[K++]=oe>>6&63|128,$[K++]=63&oe|128):($[K++]=oe>>12|224,$[K++]=oe>>6&63|128,$[K++]=63&oe|128)}return $},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,$){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let oe=0;oe<q.length;oe+=3){const Ze=q[oe],ht=oe+1<q.length,Vt=ht?q[oe+1]:0,nn=oe+2<q.length,gn=nn?q[oe+2]:0;let Wn=(15&Vt)<<2|gn>>6,ti=63&gn;nn||(ti=64,ht||(Wn=64)),Te.push(K[Ze>>2],K[(3&Ze)<<4|Vt>>4],K[Wn],K[ti])}return Te.join("")},encodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(q):this.encodeByteArray(ye(q),$)},decodeString(q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(q):function(q){const $=[];let K=0,Te=0;for(;K<q.length;){const oe=q[K++];if(oe<128)$[Te++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const Ze=q[K++];$[Te++]=String.fromCharCode((31&oe)<<6|63&Ze)}else if(oe>239&&oe<365){const nn=((7&oe)<<18|(63&q[K++])<<12|(63&q[K++])<<6|63&q[K++])-65536;$[Te++]=String.fromCharCode(55296+(nn>>10)),$[Te++]=String.fromCharCode(56320+(1023&nn))}else{const Ze=q[K++],ht=q[K++];$[Te++]=String.fromCharCode((15&oe)<<12|(63&Ze)<<6|63&ht)}}return $.join("")}(this.decodeStringToByteArray(q,$))},decodeStringToByteArray(q,$){this.init_();const K=$?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let oe=0;oe<q.length;){const Ze=K[q.charAt(oe++)],Vt=oe<q.length?K[q.charAt(oe)]:0;++oe;const gn=oe<q.length?K[q.charAt(oe)]:64;++oe;const xt=oe<q.length?K[q.charAt(oe)]:64;if(++oe,null==Ze||null==Vt||null==gn||null==xt)throw Error();Te.push(Ze<<2|Vt>>4),64!==gn&&(Te.push(Vt<<4&240|gn>>2),64!==xt&&Te.push(gn<<6&192|xt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},De=function(q){const $=ye(q);return te.encodeByteArray($,!0)},ue=function(q){return De(q).replace(/\./g,"")},ee=function(q){try{return te.decodeString(q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function O(q){return W(void 0,q)}function W(q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return $}for(const K in $)!$.hasOwnProperty(K)||!G(K)||(q[K]=W(q[K],$[K]));return q}function G(q){return"__proto__"!==q}class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,K)=>{this.resolve=$,this.reject=K})}wrapCallback($){return(K,Te)=>{K?this.reject(K):this.resolve(Te),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(K):$(K,Te))}}}function fe(q,$){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=$||"demo-project",oe=q.iat||0,Ze=q.sub||q.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:oe,exp:oe+3600,auth_time:oe,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ht)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function re(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function j(){return"object"==typeof self&&self.self===self}function X(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return be().indexOf("Electron/")>=0}function Oe(){const q=be();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function ft(){return be().indexOf("MSAppHost/")>=0}function Et(){return!1}function vt(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){return"object"==typeof indexedDB}function ie(){return new Promise((q,$)=>{try{let K=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(Te);oe.onsuccess=()=>{oe.result.close(),K||self.indexedDB.deleteDatabase(Te),q(!0)},oe.onupgradeneeded=()=>{K=!1},oe.onerror=()=>{var Ze;$((null===(Ze=oe.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(K){$(K)}})}function le(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Re extends Error{constructor($,K,Te){super(K),this.code=$,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_e.prototype.create)}}class _e{constructor($,K,Te){this.service=$,this.serviceName=K,this.errors=Te}create($,...K){const Te=K[0]||{},oe=`${this.service}/${$}`,Ze=this.errors[$],ht=Ze?function(q,$){return q.replace(Wt,(K,Te)=>{const oe=$[Te];return null!=oe?String(oe):`<${Te}?>`})}(Ze,Te):"Error";return new Re(oe,`${this.serviceName}: ${ht} (${oe}).`,Te)}}const Wt=/\{\$([^}]+)}/g;function Tn(q){return JSON.parse(q)}function pt(q){return JSON.stringify(q)}const _t=function(q){let $={},K={},Te={},oe="";try{const Ze=q.split(".");$=Tn(ee(Ze[0])||""),K=Tn(ee(Ze[1])||""),oe=Ze[2],Te=K.d||{},delete K.d}catch(Ze){}return{header:$,claims:K,data:Te,signature:oe}},Xn=function(q){const K=_t(q).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},kr=function(q){const $=_t(q).claims;return"object"==typeof $&&!0===$.admin};function en(q,$){return Object.prototype.hasOwnProperty.call(q,$)}function dn(q,$){if(Object.prototype.hasOwnProperty.call(q,$))return q[$]}function Tt(q){for(const $ in q)if(Object.prototype.hasOwnProperty.call(q,$))return!1;return!0}function er(q,$,K){const Te={};for(const oe in q)Object.prototype.hasOwnProperty.call(q,oe)&&(Te[oe]=$.call(K,q[oe],oe,q));return Te}function tr(q,$){if(q===$)return!0;const K=Object.keys(q),Te=Object.keys($);for(const oe of K){if(!Te.includes(oe))return!1;const Ze=q[oe],ht=$[oe];if(es(Ze)&&es(ht)){if(!tr(Ze,ht))return!1}else if(Ze!==ht)return!1}for(const oe of Te)if(!K.includes(oe))return!1;return!0}function es(q){return null!==q&&"object"==typeof q}function Jr(q){const $=[];for(const[K,Te]of Object.entries(q))Array.isArray(Te)?Te.forEach(oe=>{$.push(encodeURIComponent(K)+"="+encodeURIComponent(oe))}):$.push(encodeURIComponent(K)+"="+encodeURIComponent(Te));return $.length?"&"+$.join("&"):""}function ts(q){const $={};return q.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[oe,Ze]=Te.split("=");$[decodeURIComponent(oe)]=decodeURIComponent(Ze)}}),$}function I1(q){const $=q.indexOf("?");if(!$)return"";const K=q.indexOf("#",$);return q.substring($,K>0?K:void 0)}class zr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let $=1;$<this.blockSize;++$)this.pad_[$]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_($,K){K||(K=0);const Te=this.W_;if("string"==typeof $)for(let xt=0;xt<16;xt++)Te[xt]=$.charCodeAt(K)<<24|$.charCodeAt(K+1)<<16|$.charCodeAt(K+2)<<8|$.charCodeAt(K+3),K+=4;else for(let xt=0;xt<16;xt++)Te[xt]=$[K]<<24|$[K+1]<<16|$[K+2]<<8|$[K+3],K+=4;for(let xt=16;xt<80;xt++){const Wn=Te[xt-3]^Te[xt-8]^Te[xt-14]^Te[xt-16];Te[xt]=4294967295&(Wn<<1|Wn>>>31)}let gn,Pr,oe=this.chain_[0],Ze=this.chain_[1],ht=this.chain_[2],Vt=this.chain_[3],nn=this.chain_[4];for(let xt=0;xt<80;xt++){xt<40?xt<20?(gn=Vt^Ze&(ht^Vt),Pr=1518500249):(gn=Ze^ht^Vt,Pr=1859775393):xt<60?(gn=Ze&ht|Vt&(Ze|ht),Pr=2400959708):(gn=Ze^ht^Vt,Pr=3395469782);const Wn=(oe<<5|oe>>>27)+gn+nn+Pr+Te[xt]&4294967295;nn=Vt,Vt=ht,ht=4294967295&(Ze<<30|Ze>>>2),Ze=oe,oe=Wn}this.chain_[0]=this.chain_[0]+oe&4294967295,this.chain_[1]=this.chain_[1]+Ze&4294967295,this.chain_[2]=this.chain_[2]+ht&4294967295,this.chain_[3]=this.chain_[3]+Vt&4294967295,this.chain_[4]=this.chain_[4]+nn&4294967295}update($,K){if(null==$)return;void 0===K&&(K=$.length);const Te=K-this.blockSize;let oe=0;const Ze=this.buf_;let ht=this.inbuf_;for(;oe<K;){if(0===ht)for(;oe<=Te;)this.compress_($,oe),oe+=this.blockSize;if("string"==typeof $){for(;oe<K;)if(Ze[ht]=$.charCodeAt(oe),++ht,++oe,ht===this.blockSize){this.compress_(Ze),ht=0;break}}else for(;oe<K;)if(Ze[ht]=$[oe],++ht,++oe,ht===this.blockSize){this.compress_(Ze),ht=0;break}}this.inbuf_=ht,this.total_+=K}digest(){const $=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let oe=this.blockSize-1;oe>=56;oe--)this.buf_[oe]=255&K,K/=256;this.compress_(this.buf_);let Te=0;for(let oe=0;oe<5;oe++)for(let Ze=24;Ze>=0;Ze-=8)$[Te]=this.chain_[oe]>>Ze&255,++Te;return $}}function Si(q,$){const K=new M1(q,$);return K.subscribe.bind(K)}class M1{constructor($,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{$(this)}).catch(Te=>{this.error(Te)})}next($){this.forEachObserver(K=>{K.next($)})}error($){this.forEachObserver(K=>{K.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,K,Te){let oe;if(void 0===$&&void 0===K&&void 0===Te)throw new Error("Missing Observer.");oe=function(q,$){if("object"!=typeof q||null===q)return!1;for(const K of["next","error","complete"])if(K in q&&"function"==typeof q[K])return!0;return!1}($)?$:{next:$,error:K,complete:Te},void 0===oe.next&&(oe.next=Xr),void 0===oe.error&&(oe.error=Xr),void 0===oe.complete&&(oe.complete=Xr);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(ht){}}),this.observers.push(oe),Ze}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,$)}sendOne($,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{K(this.observers[$])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xr(){}const Rr=function(q,$,K,Te){let oe;if(Te<$?oe="at least "+$:Te>K&&(oe=0===K?"none":"no more than "+K),oe)throw new Error(q+" failed: Was called with "+Te+(1===Te?" argument.":" arguments.")+" Expects "+oe+".")};function it(q,$){return`${q} failed: ${$} argument `}function Pt(q,$,K,Te){if((!Te||K)&&"function"!=typeof K)throw new Error(it(q,$)+"must be a valid function.")}function St(q,$,K,Te){if((!Te||K)&&("object"!=typeof K||null===K))throw new Error(it(q,$)+"must be a valid context object.")}const lr=function(q){const $=[];let K=0;for(let Te=0;Te<q.length;Te++){let oe=q.charCodeAt(Te);if(oe>=55296&&oe<=56319){const Ze=oe-55296;Te++,se(Te<q.length,"Surrogate pair missing trail surrogate."),oe=65536+(Ze<<10)+(q.charCodeAt(Te)-56320)}oe<128?$[K++]=oe:oe<2048?($[K++]=oe>>6|192,$[K++]=63&oe|128):oe<65536?($[K++]=oe>>12|224,$[K++]=oe>>6&63|128,$[K++]=63&oe|128):($[K++]=oe>>18|240,$[K++]=oe>>12&63|128,$[K++]=oe>>6&63|128,$[K++]=63&oe|128)}return $},qt=function(q){let $=0;for(let K=0;K<q.length;K++){const Te=q.charCodeAt(K);Te<128?$++:Te<2048?$+=2:Te>=55296&&Te<=56319?($+=4,K++):$+=3}return $};function Ni(q,$=1e3,K=2){const Te=$*Math.pow(K,q),oe=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+oe)}function go(q){return q&&q._delegate?q._delegate:q}},2329:(Xe,Ne,F)=>{"use strict";F.d(Ne,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=F(5452);(0,p.registerVersion)("firebase","9.1.3","app")},7841:(Xe,Ne,F)=>{"use strict";F.d(Ne,{Z:()=>p.Z});var p=F(4486);p.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(Xe,Ne,F)=>{"use strict";F.r(Ne);var p=F(8239),se=F(4486),V=F(3854),ye=F(5452),ae=F(4762),te=F(5601),De=F(6034);const be=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},we=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},re=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),X=new te.Yd("@firebase/auth");function ce(_,...f){X.logLevel<=te.in.ERROR&&X.error(`Auth (${ye.SDK_VERSION}): ${_}`,...f)}function me(_,...f){throw vt(_,...f)}function Oe(_,...f){return vt(_,...f)}function ft(_,f,g){const b=Object.assign(Object.assign({},we()),{[f]:g});return new V.LL("auth","Firebase",b).create(f,{appName:_.name})}function Et(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&me(_,"argument-error"),ft(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(_,...f){if("string"!=typeof _){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=_.name),_._errorFactory.create(g,...b)}return re.create(_,...f)}function Se(_,f,...g){if(!_)throw vt(f,...g)}function ie(_){const f="INTERNAL ASSERTION FAILED: "+_;throw ce(f),new Error(f)}function le(_,f){_||ie(f)}const Ee=new Map;function pe(_){le(_ instanceof Function,"Expected a class definition");let f=Ee.get(_);return f?(le(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Ee.set(_,f),f)}function ut(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Wt(){return"http:"===Tn()||"https:"===Tn()}function Tn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class mt{constructor(f,g){this.shortDelay=f,this.longDelay=g,le(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,V.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xt(_,f){le(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Xn{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new mt(3e4,6e4);function dn(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Tt(_,f,g,b){return er.apply(this,arguments)}function er(){return(er=(0,p.Z)(function*(_,f,g,b,S={}){return tr(_,S,()=>{let L={},Y={};b&&("GET"===f?Y=b:L={body:JSON.stringify(b)});const Ce=(0,V.xO)(Object.assign({key:_.config.apiKey},Y)).slice(1),Fe=new(Xn.headers());return Fe.set("Content-Type","application/json"),Fe.set("X-Client-Version",_._getSdkClientVersion()),_.languageCode&&Fe.set("X-Firebase-Locale",_.languageCode),Xn.fetch()(I1(_,_.config.apiHost,g,Ce),Object.assign({method:f,headers:Fe,referrerPolicy:"no-referrer"},L))})})).apply(this,arguments)}function tr(_,f,g){return es.apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(_,f,g){_._canInitEmulator=!1;const b=Object.assign(Object.assign({},kr),f);try{const S=new zr(_),L=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const Y=yield L.json();if("needConfirmation"in Y)throw Si(_,"account-exists-with-different-credential",Y);if(L.ok&&!("errorMessage"in Y))return Y;{const Ce=L.ok?Y.errorMessage:Y.error.message,[Fe,Ge]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Si(_,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Fe)throw Si(_,"email-already-in-use",Y);const ct=b[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw ft(_,ct,Ge);me(_,ct)}}catch(S){if(S instanceof V.ZR)throw S;me(_,"network-request-failed")}})).apply(this,arguments)}function Jr(_,f,g,b){return ts.apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(_,f,g,b,S={}){const L=yield Tt(_,f,g,b,S);return"mfaPendingCredential"in L&&me(_,"multi-factor-auth-required",{serverResponse:L}),L})).apply(this,arguments)}function I1(_,f,g,b){const S=`${f}${g}?${b}`;return _.config.emulator?Xt(_.config,S):`${_.config.apiScheme}://${S}`}class zr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(Oe(this.auth,"timeout")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Si(_,f,g){const b={appName:_.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const S=Oe(_,f,b);return S.customData._tokenResponse=g,S}function Qe(){return(Qe=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Ln(_,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rr(_,f){return it.apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function nt(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function lr(){return(lr=(0,p.Z)(function*(_,f=!1){const g=(0,V.m9)(_),b=yield g.getIdToken(f),S=Be(b);Se(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const L="object"==typeof S.firebase?S.firebase:void 0,Y=null==L?void 0:L.sign_in_provider;return{claims:S,token:b,authTime:nt(qt(S.auth_time)),issuedAtTime:nt(qt(S.iat)),expirationTime:nt(qt(S.exp)),signInProvider:Y||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function qt(_){return 1e3*Number(_)}function Be(_){const[f,g,b]=_.split(".");if(void 0===f||void 0===g||void 0===b)return ce("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,V.tV)(g);return S?JSON.parse(S):(ce("Failed to decode base64 JWT payload"),null)}catch(S){return ce("Caught error parsing JWT payload as JSON",S),null}}function xi(_,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof V.ZR&&Ni(b)&&_.auth.currentUser===_&&(yield _.auth.signOut()),b}})).apply(this,arguments)}function Ni({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class tn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class ei{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function go(_){return q.apply(this,arguments)}function q(){return(q=(0,p.Z)(function*(_){var f;const g=_.auth,b=yield _.getIdToken(),S=yield xi(_,Rr(g,{idToken:b}));Se(null==S?void 0:S.users.length,g,"internal-error");const L=S.users[0];_._notifyReloadListener(L);const Y=(null===(f=L.providerUserInfo)||void 0===f?void 0:f.length)?oe(L.providerUserInfo):[],Ce=Te(_.providerData,Y),ct=!!_.isAnonymous&&!(_.email&&L.passwordHash||(null==Ce?void 0:Ce.length)),st={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ce,metadata:new ei(L.createdAt,L.lastLoginAt),isAnonymous:ct};Object.assign(_,st)})).apply(this,arguments)}function K(){return(K=(0,p.Z)(function*(_){const f=(0,V.m9)(_);yield go(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Te(_,f){return[..._.filter(b=>!f.some(S=>S.providerId===b.providerId)),...f]}function oe(_){return _.map(f=>{var{providerId:g}=f,b=(0,ae._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ht(){return(ht=(0,p.Z)(function*(_,f){const g=yield tr(_,{},()=>{const b=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:L}=_.config,Y=I1(_,S,"/v1/token",`key=${L}`);return Xn.fetch()(Y,{method:"POST",headers:{"X-Client-Version":_._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Se(f.idToken,"internal-error"),Se(void 0!==f.idToken,"internal-error"),Se(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=Be(_);return Se(f,"internal-error"),Se(void 0!==f.exp,"internal-error"),Se(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,p.Z)(function*(){return Se(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:L,expiresIn:Y}=yield function(_,f){return ht.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(S,L,Number(Y))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:S,expirationTime:L}=g,Y=new Vt;return b&&(Se("string"==typeof b,"internal-error",{appName:f}),Y.refreshToken=b),S&&(Se("string"==typeof S,"internal-error",{appName:f}),Y.accessToken=S),L&&(Se("number"==typeof L,"internal-error",{appName:f}),Y.expirationTime=L),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return ie("not implemented")}}function nn(_,f){Se("string"==typeof _||void 0===_,"internal-error",{appName:f})}class gn{constructor(f){var{uid:g,auth:b,stsTokenManager:S}=f,L=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.metadata=new ei(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,p.Z)(function*(){const b=yield xi(g,g.stsTokenManager.getToken(g.auth,f));return Se(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function(_){return lr.apply(this,arguments)}(this,f)}reload(){return function(_){return K.apply(this,arguments)}(this)}_assign(f){this!==f&&(Se(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new gn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,p.Z)(function*(){let S=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield go(b)),yield b.auth._persistUserIfCurrent(b),S&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,p.Z)(function*(){const g=yield f.getIdToken();return yield xi(f,function(_,f){return Qe.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,S,L,Y,Ce,Fe,Ge,ct;const st=null!==(b=g.displayName)&&void 0!==b?b:void 0,Kn=null!==(S=g.email)&&void 0!==S?S:void 0,Bi=null!==(L=g.phoneNumber)&&void 0!==L?L:void 0,Il=null!==(Y=g.photoURL)&&void 0!==Y?Y:void 0,t8=null!==(Ce=g.tenantId)&&void 0!==Ce?Ce:void 0,n8=null!==(Fe=g._redirectEventId)&&void 0!==Fe?Fe:void 0,Td=null!==(Ge=g.createdAt)&&void 0!==Ge?Ge:void 0,Dd=null!==(ct=g.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:V2,emailVerified:ws,isAnonymous:Cp,providerData:r8,stsTokenManager:Ml}=g;Se(V2&&Ml,f,"internal-error");const Sd=Vt.fromJSON(this.name,Ml);Se("string"==typeof V2,f,"internal-error"),nn(st,f.name),nn(Kn,f.name),Se("boolean"==typeof ws,f,"internal-error"),Se("boolean"==typeof Cp,f,"internal-error"),nn(Bi,f.name),nn(Il,f.name),nn(t8,f.name),nn(n8,f.name),nn(Td,f.name),nn(Dd,f.name);const Ci=new gn({uid:V2,auth:f,email:Kn,emailVerified:ws,displayName:st,isAnonymous:Cp,photoURL:Il,phoneNumber:Bi,tenantId:t8,stsTokenManager:Sd,createdAt:Td,lastLoginAt:Dd});return r8&&Array.isArray(r8)&&(Ci.providerData=r8.map(Yc=>Object.assign({},Yc))),n8&&(Ci._redirectEventId=n8),Ci}static _fromIdTokenResponse(f,g,b=!1){return(0,p.Z)(function*(){const S=new Vt;S.updateFromServerResponse(g);const L=new gn({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:b});return yield go(L),L})()}}const xt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,b){var S=this;return(0,p.Z)(function*(){S.storage[g]=b})()}_get(g){var b=this;return(0,p.Z)(function*(){const S=b.storage[g];return void 0===S?null:S})()}_remove(g){var b=this;return(0,p.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return _.type="NONE",_})();function Wn(_,f,g){return`firebase:${_}:${f}:${g}`}class ti{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:S,name:L}=this.auth;this.fullUserKey=Wn(this.userKey,S.apiKey,L),this.fullPersistenceKey=Wn("persistence",S.apiKey,L),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?gn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,p.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,p.Z)(function*(){if(!g.length)return new ti(pe(xt),f,b);const S=(yield Promise.all(g.map(function(){var Ge=(0,p.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let L=S[0]||pe(xt);const Y=Wn(b,f.config.apiKey,f.name);let Ce=null;for(const Ge of g)try{const ct=yield Ge._get(Y);if(ct){const st=gn._fromJSON(f,ct);Ge!==L&&(Ce=st),L=Ge;break}}catch(ct){}const Fe=S.filter(Ge=>Ge._shouldAllowMigration);return L._shouldAllowMigration&&Fe.length?(L=Fe[0],Ce&&(yield L._set(Y,Ce.toJSON())),yield Promise.all(g.map(function(){var Ge=(0,p.Z)(function*(ct){if(ct!==L)try{yield ct._remove(Y)}catch(st){}});return function(ct){return Ge.apply(this,arguments)}}())),new ti(L,f,b)):new ti(L,f,b)})()}}function i2(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ra(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(vo(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(nr(f))return"Blackberry";if(Vr(f))return"Webos";if(na(f))return"Safari";if((f.includes("chrome/")||s2(f))&&!f.includes("edge/"))return"Chrome";if(ns(f))return"Android";{const b=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function vo(_=(0,V.z$)()){return/firefox\//i.test(_)}function na(_=(0,V.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function s2(_=(0,V.z$)()){return/crios\//i.test(_)}function ra(_=(0,V.z$)()){return/iemobile/i.test(_)}function ns(_=(0,V.z$)()){return/android/i.test(_)}function nr(_=(0,V.z$)()){return/blackberry/i.test(_)}function Vr(_=(0,V.z$)()){return/webos/i.test(_)}function ur(_=(0,V.z$)()){return/iphone|ipad|ipod/i.test(_)}function Ue(_=(0,V.z$)()){return ur(_)||ns(_)||Vr(_)||nr(_)||/windows phone/i.test(_)||ra(_)}function Zt(_,f=[]){let g;switch(_){case"Browser":g=i2((0,V.z$)());break;case"Worker":g=`${i2((0,V.z$)())}-${_}`;break;default:g=_}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ye.SDK_VERSION}/${b}`}class Or{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new On(this),this.idTokenSubscription=new On(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=re,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=pe(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S;b._deleted||(b.persistenceManager=yield ti.create(b,f),!b._deleted&&((null===(S=b._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(g),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,p.Z)(function*(){var b;let S=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const L=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,Y=null==S?void 0:S._redirectEventId,Ce=yield g.tryRedirectSignIn(f);(!L||L===Y)&&(null==Ce?void 0:Ce.user)&&(S=Ce.user)}return S?S._redirectEventId?(Se(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,p.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(S){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,p.Z)(function*(){try{yield go(f)}catch(b){if("auth/network-request-failed"!==b.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,p.Z)(function*(){const b=f?(0,V.m9)(f):null;return b&&Se(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,p.Z)(function*(){if(!g._deleted)return f&&Se(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,p.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(pe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,p.Z)(function*(){const S=yield b.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&pe(f)||g._popupRedirectResolver;Se(b,g,"argument-error"),g.redirectPersistenceManager=yield ti.create(g,[pe(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,p.Z)(function*(){var b,S;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,p.Z)(function*(){if(f===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,S){if(this._deleted)return()=>{};const L="function"==typeof g?g:g.next.bind(g),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(Y,this,"internal-error"),Y.then(()=>L(this.currentUser)),"function"==typeof g?f.addObserver(g,b,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function vn(_){return(0,V.m9)(_)}class On{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bn(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function rs(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class ri{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ie("not implemented")}_getIdTokenResponse(f){return ie("not implemented")}_linkToIdToken(f,g){return ie("not implemented")}_getReauthenticationResolver(f){return ie("not implemented")}}function is(_,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:resetPassword",dn(_,f))})).apply(this,arguments)}function yo(_,f){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _o(_,f){return T1.apply(this,arguments)}function T1(){return(T1=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",dn(_,f))})).apply(this,arguments)}function Bt(){return(Bt=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithPassword",dn(_,f))})).apply(this,arguments)}function ia(_,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:sendOobCode",dn(_,f))})).apply(this,arguments)}function D1(_,f){return o2.apply(this,arguments)}function o2(){return(o2=(0,p.Z)(function*(_,f){return ia(_,f)})).apply(this,arguments)}function Co(_,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(_,f){return ia(_,f)})).apply(this,arguments)}function ss(_,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(_,f){return ia(_,f)})).apply(this,arguments)}function Iu(_,f){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(_,f){return ia(_,f)})).apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithEmailLink",dn(_,f))})).apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithEmailLink",dn(_,f))})).apply(this,arguments)}class Fr extends ri{constructor(f,g,b,S=null){super("password",b),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new Fr(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Fr(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function(_,f){return Bt.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,f){return sa.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:me(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,p.Z)(function*(){switch(b.signInMethod){case"password":return yo(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(_,f){return wo.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:me(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Fn(_,f){return j4.apply(this,arguments)}function j4(){return(j4=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithIdp",dn(_,f))})).apply(this,arguments)}class Xi extends ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Xi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):me("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S}=g,L=(0,ae._T)(g,["providerId","signInMethod"]);if(!b||!S)return null;const Y=new Xi(b,S);return Y.idToken=L.idToken||void 0,Y.accessToken=L.accessToken||void 0,Y.secret=L.secret,Y.nonce=L.nonce,Y.pendingToken=L.pendingToken||null,Y}_getIdTokenResponse(f){return Fn(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Fn(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,V.xO)(g)}return f}}function Mu(_,f){return a2.apply(this,arguments)}function a2(){return(a2=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:sendVerificationCode",dn(_,f))})).apply(this,arguments)}function c2(){return(c2=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithPhoneNumber",dn(_,f))})).apply(this,arguments)}function $4(){return($4=(0,p.Z)(function*(_,f){const g=yield Jr(_,"POST","/v1/accounts:signInWithPhoneNumber",dn(_,f));if(g.temporaryProof)throw Si(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Tu={USER_NOT_FOUND:"user-not-found"};function G4(){return(G4=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithPhoneNumber",dn(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Tu)})).apply(this,arguments)}class Io extends ri{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Io({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Io({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(_,f){return c2.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(_,f){return $4.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return G4.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:S,temporaryProof:L}=f;return b||g||S||L?new Io({verificationId:g,verificationCode:b,phoneNumber:S,temporaryProof:L}):null}}class Mo{constructor(f){var g,b,S,L,Y,Ce;const Fe=(0,V.zd)((0,V.pd)(f)),Ge=null!==(g=Fe.apiKey)&&void 0!==g?g:null,ct=null!==(b=Fe.oobCode)&&void 0!==b?b:null,st=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);Se(Ge&&ct&&st,"argument-error"),this.apiKey=Ge,this.operation=st,this.code=ct,this.continueUrl=null!==(L=Fe.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Y=Fe.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(Ce=Fe.tenantId)&&void 0!==Ce?Ce:null}static parseLink(f){const g=function(_){const f=(0,V.zd)((0,V.pd)(_)).link,g=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,b=(0,V.zd)((0,V.pd)(_)).deep_link_id;return(b?(0,V.zd)((0,V.pd)(b)).link:null)||b||g||f||_}(f);try{return new Mo(g)}catch(b){return null}}}let Ao=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,b){return Fr._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const S=Mo.parseLink(b);return Se(S,"argument-error"),Fr._fromEmailAndCode(g,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class e1{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class l2 extends e1{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class os extends l2{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Se("providerId"in g&&"signInMethod"in g,"argument-error"),Xi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Se(f.idToken||f.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return os.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return os.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:S,pendingToken:L,nonce:Y,providerId:Ce}=f;if(!b&&!S&&!g&&!L||!Ce)return null;try{return new os(Ce)._credential({idToken:g,accessToken:b,nonce:Y,pendingToken:L})}catch(Fe){return null}}}let gc=(()=>{class _ extends l2{constructor(){super("facebook.com")}static credential(g){return Xi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),S1=(()=>{class _ extends l2{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return Xi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:S}=g;if(!b&&!S)return null;try{return _.credential(b,S)}catch(L){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),W4=(()=>{class _ extends l2{constructor(){super("github.com")}static credential(g){return Xi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(b){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class as extends ri{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Fn(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Fn(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:S,pendingToken:L}=g;return b&&S&&L&&b===S?new as(b,L):null}static _create(f,g){return new as(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let zi=(()=>{class _ extends l2{constructor(){super("twitter.com")}static credential(g,b){return Xi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:S}=g;if(!b||!S)return null;try{return _.credential(b,S)}catch(L){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function q4(_,f){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signUp",dn(_,f))})).apply(this,arguments)}class ii{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,S=!1){return(0,p.Z)(function*(){const L=yield gn._fromIdTokenResponse(f,b,S),Y=Z4(b);return new ii({user:L,providerId:Y,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const S=Z4(b);return new ii({user:f,providerId:S,_tokenResponse:b,operationType:g})})()}}function Z4(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function u2(){return(u2=(0,p.Z)(function*(_){var f;const g=vn(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ii({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield q4(g,{returnSecureToken:!0}),S=yield ii._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class oa extends V.ZR{constructor(f,g,b,S){var L;super(g.code,g.message),this.operationType=b,this.user=S,this.name="FirebaseError",Object.setPrototypeOf(this,oa.prototype),this.appName=f.name,this.code=g.code,this.tenantId=null!==(L=f.tenantId)&&void 0!==L?L:void 0,this.serverResponse=g.customData.serverResponse}static _fromErrorAndOperation(f,g,b,S){return new oa(f,g,b,S)}}function h2(_,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?oa._fromErrorAndOperation(_,L,f,b):L})}function K4(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function d2(){return(d2=(0,p.Z)(function*(_,f){const g=(0,V.m9)(_);yield Pi(!0,g,f);const{providerUserInfo:b}=yield Ln(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=K4(b||[]);return g.providerData=g.providerData.filter(L=>S.has(L.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function an(_,f){return f2.apply(this,arguments)}function f2(){return(f2=(0,p.Z)(function*(_,f,g=!1){const b=yield xi(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return ii._forOperation(_,"link",b)})).apply(this,arguments)}function Pi(_,f,g){return p2.apply(this,arguments)}function p2(){return(p2=(0,p.Z)(function*(_,f,g){yield go(f);const S=!1===_?"provider-already-linked":"no-such-provider";Se(K4(f.providerData).has(g)===_,f.auth,S)})).apply(this,arguments)}function cn(_,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,p.Z)(function*(_,f,g=!1){const{auth:b}=_,S="reauthenticate";try{const L=yield xi(_,h2(b,S,f,_),g);Se(L.idToken,b,"internal-error");const Y=Be(L.idToken);Se(Y,b,"internal-error");const{sub:Ce}=Y;return Se(_.uid===Ce,b,"user-mismatch"),ii._forOperation(_,S,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&me(b,"user-mismatch"),L}})).apply(this,arguments)}function aa(_,f){return us.apply(this,arguments)}function us(){return(us=(0,p.Z)(function*(_,f,g=!1){const b="signIn",S=yield h2(_,b,f),L=yield ii._fromIdTokenResponse(_,b,S);return g||(yield _._updateCurrentUser(L.user)),L})).apply(this,arguments)}function br(_,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(_,f){return aa(vn(_),f)})).apply(this,arguments)}function ca(_,f){return t1.apply(this,arguments)}function t1(){return(t1=(0,p.Z)(function*(_,f){const g=(0,V.m9)(_);return yield Pi(!1,g,f.providerId),an(g,f)})).apply(this,arguments)}function Hr(_,f){return m2.apply(this,arguments)}function m2(){return(m2=(0,p.Z)(function*(_,f){return cn((0,V.m9)(_),f)})).apply(this,arguments)}function _c(_,f){return hs.apply(this,arguments)}function hs(){return(hs=(0,p.Z)(function*(_,f){return Jr(_,"POST","/v1/accounts:signInWithCustomToken",dn(_,f))})).apply(this,arguments)}function Do(){return(Do=(0,p.Z)(function*(_,f){const g=vn(_),b=yield _c(g,{token:f,returnSecureToken:!0}),S=yield ii._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class ds{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?at._fromServerResponse(f,g):me(f,"internal-error")}}class at extends ds{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new at(g)}}function la(_,f,g){var b;Se((null===(b=g.url)||void 0===b?void 0:b.length)>0,_,"invalid-continue-uri"),Se(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Se(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Se(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function g2(){return(g2=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_),S={requestType:"PASSWORD_RESET",email:f};g&&la(b,S,g),yield Co(b,S)})).apply(this,arguments)}function v2(){return(v2=(0,p.Z)(function*(_,f,g){yield is((0,V.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function N1(){return(N1=(0,p.Z)(function*(_,f){yield _o((0,V.m9)(_),{oobCode:f})})).apply(this,arguments)}function xe(_,f){return It.apply(this,arguments)}function It(){return(It=(0,p.Z)(function*(_,f){const g=(0,V.m9)(_),b=yield is(g,{oobCode:f}),S=b.requestType;switch(Se(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(b.mfaInfo,g,"internal-error");default:Se(b.email,g,"internal-error")}let L=null;return b.mfaInfo&&(L=ds._fromServerResponse(vn(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:S}})).apply(this,arguments)}function rn(){return(rn=(0,p.Z)(function*(_,f){const{data:g}=yield xe((0,V.m9)(_),f);return g.email})).apply(this,arguments)}function n1(){return(n1=(0,p.Z)(function*(_,f,g){const b=vn(_),S=yield q4(b,{returnSecureToken:!0,email:f,password:g}),L=yield ii._fromIdTokenResponse(b,"signIn",S);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function So(){return(So=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_),S={requestType:"EMAIL_SIGNIN",email:f};Se(g.handleCodeInApp,b,"argument-error"),g&&la(b,S,g),yield ss(b,S)})).apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_),S=Ao.credentialWithLink(f,g||ut());return Se(S._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),br(b,S)})).apply(this,arguments)}function No(_,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:createAuthUri",dn(_,f))})).apply(this,arguments)}function y2(){return(y2=(0,p.Z)(function*(_,f){const b={identifier:f,continueUri:Wt()?ut():"http://localhost"},{signinMethods:S}=yield No((0,V.m9)(_),b);return S||[]})).apply(this,arguments)}function wr(){return(wr=(0,p.Z)(function*(_,f){const g=(0,V.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&la(g.auth,S,f);const{email:L}=yield D1(g.auth,S);L!==_.email&&(yield _.reload())})).apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&la(b.auth,L,g);const{email:Y}=yield Iu(b.auth,L);Y!==_.email&&(yield _.reload())})).apply(this,arguments)}function wc(_,f){return _2.apply(this,arguments)}function _2(){return(_2=(0,p.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fs(){return(Fs=(0,p.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,V.m9)(_),L={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Y=yield xi(b,wc(b.auth,L));b.displayName=Y.displayName||null,b.photoURL=Y.photoUrl||null;const Ce=b.providerData.find(({providerId:Fe})=>"password"===Fe);Ce&&(Ce.displayName=b.displayName,Ce.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Y)})).apply(this,arguments)}function b2(_,f,g){return w2.apply(this,arguments)}function w2(){return(w2=(0,p.Z)(function*(_,f,g){const{auth:b}=_,L={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(L.email=f),g&&(L.password=g);const Y=yield xi(_,yo(b,L));yield _._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Hs{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class X4 extends Hs{constructor(f,g,b,S){super(f,g,b),this.username=S}}class e6 extends Hs{constructor(f,g){super(f,"facebook.com",g)}}class t6 extends X4{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Bs extends Hs{constructor(f,g){super(f,"google.com",g)}}class G0 extends X4{constructor(f,g,b){super(f,"twitter.com",g,b)}}function Ic(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,g;if(!_)return null;const{providerId:b}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},L=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!b&&(null==_?void 0:_.idToken)){const Y=null===(g=null===(f=Be(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Y)return new Hs(L,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!b)return null;switch(b){case"facebook.com":return new e6(L,S);case"github.com":return new t6(L,S);case"google.com":return new Bs(L,S);case"twitter.com":return new G0(L,S,_.screenName||null);case"custom":case"anonymous":return new Hs(L,null);default:return new Hs(L,b,S)}}(g)}class yi{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new yi("enroll",f)}static _fromMfaPendingCredential(f){return new yi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return yi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return yi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ko{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=vn(f),S=(g.serverResponse.mfaInfo||[]).map(Y=>ds._fromServerResponse(b,Y));Se(g.serverResponse.mfaPendingCredential,b,"internal-error");const L=yi._fromMfaPendingCredential(g.serverResponse.mfaPendingCredential);return new ko(L,S,function(){var Y=(0,p.Z)(function*(Ce){const Fe=yield Ce._process(b,L);delete g.serverResponse.mfaInfo,delete g.serverResponse.mfaPendingCredential;const Ge=Object.assign(Object.assign({},g.serverResponse),{idToken:Fe.idToken,refreshToken:Fe.refreshToken});switch(g.operationType){case"signIn":const ct=yield ii._fromIdTokenResponse(b,g.operationType,Ge);return yield b._updateCurrentUser(ct.user),ct;case"reauthenticate":return Se(g.user,b,"internal-error"),ii._forOperation(g.user,g.operationType,Ge);default:me(b,"internal-error")}});return function(Ce){return Y.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,p.Z)(function*(){return g.signInResolver(f)})()}}function M2(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:start",dn(_,f))}class Dc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>ds._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new Dc(f)}getSession(){var f=this;return(0,p.Z)(function*(){return yi._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,p.Z)(function*(){const S=f,L=yield b.getSession(),Y=yield xi(b.user,S._process(b.user.auth,L,g));return yield b.user._updateTokensIfNecessary(Y),b.user.reload()})()}unenroll(f){var g=this;return(0,p.Z)(function*(){const b="string"==typeof f?f:f.uid,S=yield g.user.getIdToken(),L=yield xi(g.user,function(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",dn(_,f))}(g.user.auth,{idToken:S,mfaEnrollmentId:b}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Y})=>Y!==b),yield g.user._updateTokensIfNecessary(L);try{yield g.user.reload()}catch(Y){if("auth/user-token-expired"!==Y.code)throw Y}})()}}const r1=new WeakMap,A2="__sak";class n6{constructor(f,g){this.storage=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(A2,"1"),this.storage.removeItem(A2),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}}const xc=(()=>{class _ extends n6{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,V.z$)();return na(_)||ur(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Ue(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const S=this.storage.getItem(b),L=this.localCache[b];S!==L&&g(b,L,S)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((Ce,Fe,Ge)=>{this.notifyListeners(Ce,Ge)});const S=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(S);if(g.newValue!==Ce)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!b)return}const L=()=>{const Ce=this.storage.getItem(S);!b&&this.localCache[S]===Ce||this.notifyListeners(S,Ce)},Y=this.storage.getItem(S);(0,V.w1)()&&10===document.documentMode&&Y!==g.newValue&&g.newValue!==g.oldValue?setTimeout(L,10):L()}notifyListeners(g,b){this.localCache[g]=b;const S=this.listeners[g];if(S)for(const L of Array.from(S))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var S=()=>super._set,L=this;return(0,p.Z)(function*(){yield S().call(L,g,b),L.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,S=this;return(0,p.Z)(function*(){const L=yield b().call(S,g);return S.localCache[g]=JSON.stringify(L),L})()}_remove(g){var b=()=>super._remove,S=this;return(0,p.Z)(function*(){yield b().call(S,g),delete S.localCache[g]})()}}return _.type="LOCAL",_})(),s1=(()=>{class _ extends n6{constructor(){super(window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return _.type="SESSION",_})();let o1=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(L=>L.isListeningto(g));if(b)return b;const S=new _(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,p.Z)(function*(){const S=g,{eventId:L,eventType:Y,data:Ce}=S.data,Fe=b.handlersMap[Y];if(!(null==Fe?void 0:Fe.size))return;S.ports[0].postMessage({status:"ack",eventId:L,eventType:Y});const Ge=Array.from(Fe).map(function(){var st=(0,p.Z)(function*(Kn){return Kn(S.origin,Ce)});return function(Kn){return st.apply(this,arguments)}}()),ct=yield function(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(Ge);S.ports[0].postMessage({status:"done",eventId:L,eventType:Y,response:ct})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function L1(_="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return _+g}class i6{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var S=this;return(0,p.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Y,Ce;return new Promise((Fe,Ge)=>{const ct=L1("",20);L.port1.start();const st=setTimeout(()=>{Ge(new Error("unsupported_event"))},b);Ce={messageChannel:L,onMessage(Kn){const Bi=Kn;if(Bi.data.eventId===ct)switch(Bi.data.status){case"ack":clearTimeout(st),Y=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Fe(Bi.data.response);break;default:clearTimeout(st),clearTimeout(Y),Ge(new Error("invalid_response"))}}},S.handlers.add(Ce),L.port1.addEventListener("message",Ce.onMessage),S.target.postMessage({eventType:f,eventId:ct,data:g},[L.port2])}).finally(()=>{Ce&&S.removeMessageHandler(Ce)})})()}}function wn(){return window}function s6(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function T2(){return(T2=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Nc="firebaseLocalStorageDb",Lc="firebaseLocalStorage",kc="fbase_key";class z1{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function $s(_,f){return _.transaction([Lc],f?"readwrite":"readonly").objectStore(Lc)}function zn(){const _=indexedDB.open(Nc,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const b=_.result;try{b.createObjectStore(Lc,{keyPath:kc})}catch(S){g(S)}}),_.addEventListener("success",(0,p.Z)(function*(){const b=_.result;b.objectStoreNames.contains(Lc)?f(b):(b.close(),yield function(){const _=indexedDB.deleteDatabase(Nc);return new z1(_).toPromise()}(),f(yield zn()))}))})}function Gs(_,f,g){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,p.Z)(function*(_,f,g){const b=$s(_,!0).put({[kc]:f,value:g});return new z1(b).toPromise()})).apply(this,arguments)}function S2(){return(S2=(0,p.Z)(function*(_,f){const g=$s(_,!1).get(f),b=yield new z1(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ws(_,f){const g=$s(_,!0).delete(f);return new z1(g).toPromise()}const ms=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield zn()),g.db})()}_withRetries(g){var b=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const L=yield b._openDb();return yield g(L)}catch(L){if(S++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return s6()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=o1._getInstance(s6()?self:null),g.receiver._subscribe("keyChanged",function(){var b=(0,p.Z)(function*(S,L){return{keyProcessed:(yield g._poll()).includes(L.key)}});return function(S,L){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,p.Z)(function*(S,L){return["keyChanged"]});return function(S,L){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var b,S;if(g.activeServiceWorker=yield function(){return T2.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new i6(g.activeServiceWorker);const L=yield g.sender._send("ping",{},800);!L||(null===(b=L[0])||void 0===b?void 0:b.fulfilled)&&(null===(S=L[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,p.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield zn();return yield Gs(g,A2,"1"),yield Ws(g,A2),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,p.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(L=>Gs(L,g,b)),S.localCache[g]=b,S.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,p.Z)(function*(){const S=yield b._withRetries(L=>function(_,f){return S2.apply(this,arguments)}(L,g));return b.localCache[g]=S,S})()}_remove(g){var b=this;return(0,p.Z)(function*(){return b._withPendingWrite((0,p.Z)(function*(){return yield b._withRetries(S=>Ws(S,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const b=yield g._withRetries(Y=>{const Ce=$s(Y,!1).getAll();return new z1(Ce).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const S=[],L=new Set;for(const{fbase_key:Y,value:Ce}of b)L.add(Y),JSON.stringify(g.localCache[Y])!==JSON.stringify(Ce)&&(g.notifyListeners(Y,Ce),S.push(Y));for(const Y of Object.keys(g.localCache))g.localCache[Y]&&!L.has(Y)&&(g.notifyListeners(Y,null),S.push(Y));return S})()}notifyListeners(g,b){this.localCache[g]=b;const S=this.listeners[g];if(S)for(const L of Array.from(S))L(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Po(_,f){return Tt(_,"POST","/v2/accounts/mfaSignIn:start",dn(_,f))}function fa(){return(fa=(0,p.Z)(function*(_){return(yield Tt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function a1(_){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",_),b.onload=f,b.onerror=S=>{const L=Oe("internal-error");L.customData=S,g(L)},b.type="text/javascript",b.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(b)})}function Zs(_){return`__${_}${Math.floor(1e6*Math.random())}`}const P1=1e12;class V1{constructor(f){this.auth=f,this.counter=P1,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new x2(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||P1;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||P1))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,p.Z)(function*(){var b;return null===(b=g._widgets.get(f||P1))||void 0===b||b.execute(),""})()}}class x2{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;Se(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const c1=Zs("rcb"),zc=new mt(3e4,6e4);class Y0{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(f,g=""){return Se((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(wn().grecaptcha):new Promise((b,S)=>{const L=wn().setTimeout(()=>{S(Oe(f,"network-request-failed"))},zc.get());wn()[c1]=()=>{wn().clearTimeout(L),delete wn()[c1];const Ce=wn().grecaptcha;if(!Ce)return void S(Oe(f,"internal-error"));const Fe=Ce.render;Ce.render=(Ge,ct)=>{const st=Fe(Ge,ct);return this.counter++,st},this.hostLanguage=g,b(Ce)},a1(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:c1,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(L),S(Oe(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!wn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Q0{load(f){return(0,p.Z)(function*(){return new V1(f)})()}clearedOneInstance(){}}const jt="recaptcha",o6={theme:"light",type:"image"};class ma{constructor(f,g=Object.assign({},o6),b){this.parameters=g,this.type=jt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(b),this.isInvisible="invisible"===this.parameters.size,Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;Se(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Q0:new Y0,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(L=>{const Y=Ce=>{!Ce||(f.tokenChangeListeners.delete(Y),L(Ce))};f.tokenChangeListeners.add(Y),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=wn()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){Se(Wt()&&!s6(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(_){return fa.apply(this,arguments)}(f.auth);Se(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rc{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Io._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Pc(){return(Pc=(0,p.Z)(function*(_,f,g){const b=vn(_),S=yield ya(b,f,(0,V.m9)(g));return new Rc(S,L=>br(b,L))})).apply(this,arguments)}function ga(){return(ga=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_);yield Pi(!1,b,"phone");const S=yield ya(b.auth,f,(0,V.m9)(g));return new Rc(S,L=>ca(b,L))})).apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_),S=yield ya(b.auth,f,(0,V.m9)(g));return new Rc(S,L=>Hr(b,L))})).apply(this,arguments)}function ya(_,f,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(_,f,g){var b;const S=yield g.verify();try{let L;if(Se("string"==typeof S,_,"argument-error"),Se(g.type===jt,_,"argument-error"),L="string"==typeof f?{phoneNumber:f}:f,"session"in L){const Y=L.session;if("phoneNumber"in L)return Se("enroll"===Y.type,_,"internal-error"),(yield M2(_,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{Se("signin"===Y.type,_,"internal-error");const Ce=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return Se(Ce,_,"missing-multi-factor-info"),(yield Po(_,{mfaPendingCredential:Y.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield Mu(_,{phoneNumber:L.phoneNumber,recaptchaToken:S});return Y}}finally{g._reset()}})).apply(this,arguments)}function _n(){return(_n=(0,p.Z)(function*(_,f){yield an((0,V.m9)(_),f)})).apply(this,arguments)}let Fi=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=vn(g)}verifyPhoneNumber(g,b){return ya(this.auth,g,(0,V.m9)(b))}static credential(g,b){return Io._fromVerification(g,b)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:S}=g;return b&&S?Io._fromTokenResponse(b,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function si(_,f){return f?pe(f):(Se(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class _a extends ri{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Fn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Fn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Fn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Ca(_){return aa(_.auth,new _a(_),_.bypassAuthState)}function sn(_){const{auth:f,user:g}=_;return Se(g,f,"internal-error"),cn(g,new _a(_),_.bypassAuthState)}function Un(_){return O1.apply(this,arguments)}function O1(){return(O1=(0,p.Z)(function*(_){const{auth:f,user:g}=_;return Se(g,f,"internal-error"),an(g,new _a(_),_.bypassAuthState)})).apply(this,arguments)}class Vo{constructor(f,g,b,S,L=!1){this.auth=f,this.resolver=b,this.user=S,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,p.Z)(function*(b,S){f.pendingPromise={resolve:b,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(L){f.reject(L)}});return function(b,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,p.Z)(function*(){const{urlResponse:b,sessionId:S,postBody:L,tenantId:Y,error:Ce,type:Fe}=f;if(Ce)return void g.reject(Ce);const Ge={auth:g.auth,requestUri:b,sessionId:S,tenantId:Y||void 0,postBody:L||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Fe)(Ge))}catch(ct){g.reject(ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ca;case"linkViaPopup":case"linkViaRedirect":return Un;case"reauthViaPopup":case"reauthViaRedirect":return sn;default:me(this.auth,"internal-error")}}resolve(f){le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Oo=new mt(2e3,1e4);function ba(){return(ba=(0,p.Z)(function*(_,f,g){const b=vn(_);Et(_,f,e1);const S=si(b,g);return new Mr(b,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function l1(){return(l1=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_);Et(b.auth,f,e1);const S=si(b.auth,g);return new Mr(b.auth,"reauthViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_);Et(b.auth,f,e1);const S=si(b.auth,g);return new Mr(b.auth,"linkViaPopup",f,S,b).executeNotNull()})).apply(this,arguments)}let Mr=(()=>{class _ extends Vo{constructor(g,b,S,L,Y){super(g,b,L,Y),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const b=yield g.execute();return Se(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,p.Z)(function*(){le(1===g.filter.length,"Popup operations only handle one event");const b=L1();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Oe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Oe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,S;this.pollId=(null===(S=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Oe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Oo.get())};g()}}return _.currentPopupAction=null,_})();const Ks=new Map;class N2 extends Vo{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,p.Z)(function*(){let b=Ks.get(g.auth._key());if(!b){try{const L=(yield function(_,f){return nl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(L)}catch(S){b=()=>Promise.reject(S)}Ks.set(g.auth._key(),b)}return b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const S=yield b.auth._redirectUserForId(f.eventId);if(S)return b.user=S,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function nl(){return(nl=(0,p.Z)(function*(_,f){const g=I(f),b="true"===(yield Ho(_)._get(g));return yield Ho(_)._remove(g),b})).apply(this,arguments)}function Oc(_,f){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(_,f){return Ho(_)._set(I(f),"true")})).apply(this,arguments)}function Ho(_){return pe(_._redirectPersistence)}function I(_){return Wn("pendingRedirect",_.config.apiKey,_.name)}function H(){return(H=(0,p.Z)(function*(_,f,g){const b=vn(_);Et(_,f,e1);const S=si(b,g);return yield Oc(S,b),S._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function Le(){return(Le=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_);Et(b.auth,f,e1);const S=si(b.auth,g);yield Oc(S,b.auth);const L=yield u1(b);return S._openRedirect(b.auth,f,"reauthViaRedirect",L)})).apply(this,arguments)}function Ot(){return(Ot=(0,p.Z)(function*(_,f,g){const b=(0,V.m9)(_);Et(b.auth,f,e1);const S=si(b.auth,g);yield Pi(!1,b,f.providerId),yield Oc(S,b.auth);const L=yield u1(b);return S._openRedirect(b.auth,f,"linkViaRedirect",L)})).apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(_,f){return yield vn(_)._initializationPromise,sr(_,f,!1)})).apply(this,arguments)}function sr(_,f){return fn.apply(this,arguments)}function fn(){return(fn=(0,p.Z)(function*(_,f,g=!1){const b=vn(_),S=si(b,f),Y=yield new N2(b,S,g).execute();return Y&&!g&&(delete Y.user._redirectEventId,yield b._persistUserIfCurrent(Y.user),yield b._setRedirectUser(null,f)),Y})).apply(this,arguments)}function u1(_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(_){const f=L1(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class _i{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ai(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!ai(f)){const S=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(Oe(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(L2(f))}saveEventToCache(f){this.cachedEventUids.add(L2(f)),this.lastProcessedEventTime=Date.now()}}function L2(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function ai({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function k2(_){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(_,f={}){return Tt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ou=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fu=/^https?/;function Hi(){return(Hi=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield k2(_);for(const g of f)try{if(Hc(g))return}catch(b){}me(_,"unauthorized-domain")})).apply(this,arguments)}function Hc(_){const f=ut(),{protocol:g,hostname:b}=new URL(f);if(_.startsWith("chrome-extension://")){const Y=new URL(_);return""===Y.hostname&&""===b?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Y.hostname===b}if(!Fu.test(g))return!1;if(Ou.test(_))return b===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(b)}const Ys=new mt(3e4,6e4);function c6(){const _=wn().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let h1=null;function Ia(_){return h1=h1||function(_){return new Promise((f,g)=>{var b,S,L;function Y(){c6(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{c6(),g(Oe(_,"network-request-failed"))},timeout:Ys.get()})}if(null===(S=null===(b=wn().gapi)||void 0===b?void 0:b.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(L=wn().gapi)||void 0===L?void 0:L.load)){const Ce=Zs("iframefcb");return wn()[Ce]=()=>{gapi.load?Y():g(Oe(_,"network-request-failed"))},a1(`https://apis.google.com/js/api.js?onload=${Ce}`)}Y()}}).catch(f=>{throw h1=null,f})}(_),h1}const Hu=new mt(5e3,15e3),$o={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ma=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pp(_){const f=_.config;Se(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?Xt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:_.name,v:ye.SDK_VERSION},S=Ma.get(_.config.apiHost);S&&(b.eid=S);const L=_._getFrameworks();return L.length&&(b.fw=L.join(",")),`${g}?${(0,V.xO)(b).slice(1)}`}function rl(){return(rl=(0,p.Z)(function*(_){const f=yield Ia(_),g=wn().gapi;return Se(g,_,"internal-error"),f.open({where:document.body,url:pp(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$o,dontclear:!0},b=>new Promise(function(){var S=(0,p.Z)(function*(L,Y){yield b.restyle({setHideOnLeave:!1});const Ce=Oe(_,"network-request-failed"),Fe=wn().setTimeout(()=>{Y(Ce)},Hu.get());function Ge(){wn().clearTimeout(Fe),L(b)}b.ping(Ge).then(Ge,()=>{Y(Ce)})});return function(L,Y){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const mp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Aa{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ju(_,f,g,b,S,L){Se(_.config.authDomain,_,"auth-domain-config-required"),Se(_.config.apiKey,_,"invalid-api-key");const Y={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:b,v:ye.SDK_VERSION,eventId:S};if(f instanceof e1){f.setDefaultLanguage(_.languageCode),Y.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(Y.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Fe,Ge]of Object.entries(L||{}))Y[Fe]=Ge}if(f instanceof l2){const Fe=f.getScopes().filter(Ge=>""!==Ge);Fe.length>0&&(Y.scopes=Fe.join(","))}_.tenantId&&(Y.tid=_.tenantId);const Ce=Y;for(const Fe of Object.keys(Ce))void 0===Ce[Fe]&&delete Ce[Fe];return`${function({config:_}){return _.emulator?Xt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,V.xO)(Ce).slice(1)}`}const Ta="webStorageSupport";class _s extends class{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return ie("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new _s(f)}_finalizeEnroll(f,g,b){return function(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:finalize",dn(_,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(_,f){return Tt(_,"POST","/v2/accounts/mfaSignIn:finalize",dn(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sl=(()=>{class _{constructor(){}static assertion(g){return _s._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,Wu="@firebase/auth";class pd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var S;f((null===(S=b)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Go(){return window}function cl(){return(cl=(0,p.Z)(function*(_,f,g){var b;const{BuildInfo:S}=Go();le(f.sessionId,"AuthEvent did not contain a session ID");const L=yield vd(f.sessionId),Y={};return ur()?Y.ibi=S.packageName:ns()?Y.apn=S.packageName:me(_,"operation-not-supported-in-this-environment"),S.displayName&&(Y.appDisplayName=S.displayName),Y.sessionId=L,ju(_,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,Y)})).apply(this,arguments)}function ul(){return(ul=(0,p.Z)(function*(_){const{BuildInfo:f}=Go(),g={};ur()?g.iosBundleId=f.packageName:ns()?g.androidPackageName=f.packageName:me(_,"operation-not-supported-in-this-environment"),yield k2(_,g)})).apply(this,arguments)}function jc(){return(jc=(0,p.Z)(function*(_,f,g){const{cordova:b}=Go();let S=()=>{};try{yield new Promise((L,Y)=>{let Ce=null;function Fe(){var st;L();const Kn=null===(st=b.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Kn&&Kn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ge(){Ce||(Ce=window.setTimeout(()=>{Y(Oe(_,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Ge()}f.addPassiveListener(Fe),document.addEventListener("resume",Ge,!1),ns()&&document.addEventListener("visibilitychange",ct,!1),S=()=>{f.removePassiveListener(Fe),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",ct,!1),Ce&&window.clearTimeout(Ce)}})}finally{S()}})).apply(this,arguments)}function vd(_){return dl.apply(this,arguments)}function dl(){return(dl=(0,p.Z)(function*(_){const f=yd(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yd(_){if(le(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let b=0;b<_.length;b++)g[b]=_.charCodeAt(b);return g}_="Browser",(0,ye._registerComponent)(new De.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),{apiKey:S,authDomain:L}=b.options;return(Y=>{Se(S&&!S.includes(":"),"invalid-api-key",{appName:Y.name}),Se(!(null==L?void 0:L.includes(":")),"argument-error",{appName:Y.name});const Ce={apiKey:S,authDomain:L,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zt(_)},Fe=new Or(Y,Ce);return function(_,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(pe);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(Fe,g),Fe})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new De.wA("auth-internal",f=>{const g=vn(f.getProvider("auth").getImmediate());return new pd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)(Wu,"0.18.3",void 0),(0,ye.registerVersion)(Wu,"0.18.3","esm2017");class d6 extends _i{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function f6(_){return p6.apply(this,arguments)}function p6(){return(p6=(0,p.Z)(function*(_){const f=yield pl()._get(Zu(_));return f&&(yield pl()._remove(Zu(_))),f})).apply(this,arguments)}function yp(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);_.push(f.charAt(b))}return _.join("")}function pl(){return pe(xc)}function Zu(_){return Wn("authEvent",_.config.apiKey,_.name)}function P2(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,V.zd)(g.join("?"))}function gl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Oe("no-auth-event")}}function xa(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function yl(_=(0,V.z$)()){return!("file:"!==xa()&&"ionic:"!==xa()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function g6(){try{const _=self.localStorage,f=L1();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,V.z$)()){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,V.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,V.hl)()}catch(_){return _l()&&(0,V.hl)()}return!1}function _l(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $c(){return("http:"===xa()||"https:"===xa()||(0,V.ru)()||yl())&&!((0,V.b$)()||(0,V.UG)())&&g6()&&!_l()}function Br(){return yl()&&"undefined"!=typeof document}function Cl(){return(Cl=(0,p.Z)(function*(){return!!Br()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const Ur={LOCAL:"local",NONE:"none",SESSION:"session"},v6=Se,Md="persistence";function hr(_){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,p.Z)(function*(_){yield _._initializationPromise;const f=wl(),g=Wn(Md,_.config.apiKey,_.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(g,_._getPersistence())})).apply(this,arguments)}function wl(){return"undefined"!=typeof window?window:null}const yn=Se;class d1{constructor(){this.browserResolver=pe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=s1,this._completeRedirectFn=sr}_openPopup(f,g,b,S){var L=this;return(0,p.Z)(function*(){var Y;le(null===(Y=L.eventManagers[f._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const Ce=ju(f,g,b,ut(),S);return function(_,f,g,b=500,S=600){const L=Math.max((window.screen.availHeight-S)/2,0).toString(),Y=Math.max((window.screen.availWidth-b)/2,0).toString();let Ce="";const Fe=Object.assign(Object.assign({},mp),{width:b.toString(),height:S.toString(),top:L,left:Y}),Ge=(0,V.z$)().toLowerCase();g&&(Ce=s2(Ge)?"_blank":g),vo(Ge)&&(f=f||"http://localhost",Fe.scrollbars="yes");const ct=Object.entries(Fe).reduce((Kn,[Bi,Il])=>`${Kn}${Bi}=${Il},`,"");if(function(_=(0,V.z$)()){var f;return ur(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ge)&&"_self"!==Ce)return function(_,f){const g=document.createElement("a");g.href=_,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",Ce),new Aa(null);const st=window.open(f||"",Ce,ct);Se(st,_,"popup-blocked");try{st.focus()}catch(Kn){}return new Aa(st)}(f,Ce,L1())})()}_openRedirect(f,g,b,S){var L=this;return(0,p.Z)(function*(){return yield L._originValidation(f),_=ju(f,g,b,ut(),S),wn().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:L}=this.eventManagers[g];return S?Promise.resolve(S):(le(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b}initAndGetManager(f){var g=this;return(0,p.Z)(function*(){const b=yield function(_){return rl.apply(this,arguments)}(f),S=new _i(f);return b.register("authEvent",L=>(Se(null==L?void 0:L.authEvent,f,"invalid-auth-event"),{status:S.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=b,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ta,{type:Ta},S=>{var L;const Y=null===(L=null==S?void 0:S[0])||void 0===L?void 0:L[Ta];void 0!==Y&&g(!!Y),me(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return Hi.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ue()||na()||ur()}}),this.cordovaResolver=pe(class{constructor(){this._redirectPersistence=s1,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sr}_initialize(f){var g=this;return(0,p.Z)(function*(){const b=f._key();let S=g.eventManagers.get(b);return S||(S=new d6(f),g.eventManagers.set(b,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){me(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,S){var L=this;return(0,p.Z)(function*(){!function(_){var f,g,b,S,L,Y,Ce,Fe,Ge,ct;const st=Go();Se("function"==typeof(null===(f=null==st?void 0:st.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(void 0!==(null===(g=null==st?void 0:st.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(L=null===(S=null===(b=null==st?void 0:st.cordova)||void 0===b?void 0:b.plugins)||void 0===S?void 0:S.browsertab)||void 0===L?void 0:L.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(Fe=null===(Ce=null===(Y=null==st?void 0:st.cordova)||void 0===Y?void 0:Y.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(ct=null===(Ge=null==st?void 0:st.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===ct?void 0:ct.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Y=yield L._initialize(f);yield Y.initialized(),Y.resetRedirect(),Ks.clear(),yield L._originValidation(f);const Ce=function(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:yp(),postBody:null,tenantId:_.tenantId,error:Oe(_,"no-auth-event")}}(f,b,S);yield function(_,f){return pl()._set(Zu(_),f)}(f,Ce);const Fe=yield function(_,f,g){return cl.apply(this,arguments)}(f,Ce,g),Ge=yield function(_){const{cordova:f}=Go();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let S=null;b?f.plugins.browsertab.openUrl(_):S=f.InAppBrowser.open(_,function(_=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(S)})})}(Fe);return function(_,f,g){return jc.apply(this,arguments)}(f,Y,Ge)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return ul.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:S,BuildInfo:L}=Go(),Y=setTimeout((0,p.Z)(function*(){yield f6(f),g.onEvent(gl())}),500),Ce=function(){var ct=(0,p.Z)(function*(st){clearTimeout(Y);const Kn=yield f6(f);let Bi=null;Kn&&(null==st?void 0:st.url)&&(Bi=function(_,f){var g,b;const S=function(_){const f=P2(_),g=f.link?decodeURIComponent(f.link):void 0,b=P2(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return P2(S).link||S||b||g||_}(f);if(S.includes("/__/auth/callback")){const L=P2(S),Y=L.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(L.firebaseError)):null,Ce=null===(b=null===(g=null==Y?void 0:Y.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],Fe=Ce?Oe(Ce):null;return Fe?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(Kn,st.url)),g.onEvent(Bi||gl())});return function(Kn){return ct.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Ce);const Fe=S,Ge=`${L.packageName.toLowerCase()}://`;Go().handleOpenURL=function(){var ct=(0,p.Z)(function*(st){if(st.toLowerCase().startsWith(Ge)&&Ce({url:st}),"function"==typeof Fe)try{Fe(st)}catch(Kn){console.error(Kn)}});return function(st){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s1,this._completeRedirectFn=sr}_initialize(f){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,S){var L=this;return(0,p.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(f,g,b,S)})()}_openRedirect(f,g,b,S){var L=this;return(0,p.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(f,g,b,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Br()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Cl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function y6(_){return _.unwrap()}function Wc(_){return Xu(_)}function Xu(_){const{_tokenResponse:f}=_ instanceof V.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Fi.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=S1;break;case"facebook.com":b=gc;break;case"github.com":b=W4;break;case"twitter.com":b=zi;break;default:const{oauthIdToken:S,oauthAccessToken:L,oauthTokenSecret:Y,pendingToken:Ce,nonce:Fe}=f;return L||Y||S||Ce?Ce?g.startsWith("saml.")?as._create(g,Ce):Xi._fromParams({providerId:g,signInMethod:g,pendingToken:Ce,idToken:S,accessToken:L}):new os(g).credential({idToken:S,accessToken:L,rawNonce:Fe}):null}return _ instanceof V.ZR?b.credentialFromError(_):b.credentialFromResult(_)}function jr(_,f){return f.catch(g=>{throw g instanceof V.ZR&&function(_,f){var g;const b=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Ad(_,function(_,f){var g;const b=(0,V.m9)(_),S=f;return Se(f.operationType,b,"argument-error"),Se(null===(g=S.serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),ko._fromError(b,S)}(_,f));else if(b){const S=Xu(f),L=f;S&&(L.credential=S,L.tenantId=b.tenantId||void 0,L.email=b.email||void 0,L.phoneNumber=b.phoneNumber||void 0)}}(_,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Wc(g),additionalUserInfo:Ic(g),user:eo.getOrCreate(S)}})}function _6(_,f){return f1.apply(this,arguments)}function f1(){return(f1=(0,p.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>jr(_,g.confirm(b))}})).apply(this,arguments)}class Ad{constructor(f,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return jr(y6(this.auth),this.resolver.resolveSignIn(f))}}class eo{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,V.m9)(_);return r1.has(f)||r1.set(f,Dc._fromUser(f)),r1.get(f)}(f)}static getOrCreate(f){return eo.USER_MAP.has(f)||eo.USER_MAP.set(f,new eo(f)),eo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,p.Z)(function*(){return jr(g.auth,ca(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,p.Z)(function*(){return _6(b.auth,function(_,f,g){return ga.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,p.Z)(function*(){return jr(g.auth,function(_,f,g){return Fo.apply(this,arguments)}(g._delegate,f,d1))})()}linkWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield hr(vn(g.auth)),function(_,f,g){return function(_,f,g){return Ot.apply(this,arguments)}(_,f,g)}(g._delegate,f,d1)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,p.Z)(function*(){return jr(g.auth,Hr(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return _6(this.auth,function(_,f,g){return va.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return jr(this.auth,function(_,f,g){return l1.apply(this,arguments)}(this._delegate,f,d1))}reauthenticateWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield hr(vn(g.auth)),function(_,f,g){return function(_,f,g){return Le.apply(this,arguments)}(_,f,g)}(g._delegate,f,d1)})()}sendEmailVerification(f){return function(_,f){return wr.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,p.Z)(function*(){return yield function(_,f){return d2.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(_,f){return b2((0,V.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return b2((0,V.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return _n.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return Fs.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(_,f,g){return Lo.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eo.USER_MAP=new WeakMap;const qc=Se;let El=(()=>{class _{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;qc(S,"invalid-api-key",{appName:g.name});let L=[xt];if("undefined"!=typeof window){L=function(_,f){const g=wl();if(!(null==g?void 0:g.sessionStorage))return[];const b=Wn(Md,_,f);switch(g.sessionStorage.getItem(b)){case Ur.NONE:return[xt];case Ur.LOCAL:return[ms,s1];case Ur.SESSION:return[s1];default:return[]}}(S,g.name);for(const Ce of[ms,xc,s1])L.includes(Ce)||L.push(Ce)}qc(S,"invalid-api-key",{appName:g.name});const Y="undefined"!=typeof window?d1:void 0;this._delegate=b.initialize({options:{persistence:L,popupRedirectResolver:Y}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function(_,f,g){const b=vn(_);Se(b._canInitEmulator,b,"emulator-config-failed"),Se(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),L=bn(f),{host:Y,port:Ce}=function(_){const f=bn(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(b);if(S){const L=S[1];return{host:L,port:rs(b.substr(L.length+1))}}{const[L,Y]=b.split(":");return{host:L,port:rs(Y)}}}(f);b.config.emulator={url:`${L}//${Y}${null===Ce?"":`:${Ce}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Y,port:Ce,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,b)}applyActionCode(g){return function(_,f){return N1.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return xe(this._delegate,g)}confirmPasswordReset(g,b){return function(_,f,g){return v2.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var S=this;return(0,p.Z)(function*(){return jr(S._delegate,function(_,f,g){return n1.apply(this,arguments)}(S._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,f){return y2.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,f){const g=Mo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){qc($c(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function(_,f){return oi.apply(this,arguments)}(g._delegate,d1);return b?jr(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,f){vn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,S){const{next:L,error:Y,complete:Ce}=Zc(g,b,S);return this._delegate.onAuthStateChanged(L,Y,Ce)}onIdTokenChanged(g,b,S){const{next:L,error:Y,complete:Ce}=Zc(g,b,S);return this._delegate.onIdTokenChanged(L,Y,Ce)}sendSignInLinkToEmail(g,b){return function(_,f,g){return So.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function(_,f,g){return g2.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,p.Z)(function*(){let S;switch(function(_,f){v6(Object.values(Ur).includes(f),_,"invalid-persistence-type"),(0,V.b$)()?v6(f!==Ur.SESSION,_,"unsupported-persistence-type"):(0,V.UG)()?v6(f===Ur.NONE,_,"unsupported-persistence-type"):_l()?v6(f===Ur.NONE||f===Ur.LOCAL&&(0,V.hl)(),_,"unsupported-persistence-type"):v6(f===Ur.NONE||g6(),_,"unsupported-persistence-type")}(b._delegate,g),g){case Ur.SESSION:S=s1;break;case Ur.LOCAL:S=(yield pe(ms)._isAvailable())?ms:xc;break;case Ur.NONE:S=xt;break;default:return me("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return jr(this._delegate,function(_){return u2.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return jr(this._delegate,br(this._delegate,g))}signInWithCustomToken(g){return jr(this._delegate,function(_,f){return Do.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return jr(this._delegate,function(_,f,g){return br((0,V.m9)(_),Ao.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return jr(this._delegate,function(_,f,g){return xo.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return _6(this._delegate,function(_,f,g){return Pc.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,p.Z)(function*(){return qc($c(),b._delegate,"operation-not-supported-in-this-environment"),jr(b._delegate,function(_,f,g){return ba.apply(this,arguments)}(b._delegate,g,d1))})()}signInWithRedirect(g){var b=this;return(0,p.Z)(function*(){return qc($c(),b._delegate,"operation-not-supported-in-this-environment"),yield hr(b._delegate),function(_,f,g){return function(_,f,g){return H.apply(this,arguments)}(_,f,g)}(b._delegate,g,d1)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,f){return rn.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Ur,_})();function Zc(_,f,g){let b=_;"function"!=typeof _&&({next:b,error:f,complete:g}=_);const S=b;return{next:Y=>S(Y&&eo.getOrCreate(Y)),error:f,complete:g}}class Kc{constructor(){this.providerId="phone",this._delegate=new Fi(y6(se.Z.auth()))}static credential(f,g){return Fi.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Kc.PHONE_SIGN_IN_METHOD=Fi.PHONE_SIGN_IN_METHOD,Kc.PROVIDER_ID=Fi.PROVIDER_ID;const Wo=Se;class __{constructor(f,g,b=se.Z.app()){var S;Wo(null===(S=b.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new ma(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new De.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new El(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ao,FacebookAuthProvider:gc,GithubAuthProvider:W4,GoogleAuthProvider:S1,OAuthProvider:os,PhoneAuthProvider:Kc,PhoneMultiFactorGenerator:sl,RecaptchaVerifier:__,TwitterAuthProvider:zi,Auth:El,AuthCredential:ri,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.1.6")}(se.Z)},6676:function(Xe,Ne){!function(F){"use strict";function p(re){return Array.prototype.slice.call(re)}function se(re){return new Promise(function(j,X){re.onsuccess=function(){j(re.result)},re.onerror=function(){X(re.error)}})}function V(re,j,X){var ce,me=new Promise(function(Oe,ft){se(ce=re[j].apply(re,X)).then(Oe,ft)});return me.request=ce,me}function ye(re,j,X){var ce=V(re,j,X);return ce.then(function(me){if(me)return new O(me,ce.request)})}function ae(re,j,X){X.forEach(function(ce){Object.defineProperty(re.prototype,ce,{get:function(){return this[j][ce]},set:function(me){this[j][ce]=me}})})}function te(re,j,X,ce){ce.forEach(function(me){me in X.prototype&&(re.prototype[me]=function(){return V(this[j],me,arguments)})})}function De(re,j,X,ce){ce.forEach(function(me){me in X.prototype&&(re.prototype[me]=function(){return this[j][me].apply(this[j],arguments)})})}function ue(re,j,X,ce){ce.forEach(function(me){me in X.prototype&&(re.prototype[me]=function(){return ye(this[j],me,arguments)})})}function ee(re){this._index=re}function O(re,j){this._cursor=re,this._request=j}function W(re){this._store=re}function G(re){this._tx=re,this.complete=new Promise(function(j,X){re.oncomplete=function(){j()},re.onerror=function(){X(re.error)},re.onabort=function(){X(re.error)}})}function de(re,j,X){this._db=re,this.oldVersion=j,this.transaction=new G(X)}function fe(re){this._db=re}ae(ee,"_index",["name","keyPath","multiEntry","unique"]),te(ee,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(ee,"_index",IDBIndex,["openCursor","openKeyCursor"]),ae(O,"_cursor",["direction","key","primaryKey","value"]),te(O,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(re){re in IDBCursor.prototype&&(O.prototype[re]=function(){var j=this,X=arguments;return Promise.resolve().then(function(){return j._cursor[re].apply(j._cursor,X),se(j._request).then(function(ce){if(ce)return new O(ce,j._request)})})})}),W.prototype.createIndex=function(){return new ee(this._store.createIndex.apply(this._store,arguments))},W.prototype.index=function(){return new ee(this._store.index.apply(this._store,arguments))},ae(W,"_store",["name","keyPath","indexNames","autoIncrement"]),te(W,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(W,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),De(W,"_store",IDBObjectStore,["deleteIndex"]),G.prototype.objectStore=function(){return new W(this._tx.objectStore.apply(this._tx,arguments))},ae(G,"_tx",["objectStoreNames","mode"]),De(G,"_tx",IDBTransaction,["abort"]),de.prototype.createObjectStore=function(){return new W(this._db.createObjectStore.apply(this._db,arguments))},ae(de,"_db",["name","version","objectStoreNames"]),De(de,"_db",IDBDatabase,["deleteObjectStore","close"]),fe.prototype.transaction=function(){return new G(this._db.transaction.apply(this._db,arguments))},ae(fe,"_db",["name","version","objectStoreNames"]),De(fe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(re){[W,ee].forEach(function(j){re in j.prototype&&(j.prototype[re.replace("open","iterate")]=function(){var X=p(arguments),ce=X[X.length-1],me=this._store||this._index,Oe=me[re].apply(me,X.slice(0,-1));Oe.onsuccess=function(){ce(Oe.result)}})})}),[ee,W].forEach(function(re){re.prototype.getAll||(re.prototype.getAll=function(j,X){var ce=this,me=[];return new Promise(function(Oe){ce.iterateCursor(j,function(ft){ft?(me.push(ft.value),void 0===X||me.length!=X?ft.continue():Oe(me)):Oe(me)})})})}),F.openDb=function(re,j,X){var ce=V(indexedDB,"open",[re,j]),me=ce.request;return me&&(me.onupgradeneeded=function(Oe){X&&X(new de(me.result,Oe.oldVersion,me.transaction))}),ce.then(function(Oe){return new fe(Oe)})},F.deleteDb=function(re){return V(indexedDB,"deleteDatabase",[re])},Object.defineProperty(F,"__esModule",{value:!0})}(Ne)},7574:(Xe,Ne,F)=>{"use strict";F.d(Ne,{y:()=>W});var p=F(7393),V=F(9181),ye=F(6490),te=F(6554),De=F(4487);var O=F(2494);let W=(()=>{class de{constructor(be){this._isScalar=!1,be&&(this._subscribe=be)}lift(be){const we=new de;return we.source=this,we.operator=be,we}subscribe(be,we,re){const{operator:j}=this,X=function(de,fe,be){if(de){if(de instanceof p.L)return de;if(de[V.b])return de[V.b]()}return de||fe||be?new p.L(de,fe,be):new p.L(ye.c)}(be,we,re);if(X.add(j?j.call(X,this.source):this.source||O.v.useDeprecatedSynchronousErrorHandling&&!X.syncErrorThrowable?this._subscribe(X):this._trySubscribe(X)),O.v.useDeprecatedSynchronousErrorHandling&&X.syncErrorThrowable&&(X.syncErrorThrowable=!1,X.syncErrorThrown))throw X.syncErrorValue;return X}_trySubscribe(be){try{return this._subscribe(be)}catch(we){O.v.useDeprecatedSynchronousErrorHandling&&(be.syncErrorThrown=!0,be.syncErrorValue=we),function(de){for(;de;){const{closed:fe,destination:be,isStopped:we}=de;if(fe||we)return!1;de=be&&be instanceof p.L?be:null}return!0}(be)?be.error(we):console.warn(we)}}forEach(be,we){return new(we=G(we))((re,j)=>{let X;X=this.subscribe(ce=>{try{be(ce)}catch(me){j(me),X&&X.unsubscribe()}},j,re)})}_subscribe(be){const{source:we}=this;return we&&we.subscribe(be)}[te.L](){return this}pipe(...be){return 0===be.length?this:function(de){return 0===de.length?De.y:1===de.length?de[0]:function(be){return de.reduce((we,re)=>re(we),be)}}(be)(this)}toPromise(be){return new(be=G(be))((we,re)=>{let j;this.subscribe(X=>j=X,X=>re(X),()=>we(j))})}}return de.create=fe=>new de(fe),de})();function G(de){if(de||(de=O.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},6490:(Xe,Ne,F)=>{"use strict";F.d(Ne,{c:()=>V});var p=F(2494),se=F(4449);const V={closed:!0,next(ye){},error(ye){if(p.v.useDeprecatedSynchronousErrorHandling)throw ye;(0,se.z)(ye)},complete(){}}},9765:(Xe,Ne,F)=>{"use strict";F.d(Ne,{Yc:()=>De,xQ:()=>ue});var p=F(7574),se=F(7393),V=F(5319),ye=F(7971),ae=F(8858),te=F(9181);class De extends se.L{constructor(W){super(W),this.destination=W}}let ue=(()=>{class O extends p.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[te.b](){return new De(this)}lift(G){const de=new ee(this,this);return de.operator=G,de}next(G){if(this.closed)throw new ye.N;if(!this.isStopped){const{observers:de}=this,fe=de.length,be=de.slice();for(let we=0;we<fe;we++)be[we].next(G)}}error(G){if(this.closed)throw new ye.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:de}=this,fe=de.length,be=de.slice();for(let we=0;we<fe;we++)be[we].error(G);this.observers.length=0}complete(){if(this.closed)throw new ye.N;this.isStopped=!0;const{observers:G}=this,de=G.length,fe=G.slice();for(let be=0;be<de;be++)fe[be].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ye.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ye.N;return this.hasError?(G.error(this.thrownError),V.w.EMPTY):this.isStopped?(G.complete(),V.w.EMPTY):(this.observers.push(G),new ae.W(this,G))}asObservable(){const G=new p.y;return G.source=this,G}}return O.create=(W,G)=>new ee(W,G),O})();class ee extends ue{constructor(W,G){super(),this.destination=W,this.source=G}next(W){const{destination:G}=this;G&&G.next&&G.next(W)}error(W){const{destination:G}=this;G&&G.error&&this.destination.error(W)}complete(){const{destination:W}=this;W&&W.complete&&this.destination.complete()}_subscribe(W){const{source:G}=this;return G?this.source.subscribe(W):V.w.EMPTY}}},8858:(Xe,Ne,F)=>{"use strict";F.d(Ne,{W:()=>se});var p=F(5319);class se extends p.w{constructor(ye,ae){super(),this.subject=ye,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ye=this.subject,ae=ye.observers;if(this.subject=null,!ae||0===ae.length||ye.isStopped||ye.closed)return;const te=ae.indexOf(this.subscriber);-1!==te&&ae.splice(te,1)}}},7393:(Xe,Ne,F)=>{"use strict";F.d(Ne,{L:()=>De});var p=F(9105),se=F(6490),V=F(5319),ye=F(9181),ae=F(2494),te=F(4449);class De extends V.w{constructor(O,W,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=se.c;break;case 1:if(!O){this.destination=se.c;break}if("object"==typeof O){O instanceof De?(this.syncErrorThrowable=O.syncErrorThrowable,this.destination=O,O.add(this)):(this.syncErrorThrowable=!0,this.destination=new ue(this,O));break}default:this.syncErrorThrowable=!0,this.destination=new ue(this,O,W,G)}}[ye.b](){return this}static create(O,W,G){const de=new De(O,W,G);return de.syncErrorThrowable=!1,de}next(O){this.isStopped||this._next(O)}error(O){this.isStopped||(this.isStopped=!0,this._error(O))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(O){this.destination.next(O)}_error(O){this.destination.error(O),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:O}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=O,this}}class ue extends De{constructor(O,W,G,de){super(),this._parentSubscriber=O;let fe,be=this;(0,p.m)(W)?fe=W:W&&(fe=W.next,G=W.error,de=W.complete,W!==se.c&&(be=Object.create(W),(0,p.m)(be.unsubscribe)&&this.add(be.unsubscribe.bind(be)),be.unsubscribe=this.unsubscribe.bind(this))),this._context=be,this._next=fe,this._error=G,this._complete=de}next(O){if(!this.isStopped&&this._next){const{_parentSubscriber:W}=this;ae.v.useDeprecatedSynchronousErrorHandling&&W.syncErrorThrowable?this.__tryOrSetError(W,this._next,O)&&this.unsubscribe():this.__tryOrUnsub(this._next,O)}}error(O){if(!this.isStopped){const{_parentSubscriber:W}=this,{useDeprecatedSynchronousErrorHandling:G}=ae.v;if(this._error)G&&W.syncErrorThrowable?(this.__tryOrSetError(W,this._error,O),this.unsubscribe()):(this.__tryOrUnsub(this._error,O),this.unsubscribe());else if(W.syncErrorThrowable)G?(W.syncErrorValue=O,W.syncErrorThrown=!0):(0,te.z)(O),this.unsubscribe();else{if(this.unsubscribe(),G)throw O;(0,te.z)(O)}}}complete(){if(!this.isStopped){const{_parentSubscriber:O}=this;if(this._complete){const W=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&O.syncErrorThrowable?(this.__tryOrSetError(O,W),this.unsubscribe()):(this.__tryOrUnsub(W),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(O,W){try{O.call(this._context,W)}catch(G){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw G;(0,te.z)(G)}}__tryOrSetError(O,W,G){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{W.call(this._context,G)}catch(de){return ae.v.useDeprecatedSynchronousErrorHandling?(O.syncErrorValue=de,O.syncErrorThrown=!0,!0):((0,te.z)(de),!0)}return!1}_unsubscribe(){const{_parentSubscriber:O}=this;this._context=null,this._parentSubscriber=null,O.unsubscribe()}}},5319:(Xe,Ne,F)=>{"use strict";F.d(Ne,{w:()=>te});var p=F(9796),se=F(1555),V=F(9105);const ae=(()=>{function ue(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((O,W)=>`${W+1}) ${O.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return ue.prototype=Object.create(Error.prototype),ue})();class te{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:O,_ctorUnsubscribe:W,_unsubscribe:G,_subscriptions:de}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,O instanceof te)O.remove(this);else if(null!==O)for(let fe=0;fe<O.length;++fe)O[fe].remove(this);if((0,V.m)(G)){W&&(this._unsubscribe=void 0);try{G.call(this)}catch(fe){ee=fe instanceof ae?De(fe.errors):[fe]}}if((0,p.k)(de)){let fe=-1,be=de.length;for(;++fe<be;){const we=de[fe];if((0,se.K)(we))try{we.unsubscribe()}catch(re){ee=ee||[],re instanceof ae?ee=ee.concat(De(re.errors)):ee.push(re)}}}if(ee)throw new ae(ee)}add(ee){let O=ee;if(!ee)return te.EMPTY;switch(typeof ee){case"function":O=new te(ee);case"object":if(O===this||O.closed||"function"!=typeof O.unsubscribe)return O;if(this.closed)return O.unsubscribe(),O;if(!(O instanceof te)){const de=O;O=new te,O._subscriptions=[de]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:W}=O;if(null===W)O._parentOrParents=this;else if(W instanceof te){if(W===this)return O;O._parentOrParents=[W,this]}else{if(-1!==W.indexOf(this))return O;W.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[O]:G.push(O),O}remove(ee){const O=this._subscriptions;if(O){const W=O.indexOf(ee);-1!==W&&O.splice(W,1)}}}var ue;function De(ue){return ue.reduce((ee,O)=>ee.concat(O instanceof ae?O.errors:O),[])}te.EMPTY=((ue=new te).closed=!0,ue)},2494:(Xe,Ne,F)=>{"use strict";F.d(Ne,{v:()=>se});let p=!1;const se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(V){if(V){const ye=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ye.stack)}else p&&console.log("RxJS: Back to a better error behavior. Thank you. <3");p=V},get useDeprecatedSynchronousErrorHandling(){return p}}},5345:(Xe,Ne,F)=>{"use strict";F.d(Ne,{IY:()=>ye,Ds:()=>te,ft:()=>ue});var p=F(7393),se=F(7574),V=F(7444);class ye extends p.L{constructor(O){super(),this.parent=O}_next(O){this.parent.notifyNext(O)}_error(O){this.parent.notifyError(O),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class te extends p.L{notifyNext(O){this.destination.next(O)}notifyError(O){this.destination.error(O)}notifyComplete(){this.destination.complete()}}function ue(ee,O){if(O.closed)return;if(ee instanceof se.y)return ee.subscribe(O);let W;try{W=(0,V.s)(ee)(O)}catch(G){O.error(G)}return W}},9193:(Xe,Ne,F)=>{"use strict";F.d(Ne,{c:()=>V});var p=F(7574);const se=new p.y(ae=>ae.complete());function V(ae){return ae?function(ae){return new p.y(te=>ae.schedule(()=>te.complete()))}(ae):se}},4402:(Xe,Ne,F)=>{"use strict";F.d(Ne,{D:()=>be});var p=F(7574),se=F(7444),V=F(5319),ye=F(6554),De=F(4087),ue=F(377),W=F(4072),G=F(9489);function be(we,re){return re?function(we,re){if(null!=we){if(function(we){return we&&"function"==typeof we[ye.L]}(we))return function(we,re){return new p.y(j=>{const X=new V.w;return X.add(re.schedule(()=>{const ce=we[ye.L]();X.add(ce.subscribe({next(me){X.add(re.schedule(()=>j.next(me)))},error(me){X.add(re.schedule(()=>j.error(me)))},complete(){X.add(re.schedule(()=>j.complete()))}}))})),X})}(we,re);if((0,W.t)(we))return function(we,re){return new p.y(j=>{const X=new V.w;return X.add(re.schedule(()=>we.then(ce=>{X.add(re.schedule(()=>{j.next(ce),X.add(re.schedule(()=>j.complete()))}))},ce=>{X.add(re.schedule(()=>j.error(ce)))}))),X})}(we,re);if((0,G.z)(we))return(0,De.r)(we,re);if(function(we){return we&&"function"==typeof we[ue.hZ]}(we)||"string"==typeof we)return function(we,re){if(!we)throw new Error("Iterable cannot be null");return new p.y(j=>{const X=new V.w;let ce;return X.add(()=>{ce&&"function"==typeof ce.return&&ce.return()}),X.add(re.schedule(()=>{ce=we[ue.hZ](),X.add(re.schedule(function(){if(j.closed)return;let me,Oe;try{const ft=ce.next();me=ft.value,Oe=ft.done}catch(ft){return void j.error(ft)}Oe?j.complete():(j.next(me),this.schedule())}))})),X})}(we,re)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,re):we instanceof p.y?we:new p.y((0,se.s)(we))}},6693:(Xe,Ne,F)=>{"use strict";F.d(Ne,{n:()=>ye});var p=F(7574),se=F(5015),V=F(4087);function ye(ae,te){return te?(0,V.r)(ae,te):new p.y((0,se.V)(ae))}},6682:(Xe,Ne,F)=>{"use strict";F.d(Ne,{T:()=>ae});var p=F(7574),se=F(4869),V=F(3282),ye=F(6693);function ae(...te){let De=Number.POSITIVE_INFINITY,ue=null,ee=te[te.length-1];return(0,se.K)(ee)?(ue=te.pop(),te.length>1&&"number"==typeof te[te.length-1]&&(De=te.pop())):"number"==typeof ee&&(De=te.pop()),null===ue&&1===te.length&&te[0]instanceof p.y?te[0]:(0,V.J)(De)((0,ye.n)(te,ue))}},5917:(Xe,Ne,F)=>{"use strict";F.d(Ne,{of:()=>ye});var p=F(4869),se=F(6693),V=F(4087);function ye(...ae){let te=ae[ae.length-1];return(0,p.K)(te)?(ae.pop(),(0,V.r)(ae,te)):(0,se.n)(ae)}},8002:(Xe,Ne,F)=>{"use strict";F.d(Ne,{U:()=>se});var p=F(7393);function se(ae,te){return function(ue){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ue.lift(new V(ae,te))}}class V{constructor(te,De){this.project=te,this.thisArg=De}call(te,De){return De.subscribe(new ye(te,this.project,this.thisArg))}}class ye extends p.L{constructor(te,De,ue){super(te),this.project=De,this.count=0,this.thisArg=ue||this}_next(te){let De;try{De=this.project.call(this.thisArg,te,this.count++)}catch(ue){return void this.destination.error(ue)}this.destination.next(De)}}},3282:(Xe,Ne,F)=>{"use strict";F.d(Ne,{J:()=>V});var p=F(9773),se=F(4487);function V(ye=Number.POSITIVE_INFINITY){return(0,p.zg)(se.y,ye)}},9773:(Xe,Ne,F)=>{"use strict";F.d(Ne,{zg:()=>ye});var p=F(8002),se=F(4402),V=F(5345);function ye(ue,ee,O=Number.POSITIVE_INFINITY){return"function"==typeof ee?W=>W.pipe(ye((G,de)=>(0,se.D)(ue(G,de)).pipe((0,p.U)((fe,be)=>ee(G,fe,de,be))),O)):("number"==typeof ee&&(O=ee),W=>W.lift(new ae(ue,O)))}class ae{constructor(ee,O=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=O}call(ee,O){return O.subscribe(new te(ee,this.project,this.concurrent))}}class te extends V.Ds{constructor(ee,O,W=Number.POSITIVE_INFINITY){super(ee),this.project=O,this.concurrent=W,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let O;const W=this.index++;try{O=this.project(ee,W)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub(O)}_innerSub(ee){const O=new V.IY(this),W=this.destination;W.add(O);const G=(0,V.ft)(ee,O);G!==O&&W.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(Xe,Ne,F)=>{"use strict";F.d(Ne,{ht:()=>W,QV:()=>ee});var p=F(7393),se=F(9193),V=F(5917),ye=F(7574);class ue{constructor(fe,be,we){this.kind=fe,this.value=be,this.error=we,this.hasValue="N"===fe}observe(fe){switch(this.kind){case"N":return fe.next&&fe.next(this.value);case"E":return fe.error&&fe.error(this.error);case"C":return fe.complete&&fe.complete()}}do(fe,be,we){switch(this.kind){case"N":return fe&&fe(this.value);case"E":return be&&be(this.error);case"C":return we&&we()}}accept(fe,be,we){return fe&&"function"==typeof fe.next?this.observe(fe):this.do(fe,be,we)}toObservable(){switch(this.kind){case"N":return(0,V.of)(this.value);case"E":return de=this.error,new ye.y(be=>be.error(de));case"C":return(0,se.c)()}var de;throw new Error("unexpected notification kind value")}static createNext(fe){return void 0!==fe?new ue("N",fe):ue.undefinedValueNotification}static createError(fe){return new ue("E",void 0,fe)}static createComplete(){return ue.completeNotification}}function ee(de,fe=0){return function(we){return we.lift(new O(de,fe))}}ue.completeNotification=new ue("C"),ue.undefinedValueNotification=new ue("N",void 0);class O{constructor(fe,be=0){this.scheduler=fe,this.delay=be}call(fe,be){return be.subscribe(new W(fe,this.scheduler,this.delay))}}class W extends p.L{constructor(fe,be,we=0){super(fe),this.scheduler=be,this.delay=we}static dispatch(fe){const{notification:be,destination:we}=fe;be.observe(we),this.unsubscribe()}scheduleMessage(fe){this.destination.add(this.scheduler.schedule(W.dispatch,this.delay,new G(fe,this.destination)))}_next(fe){this.scheduleMessage(ue.createNext(fe))}_error(fe){this.scheduleMessage(ue.createError(fe)),this.unsubscribe()}_complete(){this.scheduleMessage(ue.createComplete()),this.unsubscribe()}}class G{constructor(fe,be){this.notification=fe,this.destination=be}}},3522:(Xe,Ne,F)=>{"use strict";F.d(Ne,{B:()=>we});var p=F(9765),se=F(7574),V=F(5319),ye=F(7393);function ae(){return function(j){return j.lift(new te(j))}}class te{constructor(j){this.connectable=j}call(j,X){const{connectable:ce}=this;ce._refCount++;const me=new De(j,ce),Oe=X.subscribe(me);return me.closed||(me.connection=ce.connect()),Oe}}class De extends ye.L{constructor(j,X){super(j),this.connectable=X}_unsubscribe(){const{connectable:j}=this;if(!j)return void(this.connection=null);this.connectable=null;const X=j._refCount;if(X<=0)return void(this.connection=null);if(j._refCount=X-1,X>1)return void(this.connection=null);const{connection:ce}=this,me=j._connection;this.connection=null,me&&(!ce||me===ce)&&me.unsubscribe()}}class ue extends se.y{constructor(j,X){super(),this.source=j,this.subjectFactory=X,this._refCount=0,this._isComplete=!1}_subscribe(j){return this.getSubject().subscribe(j)}getSubject(){const j=this._subject;return(!j||j.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let j=this._connection;return j||(this._isComplete=!1,j=this._connection=new V.w,j.add(this.source.subscribe(new O(this.getSubject(),this))),j.closed&&(this._connection=null,j=V.w.EMPTY)),j}refCount(){return ae()(this)}}const ee=(()=>{const re=ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:re._subscribe},_isComplete:{value:re._isComplete,writable:!0},getSubject:{value:re.getSubject},connect:{value:re.connect},refCount:{value:re.refCount}}})();class O extends p.Yc{constructor(j,X){super(j),this.connectable=X}_error(j){this._unsubscribe(),super._error(j)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const j=this.connectable;if(j){this.connectable=null;const X=j._connection;j._refCount=0,j._subject=null,j._connection=null,X&&X.unsubscribe()}}}function be(){return new p.xQ}function we(){return re=>ae()(function(re,j){return function(ce){let me;me="function"==typeof re?re:function(){return re};const Oe=Object.create(ce,ee);return Oe.source=ce,Oe.subjectFactory=me,Oe}}(be)(re))}},3101:(Xe,Ne,F)=>{"use strict";F.d(Ne,{R:()=>re});var p=F(7574);let se=1;const V=Promise.resolve(),ye={};function ae(X){return X in ye&&(delete ye[X],!0)}const te={setImmediate(X){const ce=se++;return ye[ce]=!0,V.then(()=>ae(ce)&&X()),ce},clearImmediate(X){ae(X)}};var ue=F(6465),O=F(6102);const de=new class extends O.v{flush(ce){this.active=!0,this.scheduled=void 0;const{actions:me}=this;let Oe,ft=-1,Et=me.length;ce=ce||me.shift();do{if(Oe=ce.execute(ce.state,ce.delay))break}while(++ft<Et&&(ce=me.shift()));if(this.active=!1,Oe){for(;++ft<Et&&(ce=me.shift());)ce.unsubscribe();throw Oe}}}(class extends ue.o{constructor(ce,me){super(ce,me),this.scheduler=ce,this.work=me}requestAsyncId(ce,me,Oe=0){return null!==Oe&&Oe>0?super.requestAsyncId(ce,me,Oe):(ce.actions.push(this),ce.scheduled||(ce.scheduled=te.setImmediate(ce.flush.bind(ce,null))))}recycleAsyncId(ce,me,Oe=0){if(null!==Oe&&Oe>0||null===Oe&&this.delay>0)return super.recycleAsyncId(ce,me,Oe);0===ce.actions.length&&(te.clearImmediate(me),ce.scheduled=void 0)}});var fe=F(9796);class we extends p.y{constructor(ce,me=0,Oe=de){var X;super(),this.source=ce,this.delayTime=me,this.scheduler=Oe,(!(!(0,fe.k)(X=me)&&X-parseFloat(X)+1>=0)||me<0)&&(this.delayTime=0),(!Oe||"function"!=typeof Oe.schedule)&&(this.scheduler=de)}static create(ce,me=0,Oe=de){return new we(ce,me,Oe)}static dispatch(ce){const{source:me,subscriber:Oe}=ce;return this.add(me.subscribe(Oe))}_subscribe(ce){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:ce})}}function re(X,ce=0){return function(Oe){return Oe.lift(new j(X,ce))}}class j{constructor(ce,me){this.scheduler=ce,this.delay=me}call(ce,me){return new we(me,this.delay,this.scheduler).subscribe(ce)}}},4087:(Xe,Ne,F)=>{"use strict";F.d(Ne,{r:()=>V});var p=F(7574),se=F(5319);function V(ye,ae){return new p.y(te=>{const De=new se.w;let ue=0;return De.add(ae.schedule(function(){ue!==ye.length?(te.next(ye[ue++]),te.closed||De.add(this.schedule())):te.complete()})),De})}},6465:(Xe,Ne,F)=>{"use strict";F.d(Ne,{o:()=>V});var p=F(5319);class se extends p.w{constructor(ae,te){super()}schedule(ae,te=0){return this}}class V extends se{constructor(ae,te){super(ae,te),this.scheduler=ae,this.work=te,this.pending=!1}schedule(ae,te=0){if(this.closed)return this;this.state=ae;const De=this.id,ue=this.scheduler;return null!=De&&(this.id=this.recycleAsyncId(ue,De,te)),this.pending=!0,this.delay=te,this.id=this.id||this.requestAsyncId(ue,this.id,te),this}requestAsyncId(ae,te,De=0){return setInterval(ae.flush.bind(ae,this),De)}recycleAsyncId(ae,te,De=0){if(null!==De&&this.delay===De&&!1===this.pending)return te;clearInterval(te)}execute(ae,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(ae,te);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,te){let ue,De=!1;try{this.work(ae)}catch(ee){De=!0,ue=!!ee&&ee||new Error(ee)}if(De)return this.unsubscribe(),ue}_unsubscribe(){const ae=this.id,te=this.scheduler,De=te.actions,ue=De.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ue&&De.splice(ue,1),null!=ae&&(this.id=this.recycleAsyncId(te,ae,null)),this.delay=null}}},6102:(Xe,Ne,F)=>{"use strict";F.d(Ne,{v:()=>se});let p=(()=>{class V{constructor(ae,te=V.now){this.SchedulerAction=ae,this.now=te}schedule(ae,te=0,De){return new this.SchedulerAction(this,ae).schedule(De,te)}}return V.now=()=>Date.now(),V})();class se extends p{constructor(ye,ae=p.now){super(ye,()=>se.delegate&&se.delegate!==this?se.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ye,ae=0,te){return se.delegate&&se.delegate!==this?se.delegate.schedule(ye,ae,te):super.schedule(ye,ae,te)}flush(ye){const{actions:ae}=this;if(this.active)return void ae.push(ye);let te;this.active=!0;do{if(te=ye.execute(ye.state,ye.delay))break}while(ye=ae.shift());if(this.active=!1,te){for(;ye=ae.shift();)ye.unsubscribe();throw te}}}},3637:(Xe,Ne,F)=>{"use strict";F.d(Ne,{z:()=>V});var p=F(6465);const V=new(F(6102).v)(p.o)},7771:(Xe,Ne,F)=>{"use strict";F.d(Ne,{c:()=>te,N:()=>ae});var p=F(6465),V=F(6102);const ae=new class extends V.v{}(class extends p.o{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee}schedule(ue,ee=0){return ee>0?super.schedule(ue,ee):(this.delay=ee,this.state=ue,this.scheduler.flush(this),this)}execute(ue,ee){return ee>0||this.closed?super.execute(ue,ee):this._execute(ue,ee)}requestAsyncId(ue,ee,O=0){return null!==O&&O>0||null===O&&this.delay>0?super.requestAsyncId(ue,ee,O):ue.flush(this)}}),te=ae},377:(Xe,Ne,F)=>{"use strict";F.d(Ne,{hZ:()=>se});const se="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Xe,Ne,F)=>{"use strict";F.d(Ne,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Xe,Ne,F)=>{"use strict";F.d(Ne,{b:()=>p});const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Xe,Ne,F)=>{"use strict";F.d(Ne,{N:()=>se});const se=(()=>{function V(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return V.prototype=Object.create(Error.prototype),V})()},4449:(Xe,Ne,F)=>{"use strict";function p(se){setTimeout(()=>{throw se},0)}F.d(Ne,{z:()=>p})},4487:(Xe,Ne,F)=>{"use strict";function p(se){return se}F.d(Ne,{y:()=>p})},9796:(Xe,Ne,F)=>{"use strict";F.d(Ne,{k:()=>p});const p=Array.isArray||(se=>se&&"number"==typeof se.length)},9489:(Xe,Ne,F)=>{"use strict";F.d(Ne,{z:()=>p});const p=se=>se&&"number"==typeof se.length&&"function"!=typeof se},9105:(Xe,Ne,F)=>{"use strict";function p(se){return"function"==typeof se}F.d(Ne,{m:()=>p})},1555:(Xe,Ne,F)=>{"use strict";function p(se){return null!==se&&"object"==typeof se}F.d(Ne,{K:()=>p})},4072:(Xe,Ne,F)=>{"use strict";function p(se){return!!se&&"function"!=typeof se.subscribe&&"function"==typeof se.then}F.d(Ne,{t:()=>p})},4869:(Xe,Ne,F)=>{"use strict";function p(se){return se&&"function"==typeof se.schedule}F.d(Ne,{K:()=>p})},7444:(Xe,Ne,F)=>{"use strict";F.d(Ne,{s:()=>W});var p=F(5015),se=F(4449),ye=F(377),te=F(6554),ue=F(9489),ee=F(4072),O=F(1555);const W=G=>{if(G&&"function"==typeof G[te.L])return(G=>de=>{const fe=G[te.L]();if("function"!=typeof fe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return fe.subscribe(de)})(G);if((0,ue.z)(G))return(0,p.V)(G);if((0,ee.t)(G))return(G=>de=>(G.then(fe=>{de.closed||(de.next(fe),de.complete())},fe=>de.error(fe)).then(null,se.z),de))(G);if(G&&"function"==typeof G[ye.hZ])return(G=>de=>{const fe=G[ye.hZ]();for(;;){let be;try{be=fe.next()}catch(we){return de.error(we),de}if(be.done){de.complete();break}if(de.next(be.value),de.closed)break}return"function"==typeof fe.return&&de.add(()=>{fe.return&&fe.return()}),de})(G);{const fe=`You provided ${(0,O.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(fe)}}},5015:(Xe,Ne,F)=>{"use strict";F.d(Ne,{V:()=>p});const p=se=>V=>{for(let ye=0,ae=se.length;ye<ae&&!V.closed;ye++)V.next(se[ye]);V.complete()}},9564:(Xe,Ne,F)=>{"use strict";var p=F(7716);let se=null;function V(){return se}const De=new p.OlP("DocumentToken");var le=(()=>((le=le||{})[le.Zero=0]="Zero",le[le.One=1]="One",le[le.Two=2]="Two",le[le.Few=3]="Few",le[le.Many=4]="Many",le[le.Other=5]="Other",le))();const I1=p.kL8;class ri{}let qn=(()=>{class n extends ri{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(I1(r||this.locale)(t)){case le.Zero:return"zero";case le.One:return"one";case le.Two:return"two";case le.Few:return"few";case le.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function rr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}let _o=(()=>{class n{constructor(t,r,o,l){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,p.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,p.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.ZZ4),p.Y36(p.aQg),p.Y36(p.SBq),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ki{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bt=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,l,h)=>{if(null==o.previousIndex){const m=this._viewContainer.createEmbeddedView(this._template,new ki(null,this._ngForOf,-1,-1),null===h?void 0:h),C=new ia(o,m);r.push(C)}else if(null==h)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const m=this._viewContainer.get(l);this._viewContainer.move(m,h);const C=new ia(o,m);r.push(C)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,l=this._viewContainer.length;o<l;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=l,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class ia{constructor(e,t){this.record=e,this.view=t}}let D1=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new o2,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Co("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Co("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class o2{constructor(){this.$implicit=null,this.ngIf=null}}function Co(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let bo=(()=>{class n{constructor(t,r,o){this._ngEl=t,this._differs=r,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[o,l]=t.split(".");null!=(r=null!=r&&l?`${r}${l}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,o,r):this._renderer.removeStyle(this._ngEl.nativeElement,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.aQg),p.Y36(p.Qsj))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();class j4{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class U0{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const Xi=new U0,Mu=new j4;let a2=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return Xi;if((0,p.F4k)(t))return Mu;throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,p.AaK)(n)}'`)}(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1}),n})(),vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:ri,useClass:qn}]}),n})();function To(n){return"server"===n}class d2{}class f2 extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new f2,se||(se=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Pi=Pi||document.querySelector("base"),Pi?Pi.getAttribute("href"):null);return null==t?null:function(n){cn=cn||document.createElement("a"),cn.setAttribute("href",n);const e=cn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rr(document.cookie,e)}}let cn,Pi=null;const aa=new p.OlP("TRANSITION_ID"),br=[{provide:p.ip1,useFactory:function(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=V(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[aa,De,p.zs3],multi:!0}];class Dn{static init(){(0,p.VLi)(new Dn)}addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const m=function(C){h=h||C,l--,0==l&&r(h)};o.forEach(function(C){C.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ca=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const N1=new p.OlP("EventManagerPlugins");let xe=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(N1),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class It{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=V().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Cc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),rn=(()=>{class n extends Cc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bc))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function bc(n){V().remove(n)}const n1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gi=/%COMP%/g;function kn(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?kn(n,o,t):(o=o.replace(gi,n),t.push(o))}return t}function vi(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fs=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new wr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new _2(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Ec(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=kn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(xe),p.LFG(rn),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class wr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(n1[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=n1[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=n1[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vi(r)):this.eventManager.addEventListener(e,t,vi(r))}}class _2 extends wr{constructor(e,t,r,o){super(e),this.component=r;const l=kn(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(gi,o+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(gi,o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ec extends wr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=kn(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const m=document.createElement("style");m.textContent=l[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fs=(()=>{class n extends It{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Bs=["alt","control","meta","shift"],Ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Er={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ld={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mc=(()=>{class n extends It{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(Bs.forEach(C=>{const E=r.indexOf(C);E>-1&&(r.splice(E,1),h+=C+".")}),h+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Er.hasOwnProperty(e)&&(e=Er[e]))}return Ic[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Bs.forEach(l=>{l!=o&&ld[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),yi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:function(){return(0,p.LFG)(zo)},token:n,providedIn:"root"}),n})(),zo=(()=>{class n extends yi{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case p.q3G.NONE:return r;case p.q3G.HTML:return(0,p.qzn)(r,"HTML")?(0,p.z3N)(r):(0,p.EiD)(this._doc,String(r)).toString();case p.q3G.STYLE:return(0,p.qzn)(r,"Style")?(0,p.z3N)(r):r;case p.q3G.SCRIPT:if((0,p.qzn)(r,"Script"))return(0,p.z3N)(r);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.yhl)(r),(0,p.qzn)(r,"URL")?(0,p.z3N)(r):(0,p.mCW)(String(r));case p.q3G.RESOURCE_URL:if((0,p.qzn)(r,"ResourceURL"))return(0,p.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,p.JVY)(t)}bypassSecurityTrustStyle(t){return(0,p.L6k)(t)}bypassSecurityTrustScript(t){return(0,p.eBb)(t)}bypassSecurityTrustUrl(t){return(0,p.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,p.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De))},n.\u0275prov=(0,p.Yz7)({factory:function(){return function(n){return new zo(n.get(De))}((0,p.LFG)(p.gxx))},token:n,providedIn:"root"}),n})();const Us=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){f2.makeCurrent(),Dn.init()},multi:!0},{provide:De,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),Sc=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:N1,useClass:Fs,multi:!0,deps:[De,p.R0b,p.Lbi]},{provide:N1,useClass:Mc,multi:!0,deps:[De]},[],{provide:fs,useClass:fs,deps:[xe,rn,p.AFp]},{provide:p.FYo,useExisting:fs},{provide:Cc,useExisting:rn},{provide:rn,useClass:rn,deps:[De]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:xe,useClass:xe,deps:[N1,p.R0b]},{provide:d2,useClass:ca,deps:[]},[]];let q0=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:aa,useExisting:p.AFp},br]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Sc,imports:[vc,p.hGG]}),n})();"undefined"!=typeof window&&window;var Vi=F(4402),zn=F(7574),Gs=F(9796),Nt=F(8002),D2=F(1555);function Ws(n,e){return new zn.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let l=0,h=0;for(let m=0;m<r;m++){const C=(0,Vi.D)(n[m]);let E=!1;t.add(C.subscribe({next:T=>{E||(E=!0,h++),o[m]=T},error:T=>t.error(T),complete:()=>{l++,(l===r||!E)&&(h===r&&t.next(e?e.reduce((T,x,P)=>(T[x]=o[P],T),{}):o),t.complete())}}))}})}let qs=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),R1=(()=>{class n extends qs{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ps=new p.OlP("NgValueAccessor"),K0={provide:ps,useExisting:(0,p.Gpc)(()=>Oi),multi:!0},fa=new p.OlP("CompositionEventMode");let Oi=(()=>{class n extends qs{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(fa,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[p._Bn([K0]),p.qOj]}),n})();function a1(n){return null==n||0===n.length}function Zs(n){return null!=n&&"number"==typeof n.length}const Zn=new p.OlP("NgValidators"),Ir=new p.OlP("NgAsyncValidators"),P1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class V1{static min(e){return n=e,e=>{if(a1(e.value)||a1(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null};var n}static max(e){return n=e,e=>{if(a1(e.value)||a1(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null};var n}static required(e){return c1(e)}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return a1((n=e).value)||P1.test(n.value)?null:{email:!0};var n}static minLength(e){return n=e,e=>a1(e.value)||!Zs(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static maxLength(e){return n=e,e=>Zs(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static pattern(e){return function(n){if(!n)return jt;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(a1(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return gs(e)}static composeAsync(e){return X0(e)}}function c1(n){return a1(n.value)?{required:!0}:null}function jt(n){return null}function o6(n){return null!=n}function ma(n){const e=(0,p.QGY)(n)?(0,Vi.D)(n):n;return(0,p.CqO)(e),e}function J0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Rc(n,e){return e.map(t=>t(n))}function Pc(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function gs(n){if(!n)return null;const e=n.filter(o6);return 0==e.length?null:function(t){return J0(Rc(t,e))}}function ga(n){return null!=n?gs(Pc(n)):null}function X0(n){if(!n)return null;const e=n.filter(o6);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Gs.k)(e))return Ws(e,null);if((0,D2.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ws(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Ws(n=1===n.length&&(0,Gs.k)(n[0])?n[0]:n,null).pipe((0,Nt.U)(t=>e(...t)))}return Ws(n,null)}(Rc(t,e).map(ma)).pipe((0,Nt.U)(J0))}}function va(n){return null!=n?X0(Pc(n)):null}function ya(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vs(n){return n._rawValidators}function el(n){return n._rawAsyncValidators}function _n(n){return n?Array.isArray(n)?n:[n]:[]}function Fi(n,e){return Array.isArray(n)?n.includes(e):n===e}function si(n,e){const t=_n(e);return _n(n).forEach(o=>{Fi(t,o)||t.push(o)}),t}function _a(n,e){return _n(e).filter(t=>!Fi(n,t))}let Ca=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ga(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=va(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n}),n})(),sn=(()=>{class n extends Ca{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();class Un extends Ca{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class O1{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let a6=(()=>{class n extends O1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Un,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),ba=(()=>{class n extends O1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(sn,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function Ho(n,e){H(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qe(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qe(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function I(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),J(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function A(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function H(n,e){const t=vs(n);null!==e.validator?n.setValidators(ya(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=el(n);null!==e.asyncValidator?n.setAsyncValidators(ya(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();A(e._rawValidators,o),A(e._rawAsyncValidators,o)}function J(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=vs(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=el(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return A(e._rawValidators,r),A(e._rawAsyncValidators,r),t}function qe(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _i(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ai="VALID",Uo="INVALID",k2="PENDING",jo="DISABLED";function Fu(n){return(Ys(n)?n.validators:n)||null}function Ea(n){return Array.isArray(n)?ga(n):n||null}function Hi(n,e){return(Ys(e)?e.asyncValidators:n)||null}function Hc(n){return Array.isArray(n)?va(n):n||null}function Ys(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class c6{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ea(this._rawValidators),this._composedAsyncValidatorFn=Hc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ai}get invalid(){return this.status===Uo}get pending(){return this.status==k2}get disabled(){return this.status===jo}get enabled(){return this.status!==jo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ea(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Hc(e)}addValidators(e){this.setValidators(si(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(si(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_a(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_a(e,this._rawAsyncValidators))}hasValidator(e){return Fi(this._rawValidators,e)}hasAsyncValidator(e){return Fi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=k2,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=jo,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ai,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ai||this.status===k2)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jo:ai}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=k2,this._hasOwnPendingAsyncValidator=!0;const t=ma(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof h1?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof Ia&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?jo:this.errors?Uo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(k2)?k2:this._anyControlsHaveStatus(Uo)?Uo:ai}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ys(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Qs extends c6{constructor(e=null,t,r){super(Fu(t),Hi(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_i(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_i(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class h1 extends c6{constructor(e,t,r){super(Fu(t),Hi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Qs?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Ia extends c6{constructor(e,t,r){super(Fu(t),Hi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Qs?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let z2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ju={provide:ps,useExisting:(0,p.Gpc)(()=>Uc),multi:!0};let Ta=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),$u=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:function(){return new n},token:n,providedIn:Ta}),n})(),Uc=(()=>{class n extends R1{constructor(t,r,o,l){super(t,r),this._registry=o,this._injector=l,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Un),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36($u),p.Y36(p.zs3))},n.\u0275dir=p.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[p._Bn([ju]),p.qOj]}),n})();const sl=new p.OlP("NgModelWithFormControlWarning"),pd={provide:sn,useExisting:(0,p.Gpc)(()=>u6)};let u6=(()=>{class n extends sn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(J(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ho(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){I(t.control||null,t,!1),_i(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(I(r||null,t),o instanceof Qs&&(Ho(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){H(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return J(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){H(this.form,this),this._oldForm&&J(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Zn,10),p.Y36(Ir,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([pd]),p.qOj,p.TTD]}),n})();const cl={provide:Un,useExisting:(0,p.Gpc)(()=>ll)};let ll=(()=>{class n extends Un{constructor(t,r,o,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Oi?t=l:function(n){return Object.getPrototypeOf(n.constructor)===R1}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(sn,13),p.Y36(Zn,10),p.Y36(Ir,10),p.Y36(ps,10),p.Y36(sl,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([cl]),p.qOj,p.TTD]}),n._ngModelWarningSentOnce=!1,n})();const Zu={provide:Zn,useExisting:(0,p.Gpc)(()=>Sa),multi:!0};let Sa=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?c1(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[p._Bn([Zu])]}),n})(),Qu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ta]]}),n})(),Rn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Qu]}),n})(),m6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sl,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Qu]}),n})(),g6=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,l=null,h=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new h1(o,{asyncValidators:h,updateOn:m,validators:l})}control(t,r,o){return new Qs(t,r,o)}array(t,r,o){const l=t.map(h=>this._createControl(h));return new Ia(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Qs||t instanceof h1||t instanceof Ia?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:function(){return new n},token:n,providedIn:m6}),n})();var $c=F(5345);function Br(n,e){return"function"==typeof e?t=>t.pipe(Br((r,o)=>(0,Vi.D)(n(r,o)).pipe((0,Nt.U)((l,h)=>e(r,l,o,h))))):t=>t.lift(new Id(n))}class Id{constructor(e){this.project=e}call(e,t){return t.subscribe(new Cl(e,this.project))}}class Cl extends $c.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new $c.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,$c.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var Ur=F(9765),v6=F(7771),Md=F(5319),Xs=F(309),hr=F(7971),Gc=F(8858);class bl extends Ur.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new wl(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,l=r.length;let h;if(this.closed)throw new hr.N;if(this.isStopped||this.hasError?h=Md.w.EMPTY:(this.observers.push(e),h=new Gc.W(this,e)),o&&e.add(e=new Xs.ht(e,o)),t)for(let m=0;m<l&&!e.closed;m++)e.next(r[m]);else for(let m=0;m<l&&!e.closed;m++)e.next(r[m].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||v6.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,l=o.length;let h=0;for(;h<l&&!(e-o[h].time<r);)h++;return l>t&&(h=Math.max(h,l-t)),h>0&&o.splice(0,h),o}}class wl{constructor(e,t){this.time=e,this.value=t}}var yn=F(5917),d1=F(9773),bs=F(7393);function Wc(n,e){return function(r){return r.lift(new Ju(n,e))}}class Ju{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Xu(e,this.predicate,this.thisArg))}}class Xu extends bs.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}class jr{}class _6{}class f1{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),l=o.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(o,l),this.headers.has(l)?this.headers.get(l).push(h):this.headers.set(l,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof f1?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new f1;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof f1?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const l=e.value;if(l){let h=this.headers.get(t);if(!h)return;h=h.filter(m=>-1===l.indexOf(m)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Ad{encodeKey(e){return Zc(e)}encodeValue(e){return Zc(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const qc=/%(\d[a-f0-9])/gi,El={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Zc(n){return encodeURIComponent(n).replace(qc,(e,t)=>{var r;return null!==(r=El[t])&&void 0!==r?r:e})}function Kc(n){return`${n}`}class Wo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Ad,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const l=o.indexOf("="),[h,m]=-1==l?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,l)),e.decodeValue(o.slice(l+1))],C=t.get(h)||[];C.push(m),t.set(h,C)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(l=>{t.push({param:r,value:l,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Wo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Kc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Kc(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class e8{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function _(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function f(n){return"undefined"!=typeof Blob&&n instanceof Blob}function g(n){return"undefined"!=typeof FormData&&n instanceof FormData}class S{constructor(e,t,r,o){let l;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,l=o):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new f1),this.context||(this.context=new e8),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+h}}else this.params=new Wo,this.urlWithParams=t}serializeBody(){return null===this.body?null:_(this.body)||f(this.body)||g(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Wo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||g(this.body)?null:f(this.body)?this.body.type||null:_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,l=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,C=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,T=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((P,B)=>P.set(B,e.setHeaders[B]),E)),e.setParams&&(T=Object.keys(e.setParams).reduce((P,B)=>P.set(B,e.setParams[B]),T)),new S(r,o,h,{params:T,headers:E,context:x,reportProgress:C,responseType:l,withCredentials:m})}}var L=(()=>((L=L||{})[L.Sent=0]="Sent",L[L.UploadProgress=1]="UploadProgress",L[L.ResponseHeader=2]="ResponseHeader",L[L.DownloadProgress=3]="DownloadProgress",L[L.Response=4]="Response",L[L.User=5]="User",L))();class Y{constructor(e,t=200,r="OK"){this.headers=e.headers||new f1,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ce extends Y{constructor(e={}){super(e),this.type=L.ResponseHeader}clone(e={}){return new Ce({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fe extends Y{constructor(e={}){super(e),this.type=L.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Fe({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ge extends Y{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ct(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let st=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let l;if(t instanceof S)l=t;else{let C,E;C=o.headers instanceof f1?o.headers:new f1(o.headers),o.params&&(E=o.params instanceof Wo?o.params:new Wo({fromObject:o.params})),l=new S(t,r,void 0!==o.body?o.body:null,{headers:C,context:o.context,params:E,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const h=(0,yn.of)(l).pipe(function(n,e){return(0,d1.zg)(n,void 0,1)}(C=>this.handler.handle(C)));if(t instanceof S||"events"===o.observe)return h;const m=h.pipe(Wc(C=>C instanceof Fe));switch(o.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return m.pipe((0,Nt.U)(C=>{if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return m.pipe((0,Nt.U)(C=>{if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return m.pipe((0,Nt.U)(C=>{if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));case"json":default:return m.pipe((0,Nt.U)(C=>C.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Wo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,ct(o,r))}post(t,r,o={}){return this.request("POST",t,ct(o,r))}put(t,r,o={}){return this.request("PUT",t,ct(o,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(jr))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Kn{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Bi=new p.OlP("HTTP_INTERCEPTORS");let Il=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const r8=/^\)\]\}',?\n/;let Sd=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((B,Q)=>o.setRequestHeader(B,Q.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&o.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();o.responseType="json"!==B?B:"text"}const l=t.serializeBody();let h=null;const m=()=>{if(null!==h)return h;const B=1223===o.status?204:o.status,Q=o.statusText||"OK",Ae=new f1(o.getAllResponseHeaders()),Ve=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return h=new Ce({headers:Ae,status:B,statusText:Q,url:Ve}),h},C=()=>{let{headers:B,status:Q,statusText:Ae,url:Ve}=m(),Ye=null;204!==Q&&(Ye=void 0===o.response?o.responseText:o.response),0===Q&&(Q=Ye?200:0);let bt=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof Ye){const Jt=Ye;Ye=Ye.replace(r8,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(wt){Ye=Jt,bt&&(bt=!1,Ye={error:wt,text:Ye})}}bt?(r.next(new Fe({body:Ye,headers:B,status:Q,statusText:Ae,url:Ve||void 0})),r.complete()):r.error(new Ge({error:Ye,headers:B,status:Q,statusText:Ae,url:Ve||void 0}))},E=B=>{const{url:Q}=m(),Ae=new Ge({error:B,status:o.status||0,statusText:o.statusText||"Unknown Error",url:Q||void 0});r.error(Ae)};let T=!1;const x=B=>{T||(r.next(m()),T=!0);let Q={type:L.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(Q.total=B.total),"text"===t.responseType&&!!o.responseText&&(Q.partialText=o.responseText),r.next(Q)},P=B=>{let Q={type:L.UploadProgress,loaded:B.loaded};B.lengthComputable&&(Q.total=B.total),r.next(Q)};return o.addEventListener("load",C),o.addEventListener("error",E),o.addEventListener("timeout",E),o.addEventListener("abort",E),t.reportProgress&&(o.addEventListener("progress",x),null!==l&&o.upload&&o.upload.addEventListener("progress",P)),o.send(l),r.next({type:L.Sent}),()=>{o.removeEventListener("error",E),o.removeEventListener("abort",E),o.removeEventListener("load",C),o.removeEventListener("timeout",E),t.reportProgress&&(o.removeEventListener("progress",x),null!==l&&o.upload&&o.upload.removeEventListener("progress",P)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(d2))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ci=new p.OlP("XSRF_COOKIE_NAME"),Yc=new p.OlP("XSRF_HEADER_NAME");class i8{}let C_=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(De),p.LFG(p.Lbi),p.LFG(Ci))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),s8=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const l=this.tokenService.getToken();return null!==l&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,l)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(i8),p.LFG(Yc))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Al=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Bi,[]);this.chain=r.reduceRight((o,l)=>new Kn(o,l),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_6),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),xd=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:s8,useClass:Il}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ci,useValue:t.cookieName}:[],t.headerName?{provide:Yc,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[s8,{provide:Bi,useExisting:s8,multi:!0},{provide:i8,useClass:C_},{provide:Ci,useValue:"XSRF-TOKEN"},{provide:Yc,useValue:"X-XSRF-TOKEN"}]}),n})(),Nd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[st,{provide:jr,useClass:Al},Sd,{provide:_6,useExisting:Sd}],imports:[[xd.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Na=(()=>{class n{constructor(t){this.http=t,this.urlpisekowy="https://dog.ceo/api/breeds/image/random",this.listaRas="https://dog.ceo/api/breeds/list/all"}getRandomDoggo(){return this.http.get(this.urlpisekowy)}allBreeds(){return this.http.get(this.listaRas)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(st))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tl(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,h,l=0,m=!1,C=!1;return function(T){let x;l++,!o||m?(m=!1,o=new bl(n,e,r),x=o.subscribe(this),h=T.subscribe({next(P){o.next(P)},error(P){m=!0,o.error(P)},complete(){C=!0,h=void 0,o.complete()}}),C&&(h=void 0)):x=o.subscribe(this),this.add(()=>{l--,x.unsubscribe(),x=void 0,h&&!C&&t&&0===l&&(h.unsubscribe(),h=void 0,o=void 0)})}}(r))}let o8=(()=>{class n{constructor(t){this.api=t,this.changeRandomDog=new Ur.xQ,this.dogeImgPath$=this.changeRandomDog.pipe(Br(()=>this.api.getRandomDoggo().pipe((0,Nt.U)(r=>r.message))),Tl(1)),this.breed$=this.dogeImgPath$.pipe((0,Nt.U)(r=>(r.match(/(breeds\/)(.*)(?=\/)/)||"")[2]))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Na))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a8=(()=>{class n{constructor(t,r){this.api=t,this.jedenWybranyPiesService=r,this.refreshAnswerSrc=new bl(1),this.tenjedenjedyny$=this.jedenWybranyPiesService.breed$,this.wszystkieRasy$=this.getBreeds(),this.wszystkieRasyBezWybranego$=this.usunDobraOdpZPuliDoLosowania(),this.trzylosowe$=this.wylosujDogs(),this.odpowiedzi$=this.appendAndShuffle(),this.refreshAnswers()}getBreeds(){return this.api.allBreeds().pipe((0,Nt.U)(t=>t.message),(0,Nt.U)(t=>{const r=Object.entries(t).map(([o,l])=>0===l.length?o:l.map(h=>`${o}-${h}`));return[].concat(...r)}))}wylosujDogs(){return this.refreshAnswerSrc.pipe(Br(()=>this.wszystkieRasyBezWybranego$),(0,Nt.U)(t=>this.chooseThreedogz(t)))}usunDobraOdpZPuliDoLosowania(){return this.tenjedenjedyny$.pipe(Br(t=>this.wszystkieRasy$.pipe((0,Nt.U)(r=>this.usunZTablicy(r,t)))))}appendAndShuffle(){return this.tenjedenjedyny$.pipe(Br(t=>this.trzylosowe$.pipe((0,Nt.U)(r=>[...r,t]))),(0,Nt.U)(t=>this.shuffleArray(t)))}refreshAnswers(){this.refreshAnswerSrc.next()}chooseThreedogz(t){let r=3,o=new Array(r),l=t.length,h=new Array(l);for(;r--;){let m=Math.floor(Math.random()*l);o[r]=t[m in h?h[m]:m],h[m]=--l in h?h[l]:l}return o}usunZTablicy(t,r){let o=t.indexOf(r);return t.splice(o,1),t}shuffleArray(t){for(var o,r=t.length;0!=r;)o=Math.floor(Math.random()*r),r--,[t[r],t[o]]=[t[o],t[r]];return t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Na),p.LFG(o8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wp=(()=>{class n{constructor(){this.tablicaRekordow=JSON.parse(localStorage.getItem("wynik")),this.tablicaTrybHARD=JSON.parse(localStorage.getItem("wynikHard")),this.trybGryHard=!1,this.brak=[],this.objectIndx=0,this.personalIndx=0}getHardRecords(){return null!=this.tablicaTrybHARD?(this.tablicaTrybHARD=this.sortTab(this.tablicaTrybHARD),(0,yn.of)(this.tablicaTrybHARD)):(this.tablicaTrybHARD=this.brak,this.sendData(this.tablicaTrybHARD,!0),(0,yn.of)(this.tablicaTrybHARD))}updateRecord(t,r,o){return o?(this.objectIndx=this.tablicaTrybHARD.findIndex(l=>l.name==t),this.tablicaTrybHARD[this.objectIndx].score=r,this.tablicaTrybHARD=this.sortTab(this.tablicaTrybHARD),this.tablicaTrybHARD):(this.objectIndx=this.tablicaRekordow.findIndex(l=>l.name==t),this.tablicaRekordow[this.objectIndx].score=r,this.tablicaRekordow=this.sortTab(this.tablicaRekordow),this.tablicaRekordow)}findUser(t,r){return r?-1==this.tablicaTrybHARD.findIndex(o=>o.name==t)?(console.log("nie znaleziono"),!1):(console.log("znaleziono"),!0):-1==this.tablicaRekordow.findIndex(o=>o.name==t)?(console.log("nie znaleziono"),!1):(console.log("znaleziono"),!0)}PersonalBest(t,r){return r?(this.personalIndx=this.tablicaTrybHARD.findIndex(o=>o.name==t),console.log("dla jego personal best (tablicaHARD) is: ",this.tablicaTrybHARD[this.personalIndx].score),this.tablicaTrybHARD[this.personalIndx].score):(this.personalIndx=this.tablicaRekordow.findIndex(o=>o.name==t),console.log("dla jego personal best (tablicaEZ) is: ",this.tablicaRekordow[this.personalIndx].score),this.tablicaRekordow[this.personalIndx].score)}addRecord(t,r,o){return o?(this.tablicaTrybHARD.push({$key:"key",name:t,score:r}),this.tablicaTrybHARD):(this.tablicaRekordow.push({$key:"key",name:t,score:r}),this.tablicaRekordow)}removeRecord(t,r){return r?(this.tablicaTrybHARD.splice(t,1),this.tablicaTrybHARD):(this.tablicaRekordow.splice(t,1),this.tablicaRekordow)}sendData(t,r){r?localStorage.setItem("wynikHard",JSON.stringify(t)):localStorage.setItem("wynik",JSON.stringify(t))}sortTab(t){return t.sort((r,o)=>o.score-r.score)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class La extends Ur.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new hr.N;return this._value}next(e){super.next(this._value=e)}}let Ld=(()=>{class n{constructor(t){this.jedenWybranyPiesService=t,this.nazwagracza="",this.trybHard=!1,this.gameInProgress=!0,this.zostaloPominiec=3,this.koniecPomijania=!1,this.dataStringSource=new La(""),this.dataBoolSource=new La(!1),this.runningGameSubject=new La(!0),this.liczaPominiecSubject=new La(3),this.koniecPomijaniaSubject=new La(!1),this.wyswietlajEkranDoWpisaniaUzytkownikaSubject=new La(!1),this.przegranaSubject=new La(!1),this.dataBoolean$=this.dataBoolSource.asObservable(),this.dataString$=this.dataStringSource.asObservable(),this.liczbaPominiec$=this.liczaPominiecSubject.asObservable(),this.stopPomijania$=this.koniecPomijaniaSubject.asObservable(),this.wyswietlajEkranDoWpisaniaUzytkownika$=this.wyswietlajEkranDoWpisaniaUzytkownikaSubject.asObservable(),this.przegrana$=this.przegranaSubject.asObservable(),this.gameStatus$=this.runningGameSubject.asObservable()}saveData(t){this.nazwagracza=t,this.dataStringSource.next(this.nazwagracza)}gameIsRunning(t){this.gameInProgress=t,this.runningGameSubject.next(this.gameInProgress)}clickKolejnyPieselek(){this.zostaloPominiec>0&&(this.jedenWybranyPiesService.changeRandomDog.next(),this.zostaloPominiec--,this.liczaPominiecSubject.next(this.zostaloPominiec)),0==this.zostaloPominiec&&(this.koniecPomijania=!0,this.koniecPomijaniaSubject.next(!0))}resetujLicznik(){this.zostaloPominiec=3,this.liczaPominiecSubject.next(this.zostaloPominiec),this.koniecPomijaniaSubject.next(!1)}wyswietlajEkranDoWpisaniaUzytkownika(t){this.wyswietlajEkranDoWpisaniaUzytkownikaSubject.next(t)}statusPrzegranej(t){this.przegranaSubject.next(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(o8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ep=F(3637),kd=F(6682),I_=F(3522);function b6(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new zd(n,e,t))}}class zd{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Ip(e,this.accumulator,this.seed,this.hasSeed))}}class Ip extends bs.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function c8(n,e){return t=>t.lift(new M_(n,e))}class M_{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new A_(e,this.compare,this.keySelector))}}class A_ extends bs.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class Mp extends bs.L{notifyNext(e,t,r,o,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Ap extends bs.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Qc=F(7444);function Tp(n,e,t,r,o=new Ap(n,t,r)){if(!o.closed)return e instanceof zn.y?e.subscribe(o):(0,Qc.s)(e)(o)}class T_{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new l8(e,this.observables,this.project))}}class l8 extends Mp{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let l=0;l<o;l++)this.toRespond.push(l);for(let l=0;l<o;l++)this.add(Tp(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class Sp{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new xp(e,this.predicate))}}class xp extends bs.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var En=F(7758),ci=F(8939),Dl=(F(4671),F(4486)),Es=F(6034),Ie=F(8239),F1=F(5452),R=F(3854),H1=F(5601);const w6="@firebase/database";let u8="";function Lp(n){u8=n}class x_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,R.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class kp{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const h8=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new x_(e)}}catch(e){}return new kp},ka=h8("localStorage"),zp=h8("sessionStorage"),Jc=new H1.Yd("@firebase/database"),Rp=function(){let n=1;return function(){return n++}}(),Rd=function(n){const e=(0,R.dS)(n),t=new R.gQ;t.update(e);const r=t.digest();return R.US.encodeByteArray(r)},Sl=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Sl.apply(null,r):e+="object"==typeof r?(0,R.Pz)(r):r,e+=" "}return e};let Xc=null,Is=!0;const Pp=function(n,e){(0,R.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Jc.logLevel=H1.in.VERBOSE,Xc=Jc.log.bind(Jc),e&&zp.set("logging_enabled",!0)):"function"==typeof n?Xc=n:(Xc=null,zp.remove("logging_enabled"))},Ar=function(...n){if(!0===Is&&(Is=!1,null===Xc&&!0===zp.get("logging_enabled")&&Pp(!0)),Xc){const e=Sl.apply(null,n);Xc(e)}},xl=function(n){return function(...e){Ar(n,...e)}},Pd=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sl(...n);Jc.error(e)},qo=function(...n){const e=`FIREBASE FATAL ERROR: ${Sl(...n)}`;throw Jc.error(e),new Error(e)},Ui=function(...n){const e="FIREBASE WARNING: "+Sl(...n);Jc.warn(e)},d8=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},O2="[MIN_NAME]",ot="[MAX_NAME]",za=function(n,e){if(n===e)return 0;if(n===O2||e===ot)return-1;if(e===O2||n===ot)return 1;{const t=Hd(n),r=Hd(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Op=function(n,e){return n===e?0:n<e?-1:1},Ra=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,R.Pz)(e))},B1=function(n){if("object"!=typeof n||null===n)return(0,R.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,R.Pz)(e[r]),t+=":",t+=B1(n[e[r]]);return t+="}",t},Vd=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function $r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const f8=function(n){(0,R.hu)(!d8(n),"Invalid JSON number");const r=1023;let o,l,h,m,C;0===n?(l=0,h=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=m+r,h=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(l=0,h=Math.round(n/Math.pow(2,-1074))));const E=[];for(C=52;C;C-=1)E.push(h%2?1:0),h=Math.floor(h/2);for(C=11;C;C-=1)E.push(l%2?1:0),l=Math.floor(l/2);E.push(o?1:0),E.reverse();const T=E.join("");let x="";for(C=0;C<64;C+=8){let P=parseInt(T.substr(C,8),2).toString(16);1===P.length&&(P="0"+P),x+=P}return x.toLowerCase()},Fd=new RegExp("^-?(0*)\\d{1,10}$"),L_=-2147483648,p8=2147483647,Hd=function(n){if(Fd.test(n)){const e=Number(n);if(e>=L_&&e<=p8)return e}return null},p1=function(n){try{n()}catch(e){setTimeout(()=>{throw Ui("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Pa=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Bd{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ui(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class xM{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ar("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ui(e)}}let Nl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const jd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R_="websocket",P_="long_polling";class jp{constructor(e,t,r,o,l=!1,h="",m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ka.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ka.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function V_(n,e,t){let r;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof t,"typeof params must == object"),e===R_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==P_)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return $r(t,(l,h)=>{o.push(l+"="+h)}),r+o.join("&")}class LM{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,R.p$)(this.counters_)}}const $p={},Gp={};function Wp(n){const e=n.toString();return $p[e]||($p[e]=new LM),$p[e]}class Va{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&p1(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class to{constructor(e,t,r,o,l,h,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xl(e),this.stats_=Wp(t),this.urlFn=C=>(this.appCheckToken&&(C.ac=this.appCheckToken),V_(t,P_,C))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Va(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,R.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zl((...l)=>{const[h,m,C,E,T]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=m,this.password=C;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[h,m]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&jd.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){to.forceAllow_=!0}static forceDisallow(){to.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!to.forceAllow_&&(to.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,R.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,R.h$)(t),o=Vd(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,R.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class zl{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Rp(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zl.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){Ar("frame writing exception"),m.stack&&Ar(m.stack),Ar(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ar("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const h=this.pendingSegs.shift();r=r+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,R.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ar("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Zo=null;"undefined"!=typeof MozWebSocket?Zo=MozWebSocket:"undefined"!=typeof WebSocket&&(Zo=WebSocket);let Pl=(()=>{class n{constructor(t,r,o,l,h,m,C){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xl(this.connId),this.stats_=Wp(r),this.connURL=n.connectionURL_(r,m,C,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l){const h={v:"5"};return!(0,R.Yr)()&&"undefined"!=typeof location&&location.hostname&&jd.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),l&&(h.ac=l),V_(t,R_,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ka.set("previous_websocket_failure",!0);try{if((0,R.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${u8}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(l.proxy={origin:m}),this.mySock=new Zo(this.connURL,[],l)}else this.mySock=new Zo(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Zo&&!n.forceDisallow_}static previouslyFailed(){return ka.isInMemoryStorage||!0===ka.get("previous_websocket_failure")}markConnectionHealthy(){ka.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,R.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,R.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=Vd(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class y8{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[to,Pl]}initTransports_(e){const t=Pl&&Pl.isAvailable();let r=t&&!Pl.previouslyFailed();if(e.webSocketOnly&&(t||Ui("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pl];else{const o=this.transports_=[];for(const l of y8.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class m1{constructor(e,t,r,o,l,h,m,C,E,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=C,this.onKill_=E,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xl("c:"+this.id+":"),this.transportManager_=new y8(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Pa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ra("t",e),r=Ra("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ra("t",e),r=Ra("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ra("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Pd("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Pd("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ui("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Pa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ka.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class im{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class sm{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Xd extends sm{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Xd}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Yt(){return new pn("")}function Lt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function H2(n){return n.pieces_.length-n.pieceNum_}function Cn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function tf(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function M6(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function om(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function Sn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new pn(t,0)}function Ft(n){return n.pieceNum_>=n.pieces_.length}function ji(n,e){const t=Lt(n),r=Lt(e);if(null===t)return e;if(t===r)return ji(Cn(n),Cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function am(n,e){const t=M6(n,0),r=M6(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=za(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function _8(n,e){if(H2(n)!==H2(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ms(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(H2(n)>H2(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Ko{constructor(e,t){this.errorPrefix_=t,this.parts_=M6(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,R.ug)(this.parts_[r]);cm(this)}}function cm(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+A6(n))}function A6(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class C8 extends sm{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new C8}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Vl=1e3;let Ol,e4=(()=>{class n extends im{constructor(t,r,o,l,h,m,C,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=h,this.authTokenProvider_=m,this.appCheckTokenProvider_=C,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=xl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");C8.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Xd.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,h={r:l,a:t,b:r};this.log_((0,R.Pz)(h)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new R.BH,o={p:t._path.toString(),q:t._queryObject},l={action:"g",request:o,onComplete:m=>{const C=m.d;"ok"===m.s?(this.onDataUpdate_(o.p,C,!1,null),r.resolve(C)):r.reject(C)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[h];void 0===m||l!==m||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),r.promise}listen(t,r,o,l){this.initConnection_();const h=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+h),this.listens.has(m)||this.listens.set(m,new Map),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(m).has(h),"listen() called twice for same path/queryId.");const C={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(m).set(h,C),this.connected_&&this.sendListen_(C)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const h={p:o};t.tag&&(h.q=r._queryObject,h.t=t.tag),h.h=t.hashFn(),this.sendRequest("q",h,C=>{const E=C.d,T=C.s;n.warnOnListenWarnings_(E,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",C),"ok"!==T&&this.removeListen_(o,l),t.onComplete&&t.onComplete(T,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,R.r3)(t,"w")){const o=(0,R.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',h=r._path.toString();Ui(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,R.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,R.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const h=l.s,m=l.d||"error";this.authToken_===t&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const h={p:t};l&&(h.q=o,h.t=l),this.sendRequest("n",h)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const h={p:r,d:o};this.log_("onDisconnect "+t,h),this.sendRequest(t,h,m=>{l&&setTimeout(()=>{l(m.s,m.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,h){this.initConnection_();const m={p:r,d:o};void 0!==h&&(m.h=h),this.outstandingPuts_.push({action:t,request:m,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,h=>{this.log_(r+" response",h),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(h.s,h.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,R.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Pd("Unrecognized action received from server: "+(0,R.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),h=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let C=!1,E=null;const T=function(){E?E.close():(C=!0,l())};t.realtime_={close:T,sendRequest:function(B){(0,R.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(B)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,Q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);C?Ar("getToken() completed but was canceled"):(Ar("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=Q&&Q.token,E=new m1(h,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Ae=>{Ui(Ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(B){t.log_("Failed to get token: "+B),C||(t.repoInfo_.nodeAdmin&&Ui(B),T())}}})()}interrupt(t){Ar("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ar("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Vl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(h=>B1(h)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new pn(t).toString();let l;if(this.listens.has(o)){const h=this.listens.get(o);l=h.get(r),h.delete(r),0===h.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){Ar("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ar("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,R.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+u8.replace(/\./g,"-")]=1,(0,R.uI)()?t["framework.cordova"]=1:(0,R.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Xd.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Rt(e,t)}}class T6{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Rt(O2,e),o=new Rt(O2,t);return 0!==this.compare(r,o)}minPost(){return Rt.MIN}}class lm extends T6{static get __EMPTY_NODE(){return Ol}static set __EMPTY_NODE(e){Ol=e}compare(e,t){return za(e.name,t.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Rt.MIN}maxPost(){return new Rt(ot,Ol)}makePost(e,t){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rt(e,Ol)}toString(){return".key"}}const Yo=new lm;class D6{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=t?r(e.key,t):1,o&&(h*=-1),h<0)e=this.isReverse_?e.left:e.right;else{if(0===h){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let M8,Qo=(()=>{class n{constructor(t,r,o,l,h){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:$i.EMPTY_NODE,this.right=null!=h?h:$i.EMPTY_NODE}copy(t,r,o,l,h){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const h=o(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return $i.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return $i.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $i{constructor(e,t=$i.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $i(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Qo.BLACK,null,null))}remove(e){return new $i(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new D6(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new D6(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new D6(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new D6(this.root_,null,this.comparator_,!0,e)}}function um(n,e){return za(n.name,e.name)}function I8(n,e){return za(n,e)}$i.EMPTY_NODE=new class{copy(e,t,r,o,l){return this}insert(e,t,r){return new Qo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Jo=function(n){return"number"==typeof n?"number:"+f8(n):"string:"+n},Fl=function(n){if(n.isLeafNode()){const e=n.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(n===M8||n.isEmpty(),"priority of unexpected type.");(0,R.hu)(n===M8||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dm,J_,t4,S6=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Fl(this.priorityNode_)}static set __childrenNodeConstructor(t){dm=t}static get __childrenNodeConstructor(){return dm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ft(t)?this:".priority"===Lt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Lt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,R.hu)(".priority"!==o||1===H2(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Jo(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?f8(this.value_):this.value_,this.lazyHash_=Rd(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,R.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),h=n.VALUE_TYPE_ORDER.indexOf(o);return(0,R.hu)(l>=0,"Unknown leaf type: "+r),(0,R.hu)(h>=0,"Unknown leaf type: "+o),l===h?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:h-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const In=new class extends T6{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?za(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Rt.MIN}maxPost(){return new Rt(ot,new S6("[PRIORITY-POST]",t4))}makePost(e,t){const r=J_(e);return new Rt(t,new S6("[PRIORITY-POST]",r))}toString(){return".priority"}},rf=Math.log(2);class pm{constructor(e){this.count=parseInt(Math.log(e+1)/rf,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const A8=function(n,e,t,r){n.sort(e);const o=function(C,E){const T=E-C;let x,P;if(0===T)return null;if(1===T)return x=n[C],P=t?t(x):x,new Qo(P,x.node,Qo.BLACK,null,null);{const B=parseInt(T/2,10)+C,Q=o(C,B),Ae=o(B+1,E);return x=n[B],P=t?t(x):x,new Qo(P,x.node,Qo.BLACK,Q,Ae)}},m=function(C){let E=null,T=null,x=n.length;const P=function(Q,Ae){const Ve=x-Q,Ye=x;x-=Q;const bt=o(Ve+1,Ye),Jt=n[Ve],wt=t?t(Jt):Jt;B(new Qo(wt,Jt.node,Ae,null,bt))},B=function(Q){E?(E.left=Q,E=Q):(T=Q,E=Q)};for(let Q=0;Q<C.count;++Q){const Ae=C.nextBitIsOne(),Ve=Math.pow(2,C.count-(Q+1));Ae?P(Ve,Qo.BLACK):(P(Ve,Qo.BLACK),P(Ve,Qo.RED))}return T}(new pm(n.length));return new $i(r||e,m)};let T8;const x6={};class no{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,R.hu)(x6&&In,"ChildrenNode.ts has not been loaded"),T8=T8||new no({".priority":x6},{".priority":In}),T8}get(e){const t=(0,R.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $i?t:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,R.hu)(e!==Yo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(Rt.Wrap);let m,h=l.getNext();for(;h;)o=o||e.isDefinedOn(h.node),r.push(h),h=l.getNext();m=o?A8(r,e.getCompare()):x6;const C=e.toString(),E=Object.assign({},this.indexSet_);E[C]=e;const T=Object.assign({},this.indexes_);return T[C]=m,new no(T,E)}addToIndexes(e,t){const r=(0,R.UI)(this.indexes_,(o,l)=>{const h=(0,R.DV)(this.indexSet_,l);if((0,R.hu)(h,"Missing index implementation for "+l),o===x6){if(h.isDefinedOn(e.node)){const m=[],C=t.getIterator(Rt.Wrap);let E=C.getNext();for(;E;)E.name!==e.name&&m.push(E),E=C.getNext();return m.push(e),A8(m,h.getCompare())}return x6}{const m=t.get(e.name);let C=o;return m&&(C=C.remove(new Rt(e.name,m))),C.insert(e,e.node)}});return new no(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,R.UI)(this.indexes_,o=>{if(o===x6)return o;{const l=t.get(e.name);return l?o.remove(new Rt(e.name,l)):o}});return new no(r,this.indexSet_)}}let Ul,At=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Fl(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ul||(Ul=new n(new $i(I8),null,no.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ul}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Ul:r}}getChild(t){const r=Lt(t);return null===r?this:this.getImmediateChild(r).getChild(Cn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,R.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Rt(t,r);let l,h;r.isEmpty()?(l=this.children_.remove(t),h=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),h=this.indexMap_.addToIndexes(o,this.children_));const m=l.isEmpty()?Ul:this.priorityNode_;return new n(l,m,h)}}updateChild(t,r){const o=Lt(t);if(null===o)return r;{(0,R.hu)(".priority"!==Lt(t)||1===H2(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Cn(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,h=!0;if(this.forEachChild(In,(m,C)=>{r[m]=C.val(t),o++,h&&n.INTEGER_REGEXP_.test(m)?l=Math.max(l,Number(m)):h=!1}),!t&&h&&l<2*o){const m=[];for(const C in r)m[C]=r[C];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Jo(this.getPriority().val())+":"),this.forEachChild(In,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":Rd(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const h=l.getPredecessorKey(new Rt(t,r));return h?h.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Rt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Rt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Rt.Wrap);let h=l.peek();for(;null!=h&&r.compare(h,t)<0;)l.getNext(),h=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Rt.Wrap);let h=l.peek();for(;null!=h&&r.compare(h,t)>0;)l.getNext(),h=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xo?-1:0}withIndex(t){if(t===Yo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Yo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(In),l=r.getIterator(In);let h=o.getNext(),m=l.getNext();for(;h&&m;){if(h.name!==m.name||!h.node.equals(m.node))return!1;h=o.getNext(),m=l.getNext()}return null===h&&null===m}return!1}return!1}}resolveIndex_(t){return t===Yo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Xo=new class extends At{constructor(){super(new $i(I8),At.EMPTY_NODE,no.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return At.EMPTY_NODE}isEmpty(){return!1}};function jn(n,e=null){if(null===n)return At.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new S6(n,jn(e));if(n instanceof Array){let t=At.EMPTY_NODE;return $r(n,(r,o)=>{if((0,R.r3)(n,r)&&"."!==r.substring(0,1)){const l=jn(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(jn(e))}{const t=[];let r=!1;if($r(n,(h,m)=>{if("."!==h.substring(0,1)){const C=jn(m);C.isEmpty()||(r=r||!C.getPriority().isEmpty(),t.push(new Rt(h,C)))}}),0===t.length)return At.EMPTY_NODE;const l=A8(t,um,h=>h.name,I8);if(r){const h=A8(t,In.getCompare());return new At(l,jn(e),new no({".priority":h},{".priority":In}))}return new At(l,jn(e),no.Default)}}Object.defineProperties(Rt,{MIN:{value:new Rt(O2,At.EMPTY_NODE)},MAX:{value:new Rt(ot,Xo)}}),lm.__EMPTY_NODE=At.EMPTY_NODE,S6.__childrenNodeConstructor=At,M8=Xo,t4=Xo,function(n){J_=n}(jn);class sf extends T6{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!Ft(e)&&".priority"!==Lt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?za(e.name,t.name):l}makePost(e,t){const r=jn(e),o=At.EMPTY_NODE.updateChild(this.indexPath_,r);return new Rt(t,o)}maxPost(){const e=At.EMPTY_NODE.updateChild(this.indexPath_,Xo);return new Rt(ot,e)}toString(){return M6(this.indexPath_,0).join("/")}}const of=new class extends T6{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?za(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Rt.MIN}maxPost(){return Rt.MAX}makePost(e,t){const r=jn(e);return new Rt(t,r)}toString(){return".value"}},L6="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eC=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=L6.charAt(t%64),t=Math.floor(t/64);(0,R.hu)(0===t,"Cannot push at time == 0");let h=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=L6.charAt(e[o]);return(0,R.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),cf=function(n){if(n===""+p8)return"-";const e=Hd(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let h=0;h<t.length;h++)t[h]=n.charAt(h);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ot;const l=L6.charAt(L6.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},xn=function(n){if(n===""+L_)return O2;const e=Hd(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+p8:(delete t[t.length-1],t.join("")):(t[t.length-1]=L6.charAt(L6.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function D8(n){return{type:"value",snapshotNode:n}}function jl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function U1(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function n4(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ym{constructor(e){this.index_=e}updateChild(e,t,r,o,l,h){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(null!=h&&(r.isEmpty()?e.hasChild(t)?h.trackChildChange(U1(t,m)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(jl(t,r)):h.trackChildChange(n4(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(In,(o,l)=>{t.hasChild(o)||r.trackChildChange(U1(o,l))}),t.isLeafNode()||t.forEachChild(In,(o,l)=>{if(e.hasChild(o)){const h=e.getImmediateChild(o);h.equals(l)||r.trackChildChange(n4(o,l,h))}else r.trackChildChange(jl(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?At.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class $l{constructor(e){this.indexedFilter_=new ym(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$l.getStartPost_(e),this.endPost_=$l.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,h){return this.matches(new Rt(t,r))||(r=At.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,h)}updateFullNode(e,t,r){t.isLeafNode()&&(t=At.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(At.EMPTY_NODE);const l=this;return t.forEachChild(In,(h,m)=>{l.matches(new Rt(h,m))||(o=o.updateImmediateChild(h,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class tC{constructor(e){this.rangedFilter_=new $l(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,h){return this.rangedFilter_.matches(new Rt(t,r))||(r=At.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,h):this.fullLimitUpdateChild_(e,t,r,l,h)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=At.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=At.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;l.hasNext()&&h<this.limit_;){const m=l.getNext();let C;if(C=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),m)<=0:this.index_.compare(m,this.rangedFilter_.getEndPost())<=0,!C)break;o=o.updateImmediateChild(m.name,m.node),h++}}else{let l,h,m,C;if(o=t.withIndex(this.index_),o=o.updatePriority(At.EMPTY_NODE),this.reverse_){C=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();m=(P,B)=>x(B,P)}else C=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),m=this.index_.getCompare();let E=0,T=!1;for(;C.hasNext();){const x=C.getNext();!T&&m(l,x)<=0&&(T=!0),T&&E<this.limit_&&m(x,h)<=0?E++:o=o.updateImmediateChild(x.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let h;if(this.reverse_){const x=this.index_.getCompare();h=(P,B)=>x(B,P)}else h=this.index_.getCompare();const m=e;(0,R.hu)(m.numChildren()===this.limit_,"");const C=new Rt(t,r),E=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),T=this.rangedFilter_.matches(C);if(m.hasChild(t)){const x=m.getImmediateChild(t);let P=o.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||m.hasChild(P.name));)P=o.getChildAfterChild(this.index_,P,this.reverse_);const B=null==P?1:h(P,C);if(T&&!r.isEmpty()&&B>=0)return null!=l&&l.trackChildChange(n4(t,r,x)),m.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(U1(t,x));const Ae=m.updateImmediateChild(t,At.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=l&&l.trackChildChange(jl(P.name,P.node)),Ae.updateImmediateChild(P.name,P.node)):Ae}}return r.isEmpty()?e:T&&h(E,C)>=0?(null!=l&&(l.trackChildChange(U1(E.name,E.node)),l.trackChildChange(jl(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(E.name,At.EMPTY_NODE)):e}}class Gl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=In}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O2}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ot}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===In}copy(){const e=new Gl;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uf(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function r4(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Wl(n,e){const t=n.copy();return t.index_=e,t}function df(n){const e={};if(n.isDefault())return e;let t;return n.index_===In?t="$priority":n.index_===of?t="$value":n.index_===Yo?t="$key":((0,R.hu)(n.index_ instanceof sf,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,R.Pz)(t),n.startSet_&&(e.startAt=(0,R.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,R.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,R.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,R.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ff(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==In&&(e.i=n.index_.toString()),e}class ql extends im{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=xl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const h=ql.getListenId_(e,r),m={};this.listens_[h]=m;const C=df(e._queryParams);this.restRequest_(l+".json",C,(E,T)=>{let x=T;if(404===E&&(x=null,E=null),null===E&&this.onDataUpdate_(l,x,!1,r),(0,R.DV)(this.listens_,h)===m){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",o(P,null)}})}unlisten(e,t){const r=ql.getListenId_(e,t);delete this.listens_[r]}get(e){const t=df(e._queryParams),r=e._path.toString(),o=new R.BH;return this.restRequest_(r+".json",t,(l,h)=>{let m=h;404===l&&(m=null,l=null),null===l?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(t);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let C=null;if(m.status>=200&&m.status<300){try{C=(0,R.cI)(m.responseText)}catch(E){Ui("Failed to parse JSON response for "+h+": "+m.responseText)}r(null,C)}else 401!==m.status&&404!==m.status&&Ui("Got unsuccessful REST response for "+h+" Status: "+m.status),r(m.status);r=null}},m.open("GET",h,!0),m.send()})}}class rC{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function S8(){return{value:null,children:new Map}}function k6(n,e,t){if(Ft(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Lt(e);n.children.has(r)||n.children.set(r,S8()),k6(n.children.get(r),e=Cn(e),t)}}function pf(n,e){if(Ft(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(In,(r,o)=>{k6(n,new pn(r),o)}),pf(n,e)}}if(n.children.size>0){const t=Lt(e);return e=Cn(e),n.children.has(t)&&pf(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function x8(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{x8(o,new pn(e.toString()+"/"+r),t)})}class wm{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$r(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class VM{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wm(e);const r=1e4+2e4*Math.random();Pa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;$r(e,(o,l)=>{l>0&&(0,R.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),Pa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var g1=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(g1||(g1={})),g1))();function L8(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class gf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=g1.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ft(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new gf(Yt(),t,this.revert)}}return(0,R.hu)(Lt(this.path)===e,"operationForChild called for unrelated child."),new gf(Cn(this.path),this.affectedTree,this.revert)}}class Gi{constructor(e,t){this.source=e,this.path=t,this.type=g1.LISTEN_COMPLETE}operationForChild(e){return Ft(this.path)?new Gi(this.source,Yt()):new Gi(this.source,Cn(this.path))}}class z6{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=g1.OVERWRITE}operationForChild(e){return Ft(this.path)?new z6(this.source,Yt(),this.snap.getImmediateChild(e)):new z6(this.source,Cn(this.path),this.snap)}}class Zl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=g1.MERGE}operationForChild(e){if(Ft(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new z6(this.source,Yt(),t.value):new Zl(this.source,Yt(),t)}return(0,R.hu)(Lt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Zl(this.source,Cn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class i4{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ft(e))return this.isFullyInitialized()&&!this.filtered_;const t=Lt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Im{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function R6(n,e,t,r,o,l){const h=r.filter(m=>m.type===t);h.sort((m,C)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,R.g5)("Should only compare child_ events.");const r=new Rt(e.childName,e.snapshotNode),o=new Rt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,m,C)),h.forEach(m=>{const C=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,l);o.forEach(E=>{E.respondsTo(m.type)&&e.push(E.createEvent(C,n.query_))})})}function Kl(n,e){return{eventCache:n,serverCache:e}}function s4(n,e,t,r){return Kl(new i4(e,t,r),n.serverCache)}function Am(n,e,t,r){return Kl(n.eventCache,new i4(e,t,r))}function P6(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function o4(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let vf;class Mn{constructor(e,t=(()=>(vf||(vf=new $i(Op)),vf))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return $r(e,(r,o)=>{t=t.set(new pn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Yt(),value:this.value};if(Ft(e))return null;{const r=Lt(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(Cn(e),t);return null!=l?{path:Sn(new pn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ft(e))return this;{const t=Lt(e),r=this.children.get(t);return null!==r?r.subtree(Cn(e)):new Mn(null)}}set(e,t){if(Ft(e))return new Mn(t,this.children);{const r=Lt(e),l=(this.children.get(r)||new Mn(null)).set(Cn(e),t),h=this.children.insert(r,l);return new Mn(this.value,h)}}remove(e){if(Ft(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=Lt(e),r=this.children.get(t);if(r){const o=r.remove(Cn(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new Mn(null):new Mn(this.value,l)}return this}}get(e){if(Ft(e))return this.value;{const t=Lt(e),r=this.children.get(t);return r?r.get(Cn(e)):null}}setTree(e,t){if(Ft(e))return t;{const r=Lt(e),l=(this.children.get(r)||new Mn(null)).setTree(Cn(e),t);let h;return h=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Mn(this.value,h)}}fold(e){return this.fold_(Yt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(Sn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Yt(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Ft(e))return null;{const l=Lt(e),h=this.children.get(l);return h?h.findOnPath_(Cn(e),Sn(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Yt(),t)}foreachOnPath_(e,t,r){if(Ft(e))return this;{this.value&&r(t,this.value);const o=Lt(e),l=this.children.get(o);return l?l.foreachOnPath_(Cn(e),Sn(t,o),r):new Mn(null)}}foreach(e){this.foreach_(Yt(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Sn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ro{constructor(e){this.writeTree_=e}static empty(){return new ro(new Mn(null))}}function Yl(n,e,t){if(Ft(e))return new ro(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const h=ji(o,e);return l=l.updateChild(h,t),new ro(n.writeTree_.set(o,l))}{const o=new Mn(t),l=n.writeTree_.setTree(e,o);return new ro(l)}}}function V6(n,e,t){let r=n;return $r(t,(o,l)=>{r=Yl(r,Sn(e,o),l)}),r}function a4(n,e){if(Ft(e))return ro.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new ro(t)}}function k8(n,e){return null!=li(n,e)}function li(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ji(t.path,e)):null}function O6(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(In,(r,o)=>{e.push(new Rt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Rt(r,o.value))}),e}function Fa(n,e){if(Ft(e))return n;{const t=li(n,e);return new ro(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function yf(n){return n.writeTree_.isEmpty()}function Ha(n,e){return io(Yt(),n.writeTree_,e)}function io(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,R.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=io(Sn(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Sn(n,".priority"),r)),t}}function Ba(n,e){return wf(e,n)}function _f(n,e){if(n.snap)return Ms(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ms(Sn(n.path,t),e))return!0;return!1}function H6(n){return n.visible}function l4(n,e,t){let r=ro.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const h=l.path;let m;if(l.snap)Ms(t,h)?(m=ji(t,h),r=Yl(r,m,l.snap)):Ms(h,t)&&(m=ji(h,t),r=Yl(r,Yt(),l.snap.getChild(m)));else{if(!l.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Ms(t,h))m=ji(t,h),r=V6(r,m,l.children);else if(Ms(h,t))if(m=ji(h,t),Ft(m))r=V6(r,Yt(),l.children);else{const C=(0,R.DV)(l.children,Lt(m));if(C){const E=C.getChild(Cn(m));r=Yl(r,Yt(),E)}}}}}return r}function u4(n,e,t,r,o){if(r||o){const l=Fa(n.visibleWrites,e);return!o&&yf(l)?t:o||null!=t||k8(l,Yt())?Ha(l4(n.allWrites,function(E){return(E.visible||o)&&(!r||!~r.indexOf(E.writeId))&&(Ms(E.path,e)||Ms(e,E.path))},e),t||At.EMPTY_NODE):null}{const l=li(n.visibleWrites,e);if(null!=l)return l;{const h=Fa(n.visibleWrites,e);return yf(h)?t:null!=t||k8(h,Yt())?Ha(h,t||At.EMPTY_NODE):null}}}function Ql(n,e,t,r){return u4(n.writeTree,n.treePath,e,t,r)}function R8(n,e){return function(n,e,t){let r=At.EMPTY_NODE;const o=li(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(In,(l,h)=>{r=r.updateImmediateChild(l,h)}),r;if(t){const l=Fa(n.visibleWrites,e);return t.forEachChild(In,(h,m)=>{const C=Ha(Fa(l,new pn(h)),m);r=r.updateImmediateChild(h,C)}),O6(l).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}return O6(Fa(n.visibleWrites,e)).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}(n.writeTree,n.treePath,e)}function Cf(n,e,t,r){return function(n,e,t,r,o){(0,R.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=Sn(e,t);if(k8(n.visibleWrites,l))return null;{const h=Fa(n.visibleWrites,l);return yf(h)?o.getChild(t):Ha(h,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Jl(n,e){return function(n,e){return li(n.visibleWrites,e)}(n.writeTree,Sn(n.treePath,e))}function P8(n,e,t){return function(n,e,t,r){const o=Sn(e,t),l=li(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?Ha(Fa(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bf(n,e){return wf(Sn(n.treePath,e),n.writeTree)}function wf(n,e){return{treePath:n,writeTree:e}}class aC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,R.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,n4(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,U1(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,jl(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,n4(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const xm=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class V8{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new i4(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return P8(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:o4(this.viewCache_),l=function(n,e,t,r,o,l){return function(n,e,t,r,o,l,h){let m;const C=Fa(n.visibleWrites,e),E=li(C,Yt());if(null!=E)m=E;else{if(null==t)return[];m=Ha(C,t)}if(m=m.withIndex(h),m.isEmpty()||m.isLeafNode())return[];{const T=[],x=h.getCompare(),P=l?m.getReverseIteratorFrom(r,h):m.getIteratorFrom(r,h);let B=P.getNext();for(;B&&T.length<o;)0!==x(B,r)&&T.push(B),B=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function Ef(n,e,t,r,o,l){const h=e.eventCache;if(null!=Jl(r,t))return e;{let m,C;if(Ft(t))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=o4(e),x=R8(r,E instanceof At?E:At.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),x,l)}else{const E=Ql(r,o4(e));m=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const E=Lt(t);if(".priority"===E){(0,R.hu)(1===H2(t),"Can't have a priority with additional path components");const T=h.getNode();C=e.serverCache.getNode();const x=Cf(r,t,T,C);m=null!=x?n.filter.updatePriority(T,x):h.getNode()}else{const T=Cn(t);let x;if(h.isCompleteForChild(E)){C=e.serverCache.getNode();const P=Cf(r,t,h.getNode(),C);x=null!=P?h.getNode().getImmediateChild(E).updateChild(T,P):h.getNode().getImmediateChild(E)}else x=P8(r,E,e.serverCache);m=null!=x?n.filter.updateChild(h.getNode(),E,x,T,o,l):h.getNode()}}return s4(e,m,h.isFullyInitialized()||Ft(t),n.filter.filtersNodes())}}function O8(n,e,t,r,o,l,h,m){const C=e.serverCache;let E;const T=h?n.filter:n.filter.getIndexedFilter();if(Ft(t))E=T.updateFullNode(C.getNode(),r,null);else if(T.filtersNodes()&&!C.isFiltered()){const B=C.getNode().updateChild(t,r);E=T.updateFullNode(C.getNode(),B,null)}else{const B=Lt(t);if(!C.isCompleteForPath(t)&&H2(t)>1)return e;const Q=Cn(t),Ve=C.getNode().getImmediateChild(B).updateChild(Q,r);E=".priority"===B?T.updatePriority(C.getNode(),Ve):T.updateChild(C.getNode(),B,Ve,Q,xm,null)}const x=Am(e,E,C.isFullyInitialized()||Ft(t),T.filtersNodes());return Ef(n,x,t,o,new V8(o,x,l),m)}function F8(n,e,t,r,o,l,h){const m=e.eventCache;let C,E;const T=new V8(o,e,l);if(Ft(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,h),C=s4(e,E,!0,n.filter.filtersNodes());else{const x=Lt(t);if(".priority"===x)E=n.filter.updatePriority(e.eventCache.getNode(),r),C=s4(e,E,m.isFullyInitialized(),m.isFiltered());else{const P=Cn(t),B=m.getNode().getImmediateChild(x);let Q;if(Ft(P))Q=r;else{const Ae=T.getCompleteChild(x);Q=null!=Ae?".priority"===tf(P)&&Ae.getChild(om(P)).isEmpty()?Ae:Ae.updateChild(P,r):At.EMPTY_NODE}C=B.equals(Q)?e:s4(e,n.filter.updateChild(m.getNode(),x,Q,P,T,h),m.isFullyInitialized(),n.filter.filtersNodes())}}return C}function Lm(n,e){return n.eventCache.isCompleteForChild(e)}function hC(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function If(n,e,t,r,o,l,h,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,C=e;E=Ft(t)?r:new Mn(null).setTree(t,r);const T=e.serverCache.getNode();return E.children.inorderTraversal((x,P)=>{if(T.hasChild(x)){const Q=hC(0,e.serverCache.getNode().getImmediateChild(x),P);C=O8(n,C,new pn(x),Q,o,l,h,m)}}),E.children.inorderTraversal((x,P)=>{const B=!e.serverCache.isCompleteForChild(x)&&void 0===P.value;if(!T.hasChild(x)&&!B){const Ae=hC(0,e.serverCache.getNode().getImmediateChild(x),P);C=O8(n,C,new pn(x),Ae,o,l,h,m)}}),C}class UM{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new ym(r.getIndex()),l=function(n){return n.loadsAllData()?new ym(n.getIndex()):n.hasLimit()?new tC(n):new $l(n)}(r);this.processor_=function(n){return{filter:n}}(l);const h=t.serverCache,m=t.eventCache,C=o.updateFullNode(At.EMPTY_NODE,h.getNode(),null),E=l.updateFullNode(At.EMPTY_NODE,m.getNode(),null),T=new i4(C,h.isFullyInitialized(),o.filtersNodes()),x=new i4(E,m.isFullyInitialized(),l.filtersNodes());this.viewCache_=Kl(x,T),this.eventGenerator_=new Im(this.query_)}get query(){return this.query_}}function fC(n,e){const t=o4(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ft(e)&&!t.getImmediateChild(Lt(e)).isEmpty())?t.getChild(e):null}function zm(n){return 0===n.eventRegistrations_.length}function H8(n,e,t){const r=[];if(t){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const h=l.createCancelEvent(t,o);h&&r.push(h)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const h=n.eventRegistrations_[l];if(h.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(h)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function Rm(n,e,t,r){e.type===g1.MERGE&&null!==e.source.queryId&&((0,R.hu)(o4(n.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(P6(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function(n,e,t,r,o){const l=new aC;let h,m;if(t.type===g1.OVERWRITE){const E=t;E.source.fromUser?h=F8(n,e,E.path,E.snap,r,o,l):((0,R.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered()&&!Ft(E.path),h=O8(n,e,E.path,E.snap,r,o,m,l))}else if(t.type===g1.MERGE){const E=t;E.source.fromUser?h=function(n,e,t,r,o,l,h){let m=e;return r.foreach((C,E)=>{const T=Sn(t,C);Lm(e,Lt(T))&&(m=F8(n,m,T,E,o,l,h))}),r.foreach((C,E)=>{const T=Sn(t,C);Lm(e,Lt(T))||(m=F8(n,m,T,E,o,l,h))}),m}(n,e,E.path,E.children,r,o,l):((0,R.hu)(E.source.fromServer,"Unknown source."),m=E.source.tagged||e.serverCache.isFiltered(),h=If(n,e,E.path,E.children,r,o,m,l))}else if(t.type===g1.ACK_USER_WRITE){const E=t;h=E.revert?function(n,e,t,r,o,l){let h;if(null!=Jl(r,t))return e;{const m=new V8(r,e,o),C=e.eventCache.getNode();let E;if(Ft(t)||".priority"===Lt(t)){let T;if(e.serverCache.isFullyInitialized())T=Ql(r,o4(e));else{const x=e.serverCache.getNode();(0,R.hu)(x instanceof At,"serverChildren would be complete if leaf node"),T=R8(r,x)}T=T,E=n.filter.updateFullNode(C,T,l)}else{const T=Lt(t);let x=P8(r,T,e.serverCache);null==x&&e.serverCache.isCompleteForChild(T)&&(x=C.getImmediateChild(T)),E=null!=x?n.filter.updateChild(C,T,x,Cn(t),m,l):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(C,T,At.EMPTY_NODE,Cn(t),m,l):C,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=Ql(r,o4(e)),h.isLeafNode()&&(E=n.filter.updateFullNode(E,h,l)))}return h=e.serverCache.isFullyInitialized()||null!=Jl(r,Yt()),s4(e,E,h,n.filter.filtersNodes())}}(n,e,E.path,r,o,l):function(n,e,t,r,o,l,h){if(null!=Jl(o,t))return e;const m=e.serverCache.isFiltered(),C=e.serverCache;if(null!=r.value){if(Ft(t)&&C.isFullyInitialized()||C.isCompleteForPath(t))return O8(n,e,t,C.getNode().getChild(t),o,l,m,h);if(Ft(t)){let E=new Mn(null);return C.getNode().forEachChild(Yo,(T,x)=>{E=E.set(new pn(T),x)}),If(n,e,t,E,o,l,m,h)}return e}{let E=new Mn(null);return r.foreach((T,x)=>{const P=Sn(t,T);C.isCompleteForPath(P)&&(E=E.set(T,C.getNode().getChild(P)))}),If(n,e,t,E,o,l,m,h)}}(n,e,E.path,E.affectedTree,r,o,l)}else{if(t.type!==g1.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+t.type);h=function(n,e,t,r,o){const l=e.serverCache;return Ef(n,Am(e,l.getNode(),l.isFullyInitialized()||Ft(t),l.isFiltered()),t,r,xm,o)}(n,e,t.path,r,l)}const C=l.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=P6(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(D8(P6(e)))}}(e,h,C),{viewCache:h,changes:C}}(n.processor_,o,e,t,r);return function(n,e){(0,R.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,R.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,pC(n,l.changes,l.viewCache.eventCache.getNode(),null)}function pC(n,e,t,r){return function(n,e,t,r){const o=[],l=[];return e.forEach(h=>{"child_changed"===h.type&&n.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&l.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(h.childName,h.snapshotNode))}),R6(n,o,"child_removed",e,r,t),R6(n,o,"child_added",e,r,t),R6(n,o,"child_moved",l,r,t),R6(n,o,"child_changed",e,r,t),R6(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Af,U8;class Pm{constructor(){this.views=new Map}}function Ua(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,R.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Rm(l,e,t,r)}{let l=[];for(const h of n.views.values())l=l.concat(Rm(h,e,t,r));return l}}function Om(n,e,t,r,o){const h=n.views.get(e._queryIdentifier);if(!h){let m=Ql(t,o?r:null),C=!1;m?C=!0:r instanceof At?(m=R8(t,r),C=!1):(m=At.EMPTY_NODE,C=!1);const E=Kl(new i4(m,C,!1),new i4(r,o,!1));return new UM(e,E)}return h}function Tf(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function so(n,e){let t=null;for(const r of n.views.values())t=t||fC(r,e);return t}function Hm(n,e){return e._queryParams.loadsAllData()?B8(n):n.views.get(e._queryIdentifier)}function Df(n,e){return null!=Hm(n,e)}function ja(n){return null!=B8(n)}function B8(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Bm=1;class Um{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_={visibleWrites:ro.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function j8(n,e,t,r,o){return function(n,e,t,r,o){(0,R.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Yl(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?$a(n,new z6({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function e2(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,R.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,h=n.allWrites.length-1;for(;o&&h>=0;){const m=n.allWrites[h];m.visible&&(h>=t&&_f(m,r.path)?o=!1:Ms(r.path,m.path)&&(l=!0)),h--}return!!o&&(l?(function(n){n.visibleWrites=l4(n.allWrites,H6,Yt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=a4(n.visibleWrites,r.path):$r(r.children,C=>{n.visibleWrites=a4(n.visibleWrites,Sn(r.path,C))}),!0))}(n.pendingWriteTree_,e)){let l=new Mn(null);return null!=r.snap?l=l.set(Yt(),!0):$r(r.children,h=>{l=l.set(new pn(h),!0)}),$a(n,new gf(r.path,l,t))}return[]}function $8(n,e,t){return $a(n,new z6({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function h4(n,e,t,r){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||Df(l,e))){const m=function(n,e,t,r){const o=e._queryIdentifier,l=[];let h=[];const m=ja(n);if("default"===o)for(const[C,E]of n.views.entries())h=h.concat(H8(E,t,r)),zm(E)&&(n.views.delete(C),E.query._queryParams.loadsAllData()||l.push(E.query));else{const C=n.views.get(o);C&&(h=h.concat(H8(C,t,r)),zm(C)&&(n.views.delete(o),C.query._queryParams.loadsAllData()||l.push(C.query)))}return m&&!ja(n)&&l.push(new((0,R.hu)(Af,"Reference.ts has not been loaded"),Af)(e._repo,e._path)),{removed:l,events:h}}(l,e,t,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const C=m.removed;h=m.events;const E=-1!==C.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(o,(x,P)=>ja(P));if(E&&!T){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const P=function(n){return n.fold((e,t,r)=>{if(t&&ja(t))return[B8(t)];{let o=[];return t&&(o=Tf(t)),$r(r,(l,h)=>{o=o.concat(h)}),o}})}(x);for(let B=0;B<P.length;++B){const Q=P[B],Ae=Q.query,Ve=$m(n,Q);n.listenProvider_.startListening(d4(Ae),W6(n,Ae),Ve.hashFn,Ve.onComplete)}}}if(!T&&C.length>0&&!r)if(E){const x=null;n.listenProvider_.stopListening(d4(e),x)}else C.forEach(x=>{const P=n.queryToTagMap.get(q6(x));n.listenProvider_.stopListening(d4(x),P)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=q6(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,C)}return h}function G8(n,e,t){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(x,P)=>{const B=ji(x,r);o=o||so(P,B),l=l||ja(P)});let m,h=n.syncPointTree_.get(r);h?(l=l||ja(h),o=o||so(h,Yt())):(h=new Pm,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?m=!0:(m=!1,o=At.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,B)=>{const Q=so(B,Yt());Q&&(o=o.updateImmediateChild(P,Q))}));const C=Df(h,e);if(!C&&!e._queryParams.loadsAllData()){const x=q6(e);(0,R.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const P=Bm++;n.queryToTagMap.set(x,P),n.tagToQueryMap.set(P,x)}let T=function(n,e,t,r,o,l){const h=Om(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,h),function(n,e){n.eventRegistrations_.push(e)}(h,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(In,(l,h)=>{r.push(jl(l,h))}),t.isFullyInitialized()&&r.push(D8(t.getNode())),pC(n,r,t.getNode(),e)}(h,t)}(h,e,t,Ba(n.pendingWriteTree_,r),o,m);if(!C&&!l){const x=Hm(h,e);T=T.concat(function(n,e,t){const r=e._path,o=W6(n,e),l=$m(n,t),h=n.listenProvider_.startListening(d4(e),o,l.hashFn,l.onComplete),m=n.syncPointTree_.subtree(r);if(o)(0,R.hu)(!ja(m.value),"If we're adding a query, it shouldn't be shadowed");else{const C=m.fold((E,T,x)=>{if(!Ft(E)&&T&&ja(T))return[B8(T).query];{let P=[];return T&&(P=P.concat(Tf(T).map(B=>B.query))),$r(x,(B,Q)=>{P=P.concat(Q)}),P}});for(let E=0;E<C.length;++E){const T=C[E];n.listenProvider_.stopListening(d4(T),W6(n,T))}}return h}(n,e,x))}return T}function W8(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(h,m)=>{const E=so(m,ji(h,e));if(E)return E});return u4(o,e,l,t,!0)}function $a(n,e){return Lf(e,n.syncPointTree_,null,Ba(n.pendingWriteTree_,Yt()))}function Lf(n,e,t,r){if(Ft(n.path))return bC(n,e,t,r);{const o=e.get(Yt());null==t&&null!=o&&(t=so(o,Yt()));let l=[];const h=Lt(n.path),m=n.operationForChild(h),C=e.children.get(h);if(C&&m){const E=t?t.getImmediateChild(h):null,T=bf(r,h);l=l.concat(Lf(m,C,E,T))}return o&&(l=l.concat(Ua(o,n,r,t))),l}}function bC(n,e,t,r){const o=e.get(Yt());null==t&&null!=o&&(t=so(o,Yt()));let l=[];return e.children.inorderTraversal((h,m)=>{const C=t?t.getImmediateChild(h):null,E=bf(r,h),T=n.operationForChild(h);T&&(l=l.concat(bC(T,m,C,E)))}),o&&(l=l.concat(Ua(o,n,r,t))),l}function $m(n,e){const t=e.query,r=W6(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||At.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=kf(n,t);if(r){const o=q8(r),l=o.path,h=o.queryId,m=ji(l,e);return Xl(n,l,new Gi(L8(h),m))}return[]}(n,t._path,r):function(n,e){return $a(n,new Gi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return h4(n,t,null,l)}}}}function W6(n,e){const t=q6(e);return n.queryToTagMap.get(t)}function q6(n){return n._path.toString()+"$"+n._queryIdentifier}function kf(n,e){return n.tagToQueryMap.get(e)}function q8(n){const e=n.indexOf("$");return(0,R.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function Xl(n,e,t){const r=n.syncPointTree_.get(e);return(0,R.hu)(r,"Missing sync point for query tag that we're tracking"),Ua(r,t,Ba(n.pendingWriteTree_,e),null)}function d4(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,R.hu)(U8,"Reference.ts has not been loaded"),U8)(n._repo,n._path):n}class Z8{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Z8(t)}node(){return this.node_}}class K8{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Sn(this.path_,e);return new K8(this.syncTree_,t)}node(){return W8(this.syncTree_,this.path_)}}const Pf=function(n,e,t){return n&&"object"==typeof n?((0,R.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?EC(n[".sv"],e,t):"object"==typeof n[".sv"]?qm(n[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},EC=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,R.hu)(!1,"Unexpected server value: "+n)}},qm=function(n,e,t){n.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,R.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,R.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const h=o.getValue();return"number"!=typeof h?r:h+r},Vf=function(n,e,t,r){return Z6(e,new K8(t,n),r)},e3=function(n,e,t){return Z6(n,new Z8(e),t)};function Z6(n,e,t){const r=n.getPriority().val(),o=Pf(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const h=n,m=Pf(h.getValue(),e,t);return m!==h.getValue()||o!==h.getPriority().val()?new S6(m,jn(o)):n}{const h=n;return l=h,o!==h.getPriority().val()&&(l=l.updatePriority(new S6(o))),h.forEachChild(In,(m,C)=>{const E=Z6(C,e.getImmediateChild(m),t);E!==C&&(l=l.updateImmediateChild(m,E))}),l}}class Y8{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function t3(n,e){let t=e instanceof pn?e:new pn(e),r=n,o=Lt(t);for(;null!==o;){const l=(0,R.DV)(r.node.children,o)||{children:{},childCount:0};r=new Y8(o,r,l),t=Cn(t),o=Lt(t)}return r}function Ga(n){return n.node.value}function Q8(n,e){n.node.value=e,Hf(n)}function Of(n){return n.node.childCount>0}function n3(n,e){$r(n.node.children,(t,r)=>{e(new Y8(t,n,r))})}function Ff(n,e,t,r){t&&!r&&e(n),n3(n,o=>{Ff(o,e,!0,r)}),t&&r&&e(n)}function r3(n){return new pn(null===n.parent?n.name:r3(n.parent)+"/"+n.name)}function Hf(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Ga(n)&&!Of(n)}(t),o=(0,R.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,Hf(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Hf(n))}(n.parent,n.name,n)}const IC=/[\[\].#$\/\u0000-\u001F\u007F]/,Tr=/[\[\].#$\u0000-\u001F\u007F]/,J8=10485760,X8=function(n){return"string"==typeof n&&0!==n.length&&!IC.test(n)},Ym=function(n){return"string"==typeof n&&0!==n.length&&!Tr.test(n)},i3=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!d8(n)||n&&"object"==typeof n&&(0,R.r3)(n,".sv")},oo=function(n,e,t,r){r&&void 0===e||K6((0,R.gK)(n,"value"),e,t)},K6=function(n,e,t){const r=t instanceof pn?new Ko(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+A6(r));if("function"==typeof e)throw new Error(n+"contains a function "+A6(r)+" with contents = "+e.toString());if(d8(e))throw new Error(n+"contains "+e.toString()+" "+A6(r));if("string"==typeof e&&e.length>J8/3&&(0,R.ug)(e)>J8)throw new Error(n+"contains a string greater than "+J8+" utf8 bytes "+A6(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if($r(e,(h,m)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(l=!0,!X8(h)))throw new Error(n+" contains an invalid key ("+h+") "+A6(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,R.ug)(e),cm(n)})(r,h),K6(n,m,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,R.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+A6(r)+" in addition to actual children.")}},Jm=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,R.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];$r(e,(h,m)=>{const C=new pn(h);if(K6(o,m,Sn(t,C)),".priority"===tf(C)&&!i3(m))throw new Error(o+"contains an invalid value for '"+C.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(C)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=M6(r);for(let h=0;h<l.length;h++)if((".priority"!==l[h]||h!==l.length-1)&&!X8(l[h]))throw new Error(n+"contains an invalid key ("+l[h]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(am);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&Ms(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},Bf=function(n,e,t){if(!t||void 0!==e){if(d8(e))throw new Error((0,R.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!i3(e))throw new Error((0,R.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Q6=function(n,e,t,r){if(!(r&&void 0===t||X8(t)))throw new Error((0,R.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},s3=function(n,e,t,r){if(!(r&&void 0===t||Ym(t)))throw new Error((0,R.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ao=function(n,e){if(".info"===Lt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Uf=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!X8(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ym(n)}(t))throw new Error((0,R.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class jf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function j1(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!_8(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function $f(n,e,t){j1(n,t),co(n,r=>_8(r,e))}function Ts(n,e,t){j1(n,t),co(n,r=>Ms(r,e)||Ms(e,r))}function co(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(lo(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function lo(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Xc&&Ar("event: "+t.toString()),p1(r)}}}const Ds="repo_interrupt";class tg{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=S8(),this.transactionQueueTree_=new Y8,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ng(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function o3(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ng(n)})}function rg(n,e,t,r,o){n.dataUpdateCount++;const l=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let h=[];if(o)if(r){const C=(0,R.UI)(t,E=>jn(E));h=function(n,e,t,r){const o=kf(n,r);if(o){const l=q8(o),h=l.path,m=l.queryId,C=ji(h,e),E=Mn.fromObject(t);return Xl(n,h,new Zl(L8(m),C,E))}return[]}(n.serverSyncTree_,l,C,o)}else{const C=jn(t);h=function(n,e,t,r){const o=kf(n,r);if(null!=o){const l=q8(o),h=l.path,m=l.queryId,C=ji(h,e);return Xl(n,h,new z6(L8(m),C,t))}return[]}(n.serverSyncTree_,l,C,o)}else if(r){const C=(0,R.UI)(t,E=>jn(E));h=function(n,e,t){const r=Mn.fromObject(t);return $a(n,new Zl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,C)}else{const C=jn(t);h=$8(n.serverSyncTree_,l,C)}let m=l;h.length>0&&(m=J6(n,l)),Ts(n.eventQueue_,m,h)}function e5(n,e){Gf(n,"connected",e),!1===e&&function(n){f4(n,"onDisconnectEvents");const e=o3(n),t=S8();x8(n.onDisconnect_,Yt(),(o,l)=>{const h=Vf(o,l,n.serverSyncTree_,e);k6(t,o,h)});let r=[];x8(t,Yt(),(o,l)=>{r=r.concat($8(n.serverSyncTree_,o,l));const h=Kf(n,o);J6(n,h)}),n.onDisconnect_=S8(),Ts(n.eventQueue_,Yt(),r)}(n)}function Gf(n,e,t){const r=new pn("/.info/"+e),o=jn(t);n.infoData_.updateSnapshot(r,o);const l=$8(n.infoSyncTree_,r,o);Ts(n.eventQueue_,r,l)}function c3(n){return n.nextWriteId_++}function t5(n,e,t,r,o){f4(n,"set",{path:e.toString(),value:t,priority:r});const l=o3(n),h=jn(t,r),m=W8(n.serverSyncTree_,e),C=e3(h,m,l),E=c3(n),T=j8(n.serverSyncTree_,e,C,E,!0);j1(n.eventQueue_,T),n.server_.put(e.toString(),h.val(!0),(P,B)=>{const Q="ok"===P;Q||Ui("set at "+e+" failed: "+P);const Ae=e2(n.serverSyncTree_,E,!Q);Ts(n.eventQueue_,e,Ae),B2(0,o,P,B)});const x=Kf(n,e);J6(n,x),Ts(n.eventQueue_,x,[])}function TC(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&pf(n.onDisconnect_,e),B2(0,t,r,o)})}function Wf(n,e,t,r){const o=jn(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&k6(n.onDisconnect_,e,o),B2(0,r,l,h)})}function i5(n,e,t){let r;r=".info"===Lt(e._path)?h4(n.infoSyncTree_,e,t):h4(n.serverSyncTree_,e,t),$f(n.eventQueue_,e._path,r)}function Zf(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ds)}function f4(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ar(t,...e)}function B2(n,e,t,r){e&&p1(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const h=new Error(l);h.code=o,e(h)}})}function s5(n,e,t){return W8(n.serverSyncTree_,e,t)||At.EMPTY_NODE}function l3(n,e=n.transactionQueueTree_){if(e||o5(n,e),Ga(e)){const t=lg(n,e);(0,R.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(E=>E.currentWriteId),o=s5(n,e,r);let l=o;const h=o.hash();for(let E=0;E<t.length;E++){const T=t[E];(0,R.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const x=ji(e,T.path);l=l.updateChild(x,T.currentOutputSnapshotRaw)}const m=l.val(!0),C=e;n.server_.put(C.toString(),m,E=>{f4(n,"transaction put response",{path:C.toString(),status:E});let T=[];if("ok"===E){const x=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(e2(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&x.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();o5(n,t3(n.transactionQueueTree_,e)),l3(n,n.transactionQueueTree_),Ts(n.eventQueue_,e,T);for(let P=0;P<x.length;P++)p1(x[P])}else{if("datastale"===E)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Ui("transaction at "+C.toString()+" failed: "+E);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=E}J6(n,e)}},h)}(n,r3(e),t)}else Of(e)&&n3(e,t=>{l3(n,t)})}function J6(n,e){const t=cg(n,e),r=r3(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const h=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const C=e[m],E=ji(t,C.path);let x,T=!1;if((0,R.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===C.status)T=!0,x=C.abortReason,o=o.concat(e2(n.serverSyncTree_,C.currentWriteId,!0));else if(0===C.status)if(C.retryCount>=25)T=!0,x="maxretry",o=o.concat(e2(n.serverSyncTree_,C.currentWriteId,!0));else{const P=s5(n,C.path,h);C.currentInputSnapshot=P;const B=e[m].update(P.val());if(void 0!==B){K6("transaction failed: Data returned ",B,C.path);let Q=jn(B);"object"==typeof B&&null!=B&&(0,R.r3)(B,".priority")||(Q=Q.updatePriority(P.getPriority()));const Ve=C.currentWriteId,Ye=o3(n),bt=e3(Q,P,Ye);C.currentOutputSnapshotRaw=Q,C.currentOutputSnapshotResolved=bt,C.currentWriteId=c3(n),h.splice(h.indexOf(Ve),1),o=o.concat(j8(n.serverSyncTree_,C.path,bt,C.currentWriteId,C.applyLocally)),o=o.concat(e2(n.serverSyncTree_,Ve,!0))}else T=!0,x="nodata",o=o.concat(e2(n.serverSyncTree_,C.currentWriteId,!0))}Ts(n.eventQueue_,t,o),o=[],T&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===x?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(x),!1,null)))}o5(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)p1(r[m]);l3(n,n.transactionQueueTree_)}(n,lg(n,t),r),r}function cg(n,e){let t,r=n.transactionQueueTree_;for(t=Lt(e);null!==t&&void 0===Ga(r);)r=t3(r,t),t=Lt(e=Cn(e));return r}function lg(n,e){const t=[];return ug(n,e,t),t.sort((r,o)=>r.order-o.order),t}function ug(n,e,t){const r=Ga(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);n3(e,o=>{ug(n,o,t)})}function o5(n,e){const t=Ga(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Q8(e,t.length>0?t:void 0)}n3(e,r=>{o5(n,r)})}function Kf(n,e){const t=r3(cg(n,e)),r=t3(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{Yf(n,o)}),Yf(n,r),Ff(r,o=>{Yf(n,o)}),t}function Yf(n,e){const t=Ga(e);if(t){const r=[];let o=[],l=-1;for(let h=0;h<t.length;h++)3===t[h].status||(1===t[h].status?((0,R.hu)(l===h-1,"All SENT items should be at beginning of queue."),l=h,t[h].status=3,t[h].abortReason="set"):((0,R.hu)(0===t[h].status,"Unexpected transaction status in abort"),t[h].unwatcher(),o=o.concat(e2(n.serverSyncTree_,t[h].currentWriteId,!0)),t[h].onComplete&&r.push(t[h].onComplete.bind(null,new Error("set"),!1,null))));-1===l?Q8(e,void 0):t.length=l+1,Ts(n.eventQueue_,r3(e),o);for(let h=0;h<r.length;h++)p1(r[h])}}const Qf=function(n,e){const t=LC(n),r=t.namespace;return"firebase.com"===t.domain&&qo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&qo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ui("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jp(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new pn(t.pathString)}},LC=function(n){let e="",t="",r="",o="",l="",h=!0,m="https",C=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(m=n.substring(0,E-1),n=n.substring(E+2));let T=n.indexOf("/");-1===T&&(T=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(T,x)),T<x&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(l){}e+="/"+o}return e}(n.substring(T,x)));const P=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ui(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));E=e.indexOf(":"),E>=0?(h="https"===m||"wss"===m,C=parseInt(e.substring(E+1),10)):E=e.length;const B=e.slice(0,E);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const Q=e.indexOf(".");r=e.substring(0,Q).toLowerCase(),t=e.substring(Q+1),l=r}"ns"in P&&(l=P.ns)}return{host:e,port:C,domain:t,subdomain:r,secure:h,scheme:m,pathString:o,namespace:l}};class hg{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Pz)(this.snapshot.exportVal())}}class dg{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fg{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pg{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new R.BH;return TC(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ao("OnDisconnect.remove",this._path);const e=new R.BH;return Wf(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ao("OnDisconnect.set",this._path),oo("OnDisconnect.set",e,this._path,!1);const t=new R.BH;return Wf(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ao("OnDisconnect.setWithPriority",this._path),oo("OnDisconnect.setWithPriority",e,this._path,!1),Bf("OnDisconnect.setWithPriority",t,!1);const r=new R.BH;return function(n,e,t,r,o){const l=jn(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(h,m)=>{"ok"===h&&k6(n.onDisconnect_,e,l),B2(0,o,h,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ao("OnDisconnect.update",this._path),Jm("OnDisconnect.update",e,this._path,!1);const t=new R.BH;return function(n,e,t,r){if((0,R.xb)(t))return Ar("onDisconnect().update() called with empty data.  Don't do anything."),void B2(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&$r(t,(h,m)=>{const C=jn(m);k6(n.onDisconnect_,Sn(e,h),C)}),B2(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class v1{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Ft(this._path)?null:tf(this._path)}get ref(){return new $1(this._repo,this._path)}get _queryIdentifier(){const e=ff(this._queryParams),t=B1(e);return"{}"===t?"default":t}get _queryObject(){return ff(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof v1))return!1;const t=this._repo===e._repo,r=_8(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function u3(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function U2(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Yo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==O2)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==ot)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===In){if(null!=e&&!i3(e)||null!=t&&!i3(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(n.getIndex()instanceof sf||n.getIndex()===of,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function h3(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class $1 extends v1{constructor(e,t){super(e,t,new Gl,!1)}get parent(){const e=om(this._path);return null===e?null:new $1(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Wa{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pn(e),r=qa(this.ref,e);return new Wa(this._node.getChild(t),r,In)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Wa(o,qa(this.ref,r),In)))}hasChild(e){const t=new pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Jf(n,e){return(n=(0,R.m9)(n))._checkNotDeleted("ref"),void 0!==e?qa(n._root,e):n._root}function Xf(n,e){(n=(0,R.m9)(n))._checkNotDeleted("refFromURL");const t=Qf(e,n._repo.repoInfo_.nodeAdmin);Uf("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&qo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Jf(n,t.path.toString())}function qa(n,e){return null===Lt((n=(0,R.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),s3("child","path",t,!1)):s3("child","path",e,!1),new $1(n._repo,Sn(n._path,e));var t}function j2(n,e){n=(0,R.m9)(n),ao("set",n._path),oo("set",e,n._path,!1);const t=new R.BH;return t5(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function X6(n,e){Jm("update",e,n._path,!1);const t=new R.BH;return function(n,e,t,r){f4(n,"update",{path:e.toString(),value:t});let o=!0;const l=o3(n),h={};if($r(t,(m,C)=>{o=!1,h[m]=Vf(Sn(e,m),jn(C),n.serverSyncTree_,l)}),o)Ar("update() called with empty data.  Don't do anything."),B2(0,r,"ok",void 0);else{const m=c3(n),C=function(n,e,t,r){!function(n,e,t,r){(0,R.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=V6(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Mn.fromObject(t);return $a(n,new Zl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,h,m);j1(n.eventQueue_,C),n.server_.merge(e.toString(),t,(E,T)=>{const x="ok"===E;x||Ui("update at "+e+" failed: "+E);const P=e2(n.serverSyncTree_,m,!x),B=P.length>0?J6(n,e):e;Ts(n.eventQueue_,B,P),B2(0,r,E,T)}),$r(t,E=>{const T=Kf(n,Sn(e,E));J6(n,T)}),Ts(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ZM(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,T)=>{const x=ji(E,t);r=r||so(T,x)});let o=n.syncPointTree_.get(t);o?r=r||so(o,Yt()):(o=new Pm,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,h=l?new i4(r,!0,!1):null;return function(n){return P6(n.viewCache_)}(Om(o,e,Ba(n.pendingWriteTree_,e._path),l?h.getNode():At.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=jn(r).withIndex(e._queryParams.getIndex()),l=$8(n.serverSyncTree_,e._path,o);return $f(n.eventQueue_,e._path,l),Promise.resolve(o)},r=>(f4(n,"get for query "+(0,R.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,R.m9)(n))._repo,n).then(e=>new Wa(e,new $1(n._repo,n._path),n._queryParams.getIndex()))}class e0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new hg("value",this,new Wa(e.snapshotNode,new $1(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dg(this,e,t):null}matches(e){return e instanceof e0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class t7{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dg(this,e,t):null}createEvent(e,t){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const r=qa(new $1(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new hg(e.type,this,new Wa(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t7&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function t0(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const C=t,E=(T,x)=>{i5(n._repo,n,m),C(T,x)};E.userCallback=t.userCallback,E.context=t.context,t=E}const h=new fg(t,l||void 0),m="value"===e?new e0(h):new t7(e,h);return function(n,e,t){let r;r=".info"===Lt(e._path)?G8(n.infoSyncTree_,e,t):G8(n.serverSyncTree_,e,t),$f(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>i5(n._repo,n,m)}function a5(n,e,t,r){return t0(n,"value",e,t,r)}function PC(n,e,t,r){return t0(n,"child_added",e,t,r)}function lt(n,e,t,r){return t0(n,"child_changed",e,t,r)}function gg(n,e,t,r){return t0(n,"child_moved",e,t,r)}function vg(n,e,t,r){return t0(n,"child_removed",e,t,r)}function yg(n,e,t){let r=null;const o=t?new fg(t):null;"value"===e?r=new e0(o):e&&(r=new t7(e,o)),i5(n._repo,n,r)}class y1{}class _g extends y1{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oo("endAt",this._value,e._path,!0);const t=r4(e._queryParams,this._value,this._key);if(h3(t),U2(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new v1(e._repo,e._path,t,e._orderByCalled)}}class l5 extends y1{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oo("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Yo?("string"==typeof e&&(e=xn(e)),o=r4(n,e,t)):(r=null==t?O2:xn(t),o=r4(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(h3(t),U2(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new v1(e._repo,e._path,t,e._orderByCalled)}}class VC extends y1{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oo("startAt",this._value,e._path,!0);const t=uf(e._queryParams,this._value,this._key);if(h3(t),U2(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new v1(e._repo,e._path,t,e._orderByCalled)}}class n7 extends y1{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oo("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Yo)"string"==typeof e&&(e=cf(e)),r=uf(n,e,t);else{let o;o=null==t?ot:cf(t),r=uf(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(h3(t),U2(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new v1(e._repo,e._path,t,e._orderByCalled)}}class bg extends y1{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new v1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Eg extends y1{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new v1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class FC extends y1{constructor(e){super(),this._path=e}_apply(e){u3(e,"orderByChild");const t=new pn(this._path);if(Ft(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sf(t),o=Wl(e._queryParams,r);return U2(o),new v1(e._repo,e._path,o,!0)}}class BC extends y1{_apply(e){u3(e,"orderByKey");const t=Wl(e._queryParams,Yo);return U2(t),new v1(e._repo,e._path,t,!0)}}class UC extends y1{_apply(e){u3(e,"orderByPriority");const t=Wl(e._queryParams,In);return U2(t),new v1(e._repo,e._path,t,!0)}}class $C extends y1{_apply(e){u3(e,"orderByValue");const t=Wl(e._queryParams,of);return U2(t),new v1(e._repo,e._path,t,!0)}}class Mg extends y1{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(oo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _g(this._value,this._key)._apply(new VC(this._value,this._key)._apply(e))}}function Ss(n,...e){let t=(0,R.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,R.hu)(!Af,"__referenceConstructor has already been defined"),Af=n})($1),function(n){(0,R.hu)(!U8,"__referenceConstructor has already been defined"),U8=n}($1);const p4={};function Tg(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||qo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ar("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let C,E,h=Qf(l,o),m=h.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(C=!0,l=`http://${E}?ns=${m.namespace}`,h=Qf(l,o),m=h.repoInfo):C=!h.repoInfo.secure;const T=o&&C?new Nl(Nl.OWNER):new xM(n.name,n.options,e);Uf("Invalid Firebase Database URL",h),Ft(h.path)||qo("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let o=p4[e.name];o||(o={},p4[e.name]=o);let l=o[n.toURLString()];return l&&qo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new tg(n,false,t,r),o[n.toURLString()]=l,l}(m,n,T,new Bd(n.name,t));return new xg(x,n)}class xg{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=Wp(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ql(n.repoInfo_,(r,o,l,h)=>{rg(n,r,o,l,h)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>e5(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new e4(n.repoInfo_,e,(r,o,l,h)=>{rg(n,r,o,l,h)},r=>{e5(n,r)},r=>{!function(n,e){$r(e,(t,r)=>{Gf(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return Gp[t]||(Gp[t]=e()),Gp[t]}(n.repoInfo_,()=>new VM(n.stats_,n.server_)),n.infoData_=new rC,n.infoSyncTree_=new Um({startListening:(r,o,l,h)=>{let m=[];const C=n.infoData_.getNode(r._path);return C.isEmpty()||(m=$8(n.infoSyncTree_,r._path,C),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),Gf(n,"connected",!1),n.serverSyncTree_=new Um({startListening:(r,o,l,h)=>(n.server_.listen(r,l,o,(m,C)=>{const E=h(m,C);Ts(n.eventQueue_,r._path,E)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $1(this._repo,Yt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=p4[e];(!t||t[n.key]!==n)&&qo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Zf(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&qo("Cannot call "+e+" on a deleted database.")}}function YM(n,e){Pp(n,e)}class h5{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}e4.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},e4.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},Lp(F1.SDK_VERSION),(0,F1._registerComponent)(new Es.wA("database",(e,{instanceIdentifier:t})=>Tg(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,F1.registerVersion)(w6,"0.12.2",void 0),(0,F1.registerVersion)(w6,"0.12.2","esm2017");const XC=new H1.Yd("@firebase/database-compat"),kg=function(n){XC.warn("FIREBASE WARNING: "+n)};class zg{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,kg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class nb{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Za{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),s3("DataSnapshot.child","path",e,!1),new Za(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),s3("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Za(this._database,t)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new G1(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Qn{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",t,!1);const h=Qn.getCancelAndContextArgs_("Query.on",r,o),m=(E,T)=>{t.call(h.context,new Za(this.database,E),T)};m.userCallback=t,m.context=h.context;const C=null===(l=h.cancel)||void 0===l?void 0:l.bind(h.context);switch(e){case"value":return a5(this._delegate,m,C),t;case"child_added":return PC(this._delegate,m,C),t;case"child_removed":return vg(this._delegate,m,C),t;case"child_changed":return lt(this._delegate,m,C),t;case"child_moved":return gg(this._delegate,m,C),t;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,R.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",t,!0),(0,R.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,yg(this._delegate,e,o)}else yg(this._delegate,e)}get(){return ZM(this._delegate).then(e=>new Za(this.database,e))}once(e,t,r,o){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",t,!0);const l=Qn.getCancelAndContextArgs_("Query.once",r,o),h=new R.BH,m=(E,T)=>{const x=new Za(this.database,E);t&&t.call(l.context,x,T),h.resolve(x)};m.userCallback=t,m.context=l.context;const C=E=>{l.cancel&&l.cancel.call(l.context,E),h.reject(E)};switch(e){case"value":a5(this._delegate,m,C,{onlyOnce:!0});break;case"child_added":PC(this._delegate,m,C,{onlyOnce:!0});break;case"child_removed":vg(this._delegate,m,C,{onlyOnce:!0});break;case"child_changed":lt(this._delegate,m,C,{onlyOnce:!0});break;case"child_moved":gg(this._delegate,m,C,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new Qn(this.database,Ss(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bg(n)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new Qn(this.database,Ss(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Eg(n)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new Qn(this.database,Ss(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return s3("orderByChild","path",n,!1),new FC(n)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new Qn(this.database,Ss(this._delegate,new BC))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new Qn(this.database,Ss(this._delegate,new UC))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new Qn(this.database,Ss(this._delegate,new $C))}startAt(e=null,t){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new Qn(this.database,Ss(this._delegate,function(n=null,e){return Q6("startAt","key",e,!0),new VC(n,e)}(e,t)))}startAfter(e=null,t){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new Qn(this.database,Ss(this._delegate,function(n,e){return Q6("startAfter","key",e,!0),new n7(n,e)}(e,t)))}endAt(e=null,t){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new Qn(this.database,Ss(this._delegate,function(n,e){return Q6("endAt","key",e,!0),new _g(n,e)}(e,t)))}endBefore(e=null,t){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new Qn(this.database,Ss(this._delegate,function(n,e){return Q6("endBefore","key",e,!0),new l5(n,e)}(e,t)))}equalTo(e,t){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new Qn(this.database,Ss(this._delegate,function(n,e){return Q6("equalTo","key",e,!0),new Mg(n,e)}(e,t)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Qn))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,R.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,R.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new G1(this.database,new $1(this._delegate._repo,this._delegate._path))}}class G1 extends Qn{constructor(e,t){super(e,new v1(t._repo,t._path,new Gl,!1)),this.database=e,this._delegate=t}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new G1(this.database,qa(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new G1(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new G1(this.database,this._delegate.root)}set(e,t){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",t,!0);const r=j2(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,kg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ao("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",t,!0);const r=X6(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(ao("setWithPriority",n._path),oo("setWithPriority",e,n._path,!1),Bf("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new R.BH;return t5(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return ao("remove",n._path),j2(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,R.m9)(n),ao("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new R.BH,m=a5(n,()=>{});return function(n,e,t,r,o,l){f4(n,"transaction on "+e);const h={path:e,update:t,onComplete:r,status:null,order:Rp(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=s5(n,e,void 0);h.currentInputSnapshot=m;const C=h.update(m.val());if(void 0===C)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{K6("transaction failed: Data returned ",C,h.path),h.status=0;const E=t3(n.transactionQueueTree_,e),T=Ga(E)||[];let x;T.push(h),Q8(E,T),"object"==typeof C&&null!==C&&(0,R.r3)(C,".priority")?(x=(0,R.DV)(C,".priority"),(0,R.hu)(i3(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(W8(n.serverSyncTree_,e)||At.EMPTY_NODE).getPriority().val();const P=o3(n),B=jn(C,x),Q=e3(B,m,P);h.currentOutputSnapshotRaw=B,h.currentOutputSnapshotResolved=Q,h.currentWriteId=c3(n);const Ae=j8(n.serverSyncTree_,e,Q,h.currentWriteId,h.applyLocally);Ts(n.eventQueue_,e,Ae),l3(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(C,E,T)=>{let x=null;C?l.reject(C):(x=new Wa(T,new $1(n._repo,n._path),In),l.resolve(new h5(E,x)))},m,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new nb(l.committed,new Za(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,R.m9)(n),ao("setPriority",n._path),Bf("setPriority",e,!1);const t=new R.BH;return t5(n._repo,Sn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,R.m9)(n),ao("push",n._path),oo("push",e,n._path,!0);const t=ng(n._repo),r=eC(t),o=qa(n,r),l=qa(n,r);let h;return h=null!=e?j2(l,e).then(()=>l):Promise.resolve(l),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}(this._delegate,e),o=r.then(h=>new G1(this.database,h));t&&o.then(()=>t(null),h=>t(h));const l=new G1(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return ao("Reference.onDisconnect",this._delegate._path),new zg(new pg(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class r0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,R.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&qo("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&qo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Nl(Nl.OWNER);else if(r.mockUserToken){const h="string"==typeof r.mockUserToken?r.mockUserToken:(0,R.Sg)(r.mockUserToken,n.app.options.projectId);l=new Nl(h)}!function(n,e,t,r){n.repoInfo_=new jp(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof G1){const t=Xf(this._delegate,e.toString());return new G1(this,t)}{const t=Jf(this._delegate,e);return new G1(this,t)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const r=Xf(this._delegate,e);return new G1(this,r)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,R.m9)(n))._checkNotDeleted("goOffline"),Zf(n._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,R.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Ds)}(n._repo)}(this._delegate)}}r0.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var Rg=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){Lp(t);const h=new Es.zt("auth-internal",new Es.H0("database-standalone"));return h.setComponent(new Es.wA("auth-internal",()=>r,"PRIVATE")),{instance:new r0(Tg(n,h,void 0,e,l),n),namespace:o}}});const ib=r0.ServerValue;!function(n){n.INTERNAL.registerComponent(new Es.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new r0(o,r)},"PUBLIC").setServiceProps({Reference:G1,Query:Qn,Database:r0,DataSnapshot:Za,enableLogging:YM,INTERNAL:Rg,ServerValue:ib}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.2")}(Dl.Z);const d5=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})(),Vg=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();var Og=F(9193);function sb(n){return e=>0===n?(0,Og.c)():e.lift(new ob(n))}class ob{constructor(e){if(this.total=e,this.total<0)throw new Vg}call(e,t){return t.subscribe(new ab(e,this.total))}}class ab extends bs.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function r7(n=null){return e=>e.lift(new cb(n))}class cb{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Fg(e,this.defaultValue))}}class Fg extends bs.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function lb(n=db){return e=>e.lift(new ub(n))}class ub{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new hb(e,this.errorFactory))}}class hb extends bs.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function db(){return new d5}var fb=F(4487);function Hg(n,e){return e?Br(()=>n,e):Br(()=>n)}var i7=F(3101);F(2329);const l7=new Map,$g={activated:!1,tokenObservers:[]},Gg={initialized:!1,enabled:!1};function _1(n){return l7.get(n)||$g}function t2(n,e){l7.set(n,e)}function $2(){return Gg}class s0{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new R.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new R.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const W1=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function h7(n){if(!_1(n).activated)throw W1.create("use-before-activation",{appName:n.name})}function m3(n,e){return d7.apply(this,arguments)}function d7(){return(d7=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,l)}catch(x){throw W1.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==h.status)throw W1.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(x){throw W1.create("fetch-parse-error",{originalErrorMessage:x.message})}const C=m.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw W1.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const E=1e3*Number(C[1]),T=Date.now();return{token:m.attestationToken,expireTimeMillis:T+E,issuedAtTimeMillis:T}})).apply(this,arguments)}function dA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const g3="firebase-app-check-store";let v3=null;function m5(){return v3||(v3=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(W1.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(g3,{keyPath:"compositeKey"})}}}catch(t){e(W1.create("storage-open",{originalErrorMessage:t.message}))}}),v3)}function f7(){return(f7=(0,Ie.Z)(function*(n,e){const r=(yield m5()).transaction(g3,"readwrite"),l=r.objectStore(g3).put({compositeKey:n,value:e});return new Promise((h,m)=>{l.onsuccess=C=>{h()},r.onerror=C=>{var E;m(W1.create("storage-set",{originalErrorMessage:null===(E=C.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const v5=new H1.Yd("@firebase/app-check");function y3(n,e){return(0,R.hl)()?function(n,e){return function(n,e){return f7.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{v5.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _3(){return $2().enabled}function C3(){return m4.apply(this,arguments)}function m4(){return(m4=(0,Ie.Z)(function*(){const n=$2();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Db={error:"UNKNOWN_ERROR"};function pA(n){return R.US.encodeString(JSON.stringify(n),!1)}function C5(n){return g7.apply(this,arguments)}function g7(){return(g7=(0,Ie.Z)(function*(n,e=!1){const t=n.app;h7(t);const r=_1(t);let l,h,o=r.token;if(!o){const m=yield r.cachedTokenPromise;m&&b3(m)&&(o=m,t2(t,Object.assign(Object.assign({},r),{token:o})),Yg(t,{token:o.token}))}if(!e&&o&&b3(o))return{token:o.token};if(_3()){const m=yield m3(dA(t,yield C3()),n.platformLoggerProvider);return yield y3(t,m),t2(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{o=yield r.provider.getToken()}catch(m){v5.error(m),l=m}return o?(h={token:o.token},t2(t,Object.assign(Object.assign({},r),{token:o})),yield y3(t,o)):h=xb(l),Yg(t,h),h})).apply(this,arguments)}function v7(n,e){const t=_1(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t2(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Yg(n,e){const t=_1(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function b3(n){return n.expireTimeMillis-Date.now()>0}function xb(n){return{token:pA(Db),error:n}}class Nb{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=_1(this.app);for(const t of e)v7(this.app,t.next);return Promise.resolve()}}const _7="app-check-internal";(0,F1._registerComponent)(new Es.wA("app-check",n=>function(n,e){return new Nb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(_7).initialize()})),(0,F1._registerComponent)(new Es.wA(_7,n=>function(n){return{getToken:e=>C5(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,l=_1(o),h={next:t,error:r,type:e},m=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]});if(!m.tokenRefresher){const C=function(n){const{app:e}=n;return new s0((0,Ie.Z)(function*(){let r;if(r=_1(e).token?yield C5(n,!0):yield C5(n),r.error)throw r.error}),()=>!0,()=>{const t=_1(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);m.tokenRefresher=C}if(!m.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&m.tokenRefresher.start(),l.token&&b3(l.token)){const C=l.token;Promise.resolve().then(()=>t({token:C.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(C=>{C&&b3(C)&&t({token:C.token})}).catch(()=>{});t2(o,m)}(n,"INTERNAL",e),removeTokenListener:e=>v7(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,F1.registerVersion)("@firebase/app-check","0.4.2");class I5{constructor(){return(0,En.vb)("app-check")}}"undefined"!=typeof window&&window;var b7=F(7841);const iv=new p.OlP("angularfire2.auth.use-emulator"),w7=new p.OlP("angularfire2.auth.settings"),E7=new p.OlP("angularfire2.auth.tenant-id"),C1=new p.OlP("angularfire2.auth.langugage-code"),Nn=new p.OlP("angularfire2.auth.use-device-language"),q1=new p.OlP("angularfire.auth.persistence"),T5=(n,e,t,r,o,l,h,m)=>(0,ci.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const C=e.runOutsideAngular(()=>n.auth());if(t&&C.useEmulator(...t),r&&(C.tenantId=r),C.languageCode=o,l&&C.useDeviceLanguage(),h)for(const[E,T]of Object.entries(h))C.settings[E]=T;return m&&C.setPersistence(m),C},[t,r,o,l,h,m]);let I7=(()=>{class n{constructor(t,r,o,l,h,m,C,E,T,x,P,B){const Q=new Ur.xQ,Ae=(0,yn.of)(void 0).pipe((0,Xs.QV)(h.outsideAngular),Br(()=>l.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4671)))),(0,Nt.U)(()=>(0,ci.on)(t,l,r)),(0,Nt.U)(Ve=>T5(Ve,l,m,E,T,x,C,P)),Tl({bufferSize:1,refCount:!1}));if(To(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,yn.of)(null);else{Ae.pipe(function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wc((o,l)=>n(o,l,r)):fb.y,sb(1),t?r7(e):lb(()=>new d5))}()).subscribe();const Ye=Ae.pipe(Br(wt=>wt.getRedirectResult().then(An=>An,()=>null)),En.iC,Tl({bufferSize:1,refCount:!1})),bt=Ae.pipe(Br(wt=>new zn.y(An=>({unsubscribe:l.runOutsideAngular(()=>wt.onAuthStateChanged(Lr=>An.next(Lr),Lr=>An.error(Lr),()=>An.complete()))})))),Jt=Ae.pipe(Br(wt=>new zn.y(An=>({unsubscribe:l.runOutsideAngular(()=>wt.onIdTokenChanged(Lr=>An.next(Lr),Lr=>An.error(Lr),()=>An.complete()))}))));this.authState=Ye.pipe(Hg(bt),(0,i7.R)(h.outsideAngular),(0,Xs.QV)(h.insideAngular)),this.user=Ye.pipe(Hg(Jt),(0,i7.R)(h.outsideAngular),(0,Xs.QV)(h.insideAngular)),this.idToken=this.user.pipe(Br(wt=>wt?(0,Vi.D)(wt.getIdToken()):(0,yn.of)(null))),this.idTokenResult=this.user.pipe(Br(wt=>wt?(0,Vi.D)(wt.getIdTokenResult()):(0,yn.of)(null))),this.credential=(0,kd.T)(Ye,Q,this.authState.pipe(Wc(wt=>!wt))).pipe((0,Nt.U)(wt=>(null==wt?void 0:wt.user)?wt:null),(0,i7.R)(h.outsideAngular),(0,Xs.QV)(h.insideAngular))}return(0,ci.pX)(this,Ae,l,{spy:{apply:(Ve,Ye,bt)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&bt.then(Jt=>Q.next(Jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ci.Dh),p.LFG(ci.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(En.HU),p.LFG(iv,8),p.LFG(w7,8),p.LFG(E7,8),p.LFG(C1,8),p.LFG(Nn,8),p.LFG(q1,8),p.LFG(I5,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function l0(n){return null==n}function sv(n){return"function"==typeof n.set}function Ya(n,e){return sv(e)?e:n.ref(e)}function ov(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(sv(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function u0(n,e,t="on",r=Ep.z){return new zn.y(o=>{let l=null;return l=n[t](e,(h,m)=>{r.schedule(()=>{o.next({snapshot:h,prevKey:m})}),"once"===t&&r.schedule(()=>o.complete())},h=>{r.schedule(()=>o.error(h))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,Nt.U)(o=>{const{snapshot:l,prevKey:h}=o;let m=null;return l.exists()&&(m=l.key),{type:e,payload:l,prevKey:h,key:m}}),(0,I_.B)())}function h0(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function av(n,e){const{payload:t,prevKey:r,key:o}=e,l=h0(n,o),h=function(n,e){if(l0(e))return 0;{const t=h0(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(C=>{const E={payload:C,type:"value",prevKey:m,key:C.key};return m=C.key,n=[...n,E],!1})}return n;case"child_added":if(l>-1){const m=n[l-1];(m&&m.key||null)!==r&&(n=n.filter(C=>C.payload.key!==t.key)).splice(h,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(h,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===o?e:m);case"child_moved":if(l>-1){const m=n.splice(l,1)[0];return(n=n.slice()).splice(h,0,m),n}return n;default:return n}}function g4(n){return(l0(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function cv(n,e,t){return function(n,e,t){return u0(n,"value","once",t).pipe(Br(r=>{const o=[(0,yn.of)(r)];return e.forEach(l=>o.push(u0(n,l,"on",t))),(0,kd.T)(...o).pipe(b6(av,[]))}),c8())}(n,e=g4(e),t)}function I3(n,e,t){const r=(e=g4(e)).map(o=>u0(n,o,"on",t));return(0,kd.T)(...r)}function M3(n,e){return function(r,o){return ov(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function jb(n){return function(t){return t?ov(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function D5(n,e){return function(){return u0(n,"value","on",e)}}const CA=new p.OlP("angularfire2.realtimeDatabaseURL"),yt=new p.OlP("angularfire2.database.use-emulator");let $b=(()=>{class n{constructor(t,r,o,l,h,m,C,E,T,x,P,B,Q,Ae,Ve){this.schedulers=m;const Ye=C,bt=(0,ci.on)(t,h,r);E&&T5(bt,h,T,P,B,Q,x,Ae),this.database=(0,ci.cc)(`${bt.name}.database.${o}`,"AngularFireDatabase",bt.name,()=>{const Jt=h.runOutsideAngular(()=>bt.database(o||void 0));return Ye&&Jt.useEmulator(...Ye),Jt},[Ye])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>Ya(this.database,t));let l=o;return r&&(l=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:M3(r,"update"),set:M3(r,"set"),push:o=>r.push(o),remove:jb(r),snapshotChanges:o=>cv(n,o,t).pipe(En.iC),stateChanges:o=>I3(n,o,t).pipe(En.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return u0(n,"value","on",e).pipe((0,Nt.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new T_(n,t))}}(e),(0,Nt.U)(([o,l])=>{const h=o.lastKeyToLoad,m=l.map(C=>C.key);return{actions:l,lastKeyToLoad:h,loadedKeys:m}}),function(n){return e=>e.lift(new Sp(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,Nt.U)(o=>o.actions))}(n,I3(n,e).pipe(b6((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(En.iC),valueChanges:(o,l)=>cv(n,o,t).pipe((0,Nt.U)(m=>m.map(C=>l&&l.idField?Object.assign(Object.assign({},C.payload.val()),{[l.idField]:C.key}):C.payload.val())),En.iC)}}(l,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>D5(n,e.schedulers.outsideAngular)().pipe(En.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>D5(n,e.schedulers.outsideAngular)().pipe(En.iC,(0,Nt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ya(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ci.Dh),p.LFG(ci.xv,8),p.LFG(CA,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(En.HU),p.LFG(yt,8),p.LFG(I7,8),p.LFG(iv,8),p.LFG(w7,8),p.LFG(E7,8),p.LFG(C1,8),p.LFG(Nn,8),p.LFG(q1,8),p.LFG(I5,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A3=(()=>{class n{constructor(){b7.Z.registerVersion("angularfire",En.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[$b]}),n})(),dv=(()=>{class n{constructor(t){this.db=t}addEZRekord(t,r){var o;null===(o=this.rekordyEZRef)||void 0===o||o.push({name:t,score:r})}updateRekord(t,r,o){this.getEZRekord(o).update({name:t,score:r})}getEZRekord(t){return this.pojrekordRef=this.db.object("wyniki-ez/"+t),this.pojrekordRef}getWynikiEz(){return this.rekordyEZRef=this.db.list("wyniki-ez"),this.rekordyEZRef}deleteRekordEz(t){var r;this.pojrekordRef=this.db.object("wyniki-ez/"+t),null===(r=this.pojrekordRef)||void 0===r||r.remove()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG($b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gb{}let Wb=(()=>{class n{constructor(t,r){this.templateRef=t,this.viewContainerRef=r,this.context=new Gb}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.templateRef,this.context)}ngOnChanges(t){t.letOf&&Object.assign(this.context,this.letOf)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Rgc),p.Y36(p.s_b))},n.\u0275dir=p.lG2({type:n,selectors:[["","let",""]],inputs:{letOf:"letOf"},features:[p.TTD]}),n})();const bA={affenpinscher:"Pinczer ma\u0142pi",african:"Likaon pstry",airedale:"Airedale terrier",akita:"Akita",appenzeller:"Appenzeller","australian-shepherd":"Owczarek australijski",basenji:"Basenji",beagle:"Beagle",bluetick:"Bluetick",borzoi:"Borzoj",bouvier:"Bouvier",boxer:"Boxer",brabancon:"Brabantczyk",briard:"Owczarek francuski","buhund-norwegian":"Buhund norweski","bulldog-boston":"Buldog bosto\u0144ski","bulldog-english":"Buldog angielski","bulldog-french":"Buldog francuski","bullterrier-staffordshire":"staffik","cattledog-australian":"Cattle dog australijski",chihuahua:"chichuhaha",chow:"Chow",clumber:"Clumber spaniel",cockapoo:"Cockapoo","collie-border":"Border collie",coonhound:"Coonhound","corgi-cardigan":"Corgi cardigan",cotondetulear:"Coton de Tulear",dachshund:"Jamnik",dalmatian:"Dalmaty\u0144czyk","dane-great":"Dog niemiecki","deerhound-scottish":"Chart szkocki",dhole:"dhole",dingo:"Dingo australijski",doberman:"Doberman","elkhound-norwegian":"Elkhund szary",entlebucher:"Entlebucher",eskimo:"Pies eskimoski","finnish-lapphund":"Fi\u0144ski lapphund","frise-bichon":"Bichon frise",germanshepherd:"Owczarek niemiecki","greyhound-italian":"Charcik w\u0142oski",groenendael:"groenendael",havanese:"hawa\u0144czyk","hound-afghan":"ogar afga\u0144ski","hound-basset":"ogar basset","hound-blood":"ogar go\u0144czy","hound-english":"ogar angielski","hound-ibizan":"ogar ibizan","hound-plott":"hound plott","hound-walker":"hound walker",husky:"husky",keeshond:"szpic szlachetny",kelpie:"owczarek australijski",komondor:"owczarek w\u0119gierski",kuvasz:"kuvasz",labradoodle:"labradoodle",labrador:"labrador",leonberg:"leonberg",lhasa:"lhasa",malamute:"malamute",malinois:"owczarek belgijski malinos",maltese:"malta\u0144czyk","mastiff-bull":"mastif byk","mastiff-english":"mastiff angielski","mastiff-tibetan":"mastif tybeta\u0144ski",mexicanhairless:"meksyka\u0144ski bezw\u0142osy",mix:"kundel","mountain-bernese":"berne\u0144ski pies pasterski","mountain-swiss":"szwajarski pies pasterski",newfoundland:"newfoundland",otterhound:"otterhound","ovcharka-caucasian":"owczarek kaukaski",papillon:"papillon",pekinese:"peki\u0144czyk",pembroke:"pembroke","pinscher-miniature":"pinczer miniaturowy",pitbull:"pitbull","pointer-german":"pointer niemicki","pointer-germanlonghair":"pointer-niemiecki d-w\u0142osy",pomeranian:"pomeranian","poodle-miniature":"pudel miniaturowy","poodle-standard":"pudel standard","poodle-toy":"pudel toy",pug:"mops",puggle:"puggle",pyrenees:"pirenejski pies g\xf3rski",redbone:"redbone","retriever-chesapeake":"retriever chesapeake","retriever-curly":"retriever k\u0119dzierzawy","retriever-flatcoated":"retriever flatcoated","retriever-golden":"golden retriever","ridgeback-rhodesian":"ridgeback rhodesian",rottweiler:"rottweiler",saluki:"chart perski",samoyed:"samoyed",schipperke:"schipperke","schnauzer-giant":"schnauzer olbrzym","schnauzer-miniature":"schnauzer miniaturowy","setter-english":"setter english","setter-gordon":"setter gordon","setter-irish":"setter irish","sheepdog-english":"owczarek staroangielski","sheepdog-shetland":"owczarek szetlandzki",shiba:"shiba",shihtzu:"shihtzu","spaniel-blenheim":"spaniel blenheim","spaniel-brittany":"spaniel brittany","spaniel-cocker":"cocker spaniel angielski","spaniel-irish":"islandzki spaniel wodny","spaniel-japanese":"spaniel japo\u0144ski","spaniel-sussex":"spaniel sussex","spaniel-welsh":"springer spaniel walijski","springer-english":"springer spaniel angielski",stbernard:"st bernard","terrier-american":"terier ameryka\u0144ski","terrier-australian":"terier australijski","terrier-bedlington":"terrier bedlington","terrier-border":"terrier border","terrier-cairn":"terrier cairn","terrier-dandie":"terrier dandie","terrier-fox":"foksterier","terrier-irish":"terier islandzki","terrier-kerryblue":"terrier kerryblue","terrier-lakeland":"terrier lakeland","terrier-norfolk":"terrier norfolk","terrier-norwich":"terrier norwich","terrier-patterdale":"terrier patterdale","terrier-russell":"terrier russell","terrier-scottish":"terrier szkocki","terrier-sealyham":"terrier sealyham","terrier-silky":"terrier silky","terrier-tibetan":"terrier tybeta\u0144ski","terrier-toy":"terrier toy","terrier-westhighland":"terrier westhighland","terrier-wheaten":"terrier wheaten","terrier-yorkshire":"york",vizsla:"wy\u017ce\u0142 w\u0119gierski","waterdog-spanish":"hiszpa\u0144ski pies dowodny",weimaraner:"wy\u017ce\u0142 weimarski k-w\u0142osy",whippet:"chart angielski","wolfhound-irish":"wilczarz irlandzki"};let wA=(()=>{class n{transform(t){return bA[t]||t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=p.Yjl({name:"translatebreed",type:n,pure:!0}),n})();function qb(n,e){if(1&n&&(p.TgZ(0,"h3",5),p._uU(1),p.qZA()),2&n){const t=p.oxw(2);p.xp6(1),p.hij("",t.timeForAnswer," s left")}}const wi=function(n){return{row:!0,"btn-change":n}};function Zb(n,e){if(1&n&&(p.TgZ(0,"div"),p.TgZ(1,"label",17),p._UZ(2,"span",18),p.TgZ(3,"div",19),p._UZ(4,"input",20),p.qZA(),p.TgZ(5,"div",21),p._uU(6),p.ALo(7,"translatebreed"),p.qZA(),p.qZA(),p.qZA()),2&n){const t=e.$implicit,r=e.index,o=p.oxw(2).dobraodp,l=p.oxw(3);p.xp6(1),p.MGl("for","lable_",r,""),p.Q6J("ngClass",p.VKq(9,wi,t===o&&l.dogSelected)),p.xp6(3),p.MGl("id","lable_",r,""),p.s9C("value",t),p.Q6J("readOnly",l.dogSelected),p.xp6(1),p.Q6J("ngClass","odp-"+r),p.xp6(1),p.hij(" ",p.lcZ(7,7,t)," ")}}function Kb(n,e){1&n&&p._UZ(0,"div",22)}function S7(n,e){if(1&n&&(p.TgZ(0,"div",14),p.ynx(1),p.YNc(2,Zb,8,11,"div",15),p.BQk(),p.YNc(3,Kb,1,0,"div",16),p.qZA()),2&n){const t=e.odp,r=p.oxw(4);p.xp6(2),p.Q6J("ngForOf",t),p.xp6(1),p.Q6J("ngIf",r.f.gender.touched&&r.f.gender.invalid)}}const Yb=function(n){return{odp:n}};function Qb(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"form",11),p.NdJ("ngSubmit",function(){return p.CHM(t),p.oxw(3).submit()}),p.YNc(1,S7,4,2,"div",12),p.ALo(2,"async"),p.TgZ(3,"button",13),p._uU(4,"Submit"),p.qZA(),p.qZA()}if(2&n){const t=p.oxw(3);p.Q6J("formGroup",t.formu),p.xp6(1),p.Q6J("letOf",p.VKq(5,Yb,p.lcZ(2,3,t.czteryodp$))),p.xp6(2),p.Q6J("disabled",!t.formu.valid||t.clicked)}}const Jb=function(n,e){return{"tlo-quizu-ez":n,"tlo-quizu-hard":e}},Xb=function(n){return{dobraodp:n}};function ew(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",6),p.TgZ(1,"div"),p.TgZ(2,"div",7),p._uU(3),p.qZA(),p.YNc(4,Qb,5,7,"form",8),p.ALo(5,"async"),p.TgZ(6,"div",9),p._uU(7),p.qZA(),p._UZ(8,"br"),p.TgZ(9,"div"),p.TgZ(10,"button",10),p.NdJ("click",function(){return p.CHM(t),p.oxw(2).koniecGry()}),p._uU(11,"Zako\u0144cz"),p.qZA(),p._UZ(12,"br"),p.qZA(),p.qZA(),p.qZA()}if(2&n){const t=p.oxw(2);let r;p.Q6J("ngClass",p.WLB(6,Jb,!t.isHard,t.isHard)),p.xp6(3),p.hij(" Guess the breed, ",null==(r=t.login.get("username"))?null:r.value," "),p.xp6(1),p.Q6J("letOf",p.VKq(9,Xb,p.lcZ(5,4,t.goodAnswerBreed$))),p.xp6(3),p.hij(" wynik: ",t.liczdobre," ")}}function tw(n,e){if(1&n&&(p.TgZ(0,"div"),p.YNc(1,qb,2,1,"h3",3),p.YNc(2,ew,13,11,"div",4),p.qZA()),2&n){const t=p.oxw(),r=p.MAs(3);p.xp6(1),p.Q6J("ngIf",t.isHard&&t.isuserName),p.xp6(1),p.Q6J("ngIf",t.isuserName)("ngIfElse",r)}}const S5=function(n,e){return{"m-1 btn szerokosc":!0,"btn-danger shadow-none":n,"btn-success shadow":e}};function nw(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",23),p.TgZ(1,"div",24),p._uU(2," Enter user name: "),p.qZA(),p.TgZ(3,"form",11),p.NdJ("ngSubmit",function(){return p.CHM(t),p.oxw().submit2()}),p._UZ(4,"input",25),p._UZ(5,"br"),p.TgZ(6,"div",26),p._uU(7," select difficulty: "),p.qZA(),p.TgZ(8,"div"),p.TgZ(9,"button",27),p.NdJ("click",function(){return p.CHM(t),p.oxw().setDificultyLvl(!1)}),p._uU(10,"Easy"),p.qZA(),p.TgZ(11,"button",27),p.NdJ("click",function(){return p.CHM(t),p.oxw().setDificultyLvl(!0)}),p._uU(12,"Hard"),p.qZA(),p.qZA(),p.TgZ(13,"button",28),p._uU(14,"Start"),p.qZA(),p.qZA(),p.qZA()}if(2&n){const t=p.oxw();p.xp6(3),p.Q6J("formGroup",t.login),p.xp6(1),p.Q6J("placeholder",t.inputPlaceholder),p.xp6(5),p.Q6J("ngClass",p.WLB(4,S5,t.isHard,!t.isHard)),p.xp6(2),p.Q6J("ngClass",p.WLB(7,S5,!t.isHard,t.isHard))}}function rw(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",29),p.TgZ(1,"div",30),p._uU(2," You lost! "),p.qZA(),p.TgZ(3,"div",31),p.TgZ(4,"button",32),p.NdJ("click",function(){return p.CHM(t),p.oxw().newUser()}),p._uU(5,"New Player"),p.qZA(),p.TgZ(6,"button",33),p.NdJ("click",function(){return p.CHM(t),p.oxw().tryAgain()}),p._uU(7,"Try Again"),p.qZA(),p.qZA(),p.qZA()}}let x7=(()=>{class n{constructor(t,r,o,l,h,m,C,E){this.infozapicomponent=t,this.cdRef=r,this.fb=o,this.dogsRandomService=l,this.jedenWybranyPiesService=h,this.tablicaLStorageService=m,this.currentPlayerService=C,this.rekordyAPI=E,this.poprawny="",this.liczdobre=0,this.personalBest=0,this.dogForm=this.fb.group({}),this.stringStyle="btn-default",this.div="",this.dogSelected=!1,this.clicked=!1,this.isHard=!1,this.timeForAnswer=8,this.interval=0,this.currentPlayaID="",this.personalBestFirebase=0,this.rekordy=[],this.inputPlaceholder="",this.formu=new h1({gender:new Qs("",V1.required)}),this.login=new h1({username:new Qs("",V1.required)}),this.goodAnswerBreed$=this.jedenWybranyPiesService.breed$,this.allObservable$=this.dogsRandomService.wszystkieRasy$}ngOnInit(){var t;null===(t=this.goodAnswerBreed$)||void 0===t||t.subscribe(o=>this.poprawny=o),this.currentPlayerService.dataBoolean$.subscribe(o=>this.isHard=o),this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika$.subscribe(o=>this.isuserName=o),this.currentPlayerService.przegrana$.subscribe(o=>this.przegrana=o),this.losowe$=this.dogsRandomService.trzylosowe$,this.czteryodp$=this.dogsRandomService.odpowiedzi$,this.rekordyAPI.getWynikiEz().snapshotChanges().subscribe(o=>{this.rekordy=[],o.forEach(l=>{var h;let m=l.payload.toJSON();"string"==typeof l.key&&(m.$key=l.key),null===(h=this.rekordy)||void 0===h||h.push(m)})})}get f(){return this.formu.controls}setDificultyLvl(t){this.currentPlayerService.dataBoolSource.next(t)}newUser(){this.currentPlayerService.statusPrzegranej(!1),this.login.value.username="",this.infozapicomponent.nextPieselek(),this.currentPlayerService.gameIsRunning(!0),this.currentPlayerService.resetujLicznik(),this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika(!1)}tryAgain(){this.currentPlayerService.statusPrzegranej(!1),this.infozapicomponent.nextPieselek(),this.currentPlayerService.gameIsRunning(!0),this.currentPlayerService.resetujLicznik(),this.isHard&&this.startTimer()}koniecGry(){this.currentPlayerService.statusPrzegranej(!1),this.currentPlayerService.saveData(""),this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika(!1),this.currentPlayerService.resetujLicznik()}udzielonoDobrejOdpowiedzi(){this.liczdobre++,this.isHard&&this.stopTimer(),setTimeout(()=>{this.dogSelected=!1,this.infozapicomponent.nextPieselek(),this.clicked=!1,this.startTimer()},2e3)}udzielonoZlejOdpowiedzi(t=!1){this.liczdobre=0,this.isHard&&this.stopTimer(),t?(this.dogSelected=!1,this.currentPlayerService.statusPrzegranej(!0),this.clicked=!1):setTimeout(()=>{this.dogSelected=!1,this.currentPlayerService.statusPrzegranej(!0),this.clicked=!1,this.currentPlayerService.gameIsRunning(!1)},2e3)}startTimer(){this.isHard&&(this.timeForAnswer=8,this.interval=setInterval(()=>{this.timeForAnswer>0?this.timeForAnswer--:(this.stopTimer(),this.udzielonoZlejOdpowiedzi(!0))},1e3))}stopTimer(){clearInterval(this.interval)}submit(){this.dogSelected=!0,this.clicked=!0,this.formu.value.gender==this.poprawny?this.udzielonoDobrejOdpowiedzi():this.udzielonoZlejOdpowiedzi(),this.isHard?this.tablicaLStorageService.sendData(this.tablicaLStorageService.updateRecord(this.login.value.username,this.liczdobre,this.isHard),this.isHard):this.liczdobre>this.personalBestFirebase&&(this.rekordyAPI.updateRekord(this.login.value.username,this.liczdobre,this.currentPlayaID),this.personalBest=this.liczdobre),this.formu.reset()}submit2(){this.currentPlayerService.gameIsRunning(!0),""==this.login.value.username?(this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika(!1),this.inputPlaceholder="      UZUPE\u0141NIJ POLE"):(this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika(!0),this.liczdobre=0,this.currentPlayerService.saveData(this.login.value.username),this.isHard?this.tablicaLStorageService.findUser(this.login.value.username,this.isHard)?this.personalBest=this.tablicaLStorageService.PersonalBest(this.login.value.username,this.isHard):this.tablicaLStorageService.sendData(this.tablicaLStorageService.addRecord(this.login.value.username,this.liczdobre,this.isHard),this.isHard):void 0!==this.rekordy.find(r=>r.name==this.login.value.username)?console.log("istnieje"):this.rekordyAPI.addEZRekord(this.login.value.username,this.liczdobre),this.rekordyAPI.getWynikiEz().snapshotChanges().subscribe(r=>{this.rekordy=[],r.forEach(l=>{var h;let m=l.payload.toJSON();"string"==typeof l.key&&(m.$key=l.key),null===(h=this.rekordy)||void 0===h||h.push(m)});let o=this.rekordy.findIndex(l=>l.name==this.login.value.username);this.currentPlayaID=this.rekordy[o].$key,this.personalBestFirebase=this.rekordy[o].score})),this.isHard&&this.startTimer()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(fv),p.Y36(p.sBO),p.Y36(g6),p.Y36(a8),p.Y36(o8),p.Y36(wp),p.Y36(Ld),p.Y36(dv))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-quiz"]],decls:6,vars:2,consts:[[4,"ngIf","ngIfElse"],["podajNazweTemplate",""],["przegranyTemplate",""],["class","czas",4,"ngIf"],[3,"ngClass",4,"ngIf","ngIfElse"],[1,"czas"],[3,"ngClass"],[1,"mt-2","fw-bold","fs-5"],[3,"formGroup","ngSubmit",4,"let","letOf"],[1,"fw-bold","mt-5","fs-4"],["routerLink","",1,"btn","btn-primary",3,"click"],[3,"formGroup","ngSubmit"],["class","mt-4 form-group",4,"let","letOf"],["type","submit",1,"mt-4","btn","btn-primary",3,"disabled"],[1,"mt-4","form-group"],[4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],[3,"for","ngClass"],[1,"col-1"],[1,"col-1","d-flex","justify-content-end"],["type","radio","name","gender","formControlName","gender",3,"id","value","readOnly"],[1,"col-10","d-flex","justify-content-start","fw-bold","fs-5","duza-litera",3,"ngClass"],[1,"alert","alert-danger"],[1,"podaj-uzytkownika","p-2"],[1,"fw-bold"],["required","","id","nazwaurz","type","text","value","","name","username","formControlName","username",1,"mt-2",3,"placeholder"],[1,"fw-bold","mt-2"],["type","button",3,"ngClass","click"],["type","submit",1,"mt-2","btn","btn-primary",3,"disabled"],[1,"tlo-quizu-ez"],[1,"fw-bold","fs-1","mt-4"],[1,"row","przegrana-przyciski"],[1,"btn","btn-primary","btnsize","me-3",3,"click"],[1,"btn","btn-primary","btnsize",3,"click"]],template:function(t,r){if(1&t&&(p.ynx(0),p.YNc(1,tw,3,3,"div",0),p.BQk(),p.YNc(2,nw,15,10,"ng-template",null,1,p.W1O),p.YNc(4,rw,8,0,"ng-template",null,2,p.W1O)),2&t){const o=p.MAs(5);p.xp6(1),p.Q6J("ngIf",!r.przegrana)("ngIfElse",o)}},directives:[D1,_o,Wb,z2,ba,u6,Bt,Uc,Oi,a6,ll,Sa],pipes:[a2,wA],styles:[".tlo-quizu-ez[_ngcontent-%COMP%]{width:400px;height:270px;background-color:azure;border:1px solid steelblue;border-radius:17px;text-align:center;margin-top:40px}.tlo-quizu-hard[_ngcontent-%COMP%]{width:400px;height:270px;background-color:azure;border:1px solid steelblue;border-radius:17px;text-align:center;margin-top:15px}.podaj-uzytkownika[_ngcontent-%COMP%]{width:350px;height:220px;background-color:azure;border:1px solid steelblue;border-radius:17px;margin-top:80px;text-align:center}.przegrany[_ngcontent-%COMP%]{width:400px;height:270px;background-color:azure;border:1px solid steelblue;border-radius:25px;margin-top:40px;opacity:.9;text-align:center}input[type=radio][_ngcontent-%COMP%]{margin-top:+6px;vertical-align:middle;height:1.25em}.btn-change[_ngcontent-%COMP%]{color:#228b22}.btn-default[_ngcontent-%COMP%]:not(.btn-change){color:red}.btnsize[_ngcontent-%COMP%]{width:110px}.margin[_ngcontent-%COMP%]{padding:0;margin:0}.szerokosc[_ngcontent-%COMP%]{width:73.83px}.przegrana-przyciski[_ngcontent-%COMP%]{margin-top:50px;display:flex;justify-content:center}.duza-litera[_ngcontent-%COMP%]{text-transform:capitalize}.czas[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}"]}),n})();const N7=function(){return{"max-height":"150px","text-align":"center"}};function iw(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"div",8),p.TgZ(1,"button",9),p.NdJ("click",function(){return p.CHM(t),p.oxw().nextPieselekPrzycisk()}),p._uU(2,"Skip dog"),p.qZA(),p._UZ(3,"br"),p.TgZ(4,"div",10),p._uU(5),p.qZA(),p.qZA()}if(2&n){const t=p.oxw();p.Q6J("ngStyle",p.DdM(3,N7)),p.xp6(1),p.Q6J("disabled",t.koniecPomijania),p.xp6(4),p.hij(" left over: ",t.zostaloPominiec," ")}}let fv=(()=>{class n{constructor(t,r,o,l){this.api=t,this.dogsRandomService=r,this.jedenWybranyPiesService=o,this.currentPlayerService=l,this.zostaloPominiec=0,this.koniecPomijania=!1,this.trybTrudny=!1,this.currentPlayerService.dataBoolean$.subscribe(h=>this.trybTrudny=h),this.currentPlayerService.liczbaPominiec$.subscribe(h=>this.zostaloPominiec=h),this.currentPlayerService.stopPomijania$.subscribe(h=>this.koniecPomijania=h)}ngAfterViewInit(){this.nextPieselek(),this.doggoImgPath$=this.jedenWybranyPiesService.dogeImgPath$,this.rasa$=this.jedenWybranyPiesService.breed$}nextPieselek(){this.jedenWybranyPiesService.changeRandomDog.next()}nextPieselekPrzycisk(){this.currentPlayerService.clickKolejnyPieselek()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Na),p.Y36(a8),p.Y36(o8),p.Y36(Ld))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-info-z-api"]],viewQuery:function(t,r){if(1&t&&p.Gf(x7,5),2&t){let o;p.iGM(o=p.CRH())&&(r.child=o.first)}},decls:15,vars:4,consts:[[1,"tytul","fw-bold","mb-4"],[1,"row","srodkowa"],[1,"col-lg-4","d-flex","justify-content-center"],[1,"row","justify-content-center"],[1,"obrazekpieska"],["alt","",1,"border","border-success",3,"src"],[3,"ngStyle",4,"ngIf"],[1,"col-lg-4","d-flex","justify-content-start"],[3,"ngStyle"],[1,"przycisk","btn-success","shadow-none",3,"disabled","click"],[1,"fw-bold","mt-1","text-center"]],template:function(t,r){1&t&&(p.ynx(0),p.TgZ(1,"h2",0),p._uU(2,"Dog Breeds Quiz"),p.qZA(),p.TgZ(3,"div",1),p.ynx(4),p.TgZ(5,"div",2),p._UZ(6,"app-tablica-rekordow"),p.qZA(),p.BQk(),p.TgZ(7,"div",2),p.TgZ(8,"div",3),p.TgZ(9,"div",4),p._UZ(10,"img",5),p.ALo(11,"async"),p.YNc(12,iw,6,4,"div",6),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",7),p._UZ(14,"app-quiz"),p.qZA(),p.qZA(),p.BQk()),2&t&&(p.xp6(10),p.Q6J("src",p.lcZ(11,2,r.doggoImgPath$),p.LSH),p.xp6(2),p.Q6J("ngIf",!r.trybTrudny))},styles:[".obrazekpieska[_ngcontent-%COMP%]{min-height:350px;max-height:400px;width:400px}img[_ngcontent-%COMP%]{width:100%;height:100%}.przycisk[_ngcontent-%COMP%]{margin-top:5px;border-radius:4px;width:97px;height:28px}.srodkowa[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.margino[_ngcontent-%COMP%]{margin-top:40vh}.tytul[_ngcontent-%COMP%]{text-align:center;margin:0;padding:0}"]}),n})(),sw=(()=>{class n{constructor(){this.title="dog-quiz"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p._UZ(1,"app-info-z-api"),p.qZA())},directives:[fv],styles:[""]}),n})();const pv_firebase={apiKey:"AIzaSyBJCA_E4rMcZrI0BXI7N3ZPB7RnL3I5I9U",authDomain:"test-858b8.firebaseapp.com",projectId:"test-858b8",databaseURL:"https://test-858b8-default-rtdb.europe-west1.firebasedatabase.app/",storageBucket:"test-858b8.appspot.com",messagingSenderId:"271494259951",appId:"1:271494259951:web:f9e6d6a763dca2a4bba71a"};var ow=F(3282);function mv(...n){return(0,ow.J)(1)((0,yn.of)(...n))}var cw=F(4869);function v4(...n){const e=n[n.length-1];return(0,cw.K)(e)?(n.pop(),t=>mv(n,t,e)):t=>mv(n,t)}function L7(){return n=>n.lift(new lw)}class lw{call(e,t){return t.subscribe(new gv(e))}}class gv extends bs.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Ke,T3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qa={},k7=k7||{},Ct=T3||self;function x5(){}function z7(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function D3(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var R7="closure_uid_"+(1e9*Math.random()>>>0),uw=0;function EA(n,e,t){return n.call.apply(n.bind,arguments)}function IA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ei(n,e,t){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?EA:IA).apply(null,arguments)}function d0(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Ja(){this.s=this.s,this.o=this.o}var dw={};Ja.prototype.s=!1,Ja.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,R7)&&n[R7]||(n[R7]=++uw)}(this);delete dw[n]}},Ja.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},_v=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function N5(n){return Array.prototype.concat.apply([],arguments)}function P7(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function W2(n){return/^[\s\xa0]*$/.test(n)}var di,hi=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ii(n,e){return-1!=n.indexOf(e)}function Z1(n,e){return n<e?-1:n>e?1:0}e:{var bv=Ct.navigator;if(bv){var V7=bv.userAgent;if(V7){di=V7;break e}}di=""}function L5(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function O7(n){const e={};for(const t in n)e[t]=n[t];return e}var wv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ev(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<wv.length;l++)t=wv[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function F7(n){return F7[" "](n),n}F7[" "]=x5;var k5,fw=Ii(di,"Opera"),S3=Ii(di,"Trident")||Ii(di,"MSIE"),Mv=Ii(di,"Edge"),H7=Mv||S3,y4=Ii(di,"Gecko")&&!(Ii(di.toLowerCase(),"webkit")&&!Ii(di,"Edge"))&&!(Ii(di,"Trident")||Ii(di,"MSIE"))&&!Ii(di,"Edge"),MA=Ii(di.toLowerCase(),"webkit")&&!Ii(di,"Edge");function B7(){var n=Ct.document;return n?n.documentMode:void 0}e:{var Av="",z5=function(){var n=di;return y4?/rv:([^\);]+)(\)|;)/.exec(n):Mv?/Edge\/([\d\.]+)/.exec(n):S3?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):MA?/WebKit\/(\S+)/.exec(n):fw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(z5&&(Av=z5?z5[1]:""),S3){var U7=B7();if(null!=U7&&U7>parseFloat(Av)){k5=String(U7);break e}}k5=Av}var j7={};function Tv(){return e=j7,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=hi(String(k5)).split("."),t=hi("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Z1(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Z1(0==o[2].length,0==l[2].length)||Z1(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n}();var e}var pw=Ct.document&&S3&&(B7()||parseInt(k5,10))||void 0,mw=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",x5,e),Ct.removeEventListener("test",x5,e)}catch(t){}return n}();function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function x3(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(y4){e:{try{F7(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:gw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&x3.Z.h.call(this)}}Mi.prototype.h=function(){this.defaultPrevented=!0},ui(x3,Mi);var gw={2:"touch",3:"pen",4:"mouse"};x3.prototype.h=function(){x3.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var N3="closure_listenable_"+(1e6*Math.random()|0),vw=0;function L3(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++vw,this.ca=this.fa=!1}function k3(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function z3(n){this.src=n,this.g={},this.h=0}function P5(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=yv(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(k3(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function V5(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}z3.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=V5(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new L3(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var O5="closure_lm_"+(1e6*Math.random()|0),F5={};function Dv(n,e,t,r,o){if(r&&r.once)return Sv(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Dv(n,e[l],t,r,o);return null}return t=xs(t),n&&n[N3]?n.N(e,t,D3(r)?!!r.capture:!!r,o):G7(n,e,t,!1,r,o)}function G7(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=D3(o)?!!o.capture:!!o,m=q7(n);if(m||(n[O5]=m=new z3(n)),(t=m.add(e,t,r,h,l)).proxy)return t;if(r=function(){var e=R3;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mw||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(f0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sv(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Sv(n,e[l],t,r,o);return null}return t=xs(t),n&&n[N3]?n.O(e,t,D3(r)?!!r.capture:!!r,o):G7(n,e,t,!0,r,o)}function xv(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)xv(n,e[l],t,r,o);else r=D3(r)?!!r.capture:!!r,t=xs(t),n&&n[N3]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=V5(l=n.g[e],t,r,o))&&(k3(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=q7(n))&&(e=n.g[e.toString()],n=-1,e&&(n=V5(e,t,r,o)),(t=-1<n?e[n]:null)&&W7(t))}function W7(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[N3])P5(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(f0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=q7(e))?(P5(t,n),0==t.h&&(t.src=null,e[O5]=null)):k3(n)}}}function f0(n){return n in F5?F5[n]:F5[n]="on"+n}function R3(n,e){if(n.ca)n=!0;else{e=new x3(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&W7(n),n=t.call(r,e)}return n}function q7(n){return(n=n[O5])instanceof z3?n:null}var P3="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(n){return"function"==typeof n?n:(n[P3]||(n[P3]=function(e){return n.handleEvent(e)}),n[P3])}function Gr(){Ja.call(this),this.i=new z3(this),this.P=this,this.I=null}function dr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var o=e;Ev(e=new Mi(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=H5(h,r,!0,e)&&o}if(o=H5(h=e.g=n,r,!0,e)&&o,o=H5(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=H5(h=e.g=t[l],r,!1,e)&&o}function H5(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var m=h.listener,C=h.ia||h.src;h.fa&&P5(n.i,h),o=!1!==m.call(C,r)&&o}}return o&&!r.defaultPrevented}ui(Gr,Ja),Gr.prototype[N3]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){xv(this,n,e,t,r)},Gr.prototype.M=function(){if(Gr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)k3(t[r]);delete n.g[e],n.h--}}this.I=null},Gr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Z7=Ct.JSON.stringify;function AA(){var n=Lv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Q7,B5=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Nv,n=>n.reset());class Nv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Y7(n){Ct.setTimeout(()=>{throw n},0)}function V3(n,e){Q7||function(){var n=Ct.Promise.resolve(void 0);Q7=function(){n.then(kv)}}(),J7||(Q7(),J7=!0),Lv.add(n,e)}var J7=!1,Lv=new class{constructor(){this.h=this.g=null}add(e,t){const r=B5.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function kv(){for(var n;n=AA();){try{n.h.call(n.g)}catch(t){Y7(t)}var e=B5;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}J7=!1}function p0(n,e){Gr.call(this),this.h=n||1,this.g=e||Ct,this.j=Ei(this.kb,this),this.l=Date.now()}function U5(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function j5(n,e,t){if("function"==typeof n)t&&(n=Ei(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ei(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function zv(n){n.g=j5(()=>{n.g=null,n.i&&(n.i=!1,zv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(p0,Gr),(Ke=p0.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dr(this,"tick"),this.da&&(U5(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){p0.Z.M.call(this),U5(this),delete this.g};class Rv extends Ja{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zv(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function O3(n){Ja.call(this),this.h=n,this.g={}}ui(O3,Ja);var X7=[];function e9(n,e,t,r){Array.isArray(t)||(t&&(X7[0]=t.toString()),t=X7);for(var o=0;o<t.length;o++){var l=Dv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Pv(n){L5(n.g,function(e,t){this.g.hasOwnProperty(t)&&W7(e)},n),n.g={}}function F3(){this.g=!0}function fr(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return Z7(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}O3.prototype.M=function(){O3.Z.M.call(this),Pv(this)},O3.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},F3.prototype.Aa=function(){this.g=!1},F3.prototype.info=function(){};var _4={},bw=null;function Xa(){return bw=bw||new Gr}function Ov(n){Mi.call(this,_4.Ma,n)}function C4(n){const e=Xa();dr(e,new Ov(e,n))}function Fv(n,e){Mi.call(this,_4.STAT_EVENT,n),this.stat=e}function Ai(n){const e=Xa();dr(e,new Fv(e,n))}function Hv(n,e){Mi.call(this,_4.Na,n),this.size=e}function H3(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}_4.Ma="serverreachability",ui(Ov,Mi),_4.STAT_EVENT="statevent",ui(Fv,Mi),_4.Na="timingevent",ui(Hv,Mi);var g0={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},t9={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $5(){}function G5(){}$5.prototype.h=null;var Z5,W5={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function q5(){Mi.call(this,"d")}function n9(){Mi.call(this,"c")}function b4(){}function v0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new O3(this),this.P=r9,this.W=new p0(n=H7?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Bv}function Bv(){this.i=null,this.g="",this.h=!1}ui(q5,Mi),ui(n9,Mi),ui(b4,$5),b4.prototype.g=function(){return new XMLHttpRequest},b4.prototype.i=function(){return{}},Z5=new b4;var r9=45e3,U3={},K5={};function i9(n,e,t){n.K=1,n.v=f9(nc(e)),n.s=t,n.U=!0,s9(n,null)}function s9(n,e){n.F=Date.now(),y0(n),n.A=nc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Tw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Bv,n.g=E9(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Rv(Ei(n.Ia,n,n.g),n.O)),e9(n.V,n.g,"readystatechange",n.gb),e=n.H?O7(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),C4(1),function(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",m=l.split("&"),C=0;C<m.length;C++){var E=m[C].split("=");if(1<E.length){var T=E[0];E=E[1];var x=T.split("_");h=2<=x.length&&"type"==x[1]?h+(T+"=")+E+"&":h+(T+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function o9(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function a9(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=ww(n,t),o==K5){4==e&&(n.o=4,Ai(14),r=!1),fr(n.j,n.m,null,"[Incomplete Response]");break}if(o==U3){n.o=4,Ai(15),fr(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}fr(n.j,n.m,o,null),l9(n,o)}o9(n)&&o!=K5&&o!=U3&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),b9(e),e.L=!0,Ai(11))):(fr(n.j,n.m,t,"[Invalid Chunked Response]"),ec(n),j3(n))}function ww(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?K5:(t=Number(e.substring(t,r)),isNaN(t)?U3:(r+=1)+t>e.length?K5:(e=e.substr(r,t),n.C=r+t,e))}function y0(n){n.Y=Date.now()+n.P,c9(n,n.P)}function c9(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=H3(Ei(n.eb,n),e)}function Y5(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function j3(n){0==n.l.G||n.I||Xv(n.l,n)}function ec(n){Y5(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,U5(n.W),Pv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function l9(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Wv(t.i,n)))if(t.I=n.N,!n.J&&Wv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=H3(Ei(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;lh(t),_9(t)}Wi(t),Ai(18)}if(1>=Nw(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else ic(t,11)}else if((n.J||t.g==n)&&lh(t),!W2(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let E=o[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const T=E[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const x=E[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const Q=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var l=r.i;!l.g&&(Ii(Q,"spdy")||Ii(Q,"quic")||Ii(Q,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(p9(l,l.h),l.h=null))}if(r.D){const Ae=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.sa=Ae,$n(r.F,r.D,Ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=ey(r,r.H?r.la:null,r.W),h.J){Lw(r.i,h);var m=h,C=r.K;C&&m.setTimeout(C),m.B&&(Y5(m),y0(m)),r.g=h}else Jv(r);0<t.l.length&&M4(t)}else"stop"!=E[0]&&"close"!=E[0]||ic(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?ic(t,7):y9(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}C4(4)}catch(E){}}function Q5(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(z7(n)||"string"==typeof n)_v(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(z7(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(z7(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function w4(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof w4)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function J5(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];E4(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)E4(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function E4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=v0.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==q2(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const T=q2(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>T)&&(3!=T||H7||this.g&&(this.h.h||this.g.ga()||Vw(this.g)))){this.I||4!=T||7==e||C4(8==e||0>=x?3:2),Y5(this);var t=this.g.ba();this.N=t;t:if(o9(this)){var r=Vw(this.g);n="";var o=r.length,l=4==q2(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ec(this),j3(this);var h="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W2(m)){var E=m;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ai(12),ec(this),j3(this);break e}fr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,l9(this,t)}this.U?(a9(this,T,h),H7&&this.i&&3==T&&(e9(this.V,this.W,"tick",this.fb),this.W.start())):(fr(this.j,this.m,h,null),l9(this,h)),4==T&&ec(this),this.i&&!this.I&&(4==T?Xv(this.l,this):(this.i=!1,y0(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),ec(this),j3(this)}}}catch(T){}},Ke.fb=function(){if(this.g){var n=q2(this.g),e=this.g.ga();this.C<e.length&&(Y5(this),a9(this,n,e),this.i&&4!=n&&y0(this))}},Ke.cancel=function(){this.I=!0,ec(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(C4(3),Ai(17)),ec(this),this.o=2,j3(this)):c9(this,this.Y-n)},(Ke=w4.prototype).R=function(){J5(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return J5(this),this.g.concat()},Ke.get=function(n,e){return E4(this.h,n)?this.h[n]:e},Ke.set=function(n,e){E4(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var jv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof tc){this.g=void 0!==e?e:n.g,u9(this,n.j),this.s=n.s,h9(this,n.i),d9(this,n.m),this.l=n.l,e=n.h;var t=new $3;t.i=e.i,e.g&&(t.g=new w4(e.g),t.h=e.h),Iw(this,t),this.o=n.o}else n&&(t=String(n).match(jv))?(this.g=!!e,u9(this,t[1]||"",!0),this.s=X5(t[2]||""),h9(this,t[3]||"",!0),d9(this,t[4]),this.l=X5(t[5]||"",!0),Iw(this,t[6]||"",!0),this.o=X5(t[7]||"")):(this.g=!!e,this.h=new $3(null,this.g))}function nc(n){return new tc(n)}function u9(n,e,t){n.j=t?X5(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function h9(n,e,t){n.i=t?X5(e,!0):e}function d9(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Iw(n,e,t){e instanceof $3?(n.h=e,function(n,e){e&&!n.j&&(rc(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&($v(this,r),Tw(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=eh(e,kA)),n.h=new $3(e,n.g))}function $n(n,e,t){n.h.set(e,t)}function f9(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function X5(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eh(e,Mw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eh(e,Mw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(eh(t,"/"==t.charAt(0)?LA:NA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eh(t,zA)),n.join("")};var Mw=/[#\/\?@]/g,NA=/[#\?:]/g,LA=/[#\?]/g,kA=/[#\?@]/g,zA=/#/g;function $3(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rc(n){n.g||(n.g=new w4,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $v(n,e){rc(n),e=G3(n,e),E4(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,E4((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&J5(n)))}function Aw(n,e){return rc(n),e=G3(n,e),E4(n.g.h,e)}function Tw(n,e,t){$v(n,e),0<t.length&&(n.i=null,n.g.set(G3(n,e),P7(t)),n.h+=t.length)}function G3(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Gv(n){this.l=n||RA,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=$3.prototype).add=function(n,e){rc(this),this.i=null,n=G3(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){rc(this),this.g.forEach(function(t,r){_v(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){rc(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},Ke.R=function(n){rc(this);var e=[];if("string"==typeof n)Aw(this,n)&&(e=N5(e,this.g.get(G3(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=N5(e,n[t])}return e},Ke.set=function(n,e){return rc(this),this.i=null,Aw(this,n=G3(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var RA=10;function xw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Nw(n){return n.h?1:n.g?n.g.size:0}function Wv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function p9(n,e){n.g?n.g.add(e):n.h=e}function Lw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return P7(n.i)}function W3(){}function _0(){this.g=new W3}function Zv(n,e,t){const r=t||"";try{Q5(n,function(o,l){let h=o;D3(o)&&(h=Z7(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function th(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function I4(n){this.l=n.$b||null,this.j=n.ib||!1}function q3(n,e){Gr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=nh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gv.prototype.cancel=function(){if(this.i=qv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},W3.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},W3.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},ui(I4,$5),I4.prototype.g=function(){return new q3(this.l,this.j)},I4.prototype.i=function(n){return function(){return n}}({}),ui(q3,Gr);var nh=0;function Kv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function rh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,C0(n)}function C0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=q3.prototype).open=function(n,e){if(this.readyState!=nh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,C0(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rh(this)),this.readyState=nh},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,C0(this)),this.g&&(this.readyState=3,C0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rh(this):C0(this),3==this.readyState&&Kv(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,rh(this))},Ke.Ta=function(n){this.g&&(this.response=n,rh(this))},Ke.ha=function(){this.g&&rh(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(q3.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ih=Ct.JSON.parse;function or(n){Gr.call(this),this.headers=new w4,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zw,this.K=this.L=!1}ui(or,Gr);var zw="",PA=/^https?$/i,VA=["POST","PUT"];function OA(n){return"content-type"==n.toLowerCase()}function Z3(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yv(n),m9(n)}function Yv(n){n.D||(n.D=!0,dr(n,"complete"),dr(n,"error"))}function Pw(n){if(n.h&&void 0!==k7&&(!n.C[1]||4!=q2(n)||2!=n.ba()))if(n.v&&4==q2(n))j5(n.Fa,0,n);else if(dr(n,"readystatechange"),4==q2(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(jv)[1]||null;if(!o&&Ct.self&&Ct.self.location){var l=Ct.self.location.protocol;o=l.substr(0,l.length-1)}r=!PA.test(o?o.toLowerCase():"")}t=r}if(t)dr(n,"complete"),dr(n,"success");else{n.m=6;try{var h=2<q2(n)?n.g.statusText:""}catch(C){h=""}n.j=h+" ["+n.ba()+"]",Yv(n)}}finally{m9(n)}}}function m9(n,e){if(n.g){sh(n);const t=n.g,r=n.C[0]?x5:null;n.g=null,n.C=null,e||dr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function sh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function q2(n){return n.g?n.g.readyState:0}function Vw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function g9(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return L5(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function oh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function v9(n){this.za=0,this.l=[],this.h=new F3,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oh("baseRetryDelayMs",5e3,n),this.$a=oh("retryDelaySeedMs",1e4,n),this.Ya=oh("forwardChannelMaxRetries",2,n),this.ra=oh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Gv(n&&n.concurrentRequestLimit),this.Ca=new _0,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function y9(n){if(Ow(n),3==n.G){var e=n.V++,t=nc(n.F);$n(t,"SID",n.J),$n(t,"RID",e),$n(t,"TYPE","terminate"),K3(n,t),(e=new v0(n,n.h,e,void 0)).K=2,e.v=f9(nc(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=E9(e.l,null),e.g.ea(e.v)),e.F=Date.now(),y0(e)}w9(n)}function _9(n){n.g&&(b9(n),n.g.cancel(),n.g=null)}function Ow(n){_9(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),lh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function C9(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&M4(n)}function M4(n){xw(n.i)||n.m||(n.m=!0,V3(n.Ha,n),n.C=0)}function Qv(n,e){var t;t=e?e.m:n.V++;const r=nc(n.F);$n(r,"SID",n.J),$n(r,"RID",t),$n(r,"AID",n.U),K3(n,r),n.o&&n.s&&g9(r,n.o,n.s),t=new v0(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ah(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),p9(n.i,t),i9(t,r,e)}function K3(n,e){n.j&&Q5({},function(t,r){$n(e,r,t)})}function ah(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ei(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let m=!0;for(let C=0;C<t;C++){let E=o[C].h;const T=o[C].g;if(E-=l,0>E)l=Math.max(0,o[C].h-100),m=!1;else try{Zv(T,h,"req"+E+"_")}catch(x){r&&r(T)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Jv(n){n.g||n.u||(n.Y=1,V3(n.Ga,n),n.A=0)}function Wi(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=H3(Ei(n.Ga,n),uh(n,n.A)),n.A++,0))}function b9(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function ch(n){n.g=new v0(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=nc(n.oa);$n(e,"RID","rpc"),$n(e,"SID",n.J),$n(e,"CI",n.N?"0":"1"),$n(e,"AID",n.U),K3(n,e),$n(e,"TYPE","xmlhttp"),n.o&&n.s&&g9(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=f9(nc(e)),t.s=null,t.U=!0,s9(t,n)}function lh(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function Xv(n,e){var t=null;if(n.g==e){lh(n),b9(n),n.g=null;var r=2}else{if(!Wv(n.i,e))return;t=e.D,Lw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;dr(r=Xa(),new Hv(r,t,e,o)),M4(n)}else Jv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(Nw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=H3(Ei(n.Ha,n,e),uh(n,n.C)),n.C++,0)))}(n,e)||2==r&&Wi(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:ic(n,5);break;case 4:ic(n,10);break;case 3:ic(n,6);break;default:ic(n,2)}}function uh(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ic(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ei(n.jb,n);t||(t=new tc("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||u9(t,"https"),f9(t)),function(n,e){const t=new F3;if(Ct.Image){const r=new Image;r.onload=d0(th,t,r,"TestLoadImage: loaded",!0,e),r.onerror=d0(th,t,r,"TestLoadImage: error",!1,e),r.onabort=d0(th,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=d0(th,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.G=0,n.j&&n.j.va(e),w9(n),Ow(n)}function w9(n){n.G=0,n.I=-1,n.j&&((0!=qv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,P7(n.l),n.l.length=0),n.j.ua())}function ey(n,e,t){let r=function(n){return n instanceof tc?nc(n):new tc(n,void 0)}(t);if(""!=r.i)e&&h9(r,e+"."+r.i),d9(r,r.m);else{const o=Ct.location;r=function(n,e,t,r){var o=new tc(null,void 0);return n&&u9(o,n),e&&h9(o,e),t&&d9(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&L5(n.aa,function(o,l){$n(r,l,o)}),t=n.sa,(e=n.D)&&t&&$n(r,e,t),$n(r,"VER",n.ma),K3(n,r),r}function E9(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&n.Ba&&!n.qa?new I4({ib:!0}):n.qa)).L=n.H,e}function I9(){}function hh(){if(S3&&!(10<=Number(pw)))throw Error("Environmental error: no available transport.")}function K1(n,e){Gr.call(this),this.g=new v9(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!W2(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!W2(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new A4(this)}function dh(n){q5.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function M9(){n9.call(this),this.status=1}function A4(n){this.g=n}(Ke=or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z5.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Z5),this.g.onreadystatechange=Ei(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Z3(this,l)}n=t||"";const o=new w4(this.headers);r&&Q5(r,function(l,h){o.set(h,l)}),r=function(n){e:{var e=OA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=yv(VA,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sh(this),0<this.B&&((this.K=function(n){return S3&&Tv()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.pa,this)):this.A=j5(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Z3(this,l)}},Ke.pa=function(){void 0!==k7&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,dr(this,"complete"),dr(this,"abort"),m9(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),m9(this,!0)),or.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?Pw(this):this.cb())},Ke.cb=function(){Pw(this)},Ke.ba=function(){try{return 2<q2(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ih(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=v9.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new v0(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=O7(l),Ev(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ah(this,o,e),$n(t=nc(this.F),"RID",n),$n(t,"CVER",22),this.D&&$n(t,"X-HTTP-Session-Id",this.D),K3(this,t),this.o&&l&&g9(t,this.o,l),p9(this.i,o),this.Ra&&$n(t,"TYPE","init"),this.ja?($n(t,"$req",e),$n(t,"SID","null"),o.$=!0,i9(o,t,null)):i9(o,t,e),this.G=2}}else 3==this.G&&(n?Qv(this,n):0==this.l.length||xw(this.i)||Qv(this))},Ke.Ga=function(){if(this.u=null,ch(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=H3(Ei(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ai(10),_9(this),ch(this))},Ke.ab=function(){null!=this.v&&(this.v=null,_9(this),Wi(this),Ai(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ai(2)):(this.h.info("Failed to ping google.com"),Ai(1))},(Ke=I9.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},hh.prototype.g=function(n,e){return new K1(n,e)},ui(K1,Gr),K1.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),V3(Ei(n.hb,n,e))),Ai(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ey(n,null,n.W),M4(n)},K1.prototype.close=function(){y9(this.g)},K1.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,C9(this.g,e)}else this.v?((e={}).__data__=Z7(n),C9(this.g,e)):C9(this.g,n)},K1.prototype.M=function(){this.g.j=null,delete this.j,y9(this.g),delete this.g,K1.Z.M.call(this)},ui(dh,q5),ui(M9,n9),ui(A4,I9),A4.prototype.xa=function(){dr(this.g,"a")},A4.prototype.wa=function(n){dr(this.g,new dh(n))},A4.prototype.va=function(n){dr(this.g,new M9(n))},A4.prototype.ua=function(){dr(this.g,"b")},hh.prototype.createWebChannel=hh.prototype.g,K1.prototype.send=K1.prototype.u,K1.prototype.open=K1.prototype.m,K1.prototype.close=K1.prototype.close,g0.NO_ERROR=0,g0.TIMEOUT=8,g0.HTTP_ERROR=6,t9.COMPLETE="complete",G5.EventType=W5,W5.OPEN="a",W5.CLOSE="b",W5.ERROR="c",W5.MESSAGE="d",Gr.prototype.listen=Gr.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.La,or.prototype.getLastErrorCode=or.prototype.Da,or.prototype.getStatus=or.prototype.ba,or.prototype.getResponseJson=or.prototype.Qa,or.prototype.getResponseText=or.prototype.ga,or.prototype.send=or.prototype.ea;var A9=Qa.createWebChannelTransport=function(){return new hh},Hw=Qa.getStatEventTarget=function(){return Xa()},Y1=Qa.ErrorCode=g0,Bw=Qa.EventType=t9,HA=Qa.Event=_4,ty=Qa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},BA=Qa.FetchXmlHttpFactory=I4,fh=Qa.WebChannel=G5,Uw=Qa.XhrIo=or;const ny="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let b0="9.1.3";const Z2=new H1.Yd("@firebase/firestore");function T9(){return Z2.logLevel}function He(n,...e){if(Z2.logLevel<=H1.in.DEBUG){const t=e.map(mh);Z2.debug(`Firestore (${b0}): ${n}`,...t)}}function pr(n,...e){if(Z2.logLevel<=H1.in.ERROR){const t=e.map(mh);Z2.error(`Firestore (${b0}): ${n}`,...t)}}function ph(n,...e){if(Z2.logLevel<=H1.in.WARN){const t=e.map(mh);Z2.warn(`Firestore (${b0}): ${n}`,...t)}}function mh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${b0}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function dt(n,e){n||et()}function je(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ry{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class UA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class jA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $A{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=E=>this.i!==o?(o=this.i,t(E)):Promise.resolve();let h=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Dr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const E=h;e.enqueueRetryable((0,Ie.Z)(function*(){yield E.promise,yield l(r.currentUser)}))},C=E=>{He("FirebaseCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(E=>C(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?C(E):(He("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new ry(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new Ti(e)}}class GA{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ti.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class iy{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Gw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}b1.T=-1;class sy{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Gw(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function Y3(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function D9(n){return n+"\0"}class fi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fi.fromMillis(Date.now())}static fromDate(e){return fi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new fi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function oy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function K2(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sr(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class gh{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===gh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends gh{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const ay=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends gh{construct(e,t,r){return new pi(e,t,r)}static isValidIdentifier(e){return ay.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new ke(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const C=e[o+1];if("\\"!==C&&"."!==C&&"`"!==C)throw new ke(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=C,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new ke(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class Y2{constructor(e){this.fields=e,e.sort(pi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Y3(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Wr(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const cy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function w1(n){if(dt(!!n),"string"==typeof n){let e=0;const t=cy.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sc(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function Q3(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ly(n){const e=n.mapValue.fields.__previous_value__;return Q3(e)?ly(e):e}function oc(n){const e=w1(n.mapValue.fields.__local_write_time__.timestampValue);return new fi(e.seconds,e.nanos)}function T4(n){return null==n}function w0(n){return 0===n&&1/n==-1/0}function S9(n){return"number"==typeof n&&Number.isInteger(n)&&!w0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Qt.fromString(e))}static fromName(e){return new $e(Qt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Qt(e.slice()))}}function E0(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Q3(n)?4:10:et()}function n2(n,e){const t=E0(n);if(t!==E0(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oc(n).isEqual(oc(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=w1(r.timestampValue),h=w1(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,sc(n.bytesValue).isEqual(sc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return ar(r.geoPointValue.latitude)===ar(o.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ar(r.integerValue)===ar(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=ar(r.doubleValue),h=ar(o.doubleValue);return l===h?w0(l)===w0(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return Y3(n.arrayValue.values||[],e.arrayValue.values||[],n2);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(oy(l)!==oy(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===h[m]||!n2(l[m],h[m])))return!1;return!0}(n,e);default:return et()}var o}function J3(n,e){return void 0!==(n.values||[]).find(t=>n2(t,e))}function X3(n,e){const t=E0(n),r=E0(e);if(t!==r)return Ut(t,r);switch(t){case 0:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=ar(o.integerValue||o.doubleValue),m=ar(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return eu(n.timestampValue,e.timestampValue);case 4:return eu(oc(n),oc(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(o,l){const h=sc(o),m=sc(l);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),m=l.split("/");for(let C=0;C<h.length&&C<m.length;C++){const E=Ut(h[C],m[C]);if(0!==E)return E}return Ut(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ut(ar(o.latitude),ar(l.latitude));return 0!==h?h:Ut(ar(o.longitude),ar(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],m=l.values||[];for(let C=0;C<h.length&&C<m.length;++C){const E=X3(h[C],m[C]);if(E)return E}return Ut(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},m=Object.keys(h),C=l.fields||{},E=Object.keys(C);m.sort(),E.sort();for(let T=0;T<m.length&&T<E.length;++T){const x=Ut(m[T],E[T]);if(0!==x)return x;const P=X3(h[m[T]],C[E[T]]);if(0!==P)return P}return Ut(m.length,E.length)}(n.mapValue,e.mapValue);default:throw et()}}function eu(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=w1(n),r=w1(e),o=Ut(t.seconds,r.seconds);return 0!==o?o:Ut(t.nanos,r.nanos)}function x9(n){return uy(n)}function uy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=w1(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=uy(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const m of o)h?h=!1:l+=",",l+=`${m}:${uy(r.fields[m])}`;return l+"}"}(n.mapValue):et();var e}function N9(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hy(n){return!!n&&"integerValue"in n}function L9(n){return!!n&&"arrayValue"in n}function dy(n){return!!n&&"nullValue"in n}function fy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vh(n){return!!n&&"mapValue"in n}function tu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return K2(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tu(n.arrayValue.values[t]);return e}return Object.assign({},n)}class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=pi.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const C=this.getFieldsMap(t);this.applyChanges(C,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=tu(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return n2(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){K2(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new qi(tu(this.value))}}function py(n){const e=[];return K2(n.fields,(t,r)=>{const o=new pi([t]);if(vh(r)){const l=py(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Y2(e)}class Pn{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Pn(e,0,kt.min(),qi.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,r,0)}static newNoDocument(e,t){return new Pn(e,2,t,qi.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,qi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Pn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qw{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.A=null}}function Zw(n,e=null,t=[],r=[],o=null,l=null,h=null){return new qw(n,e,t,r,o,l,h)}function yh(n){const e=je(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+x9(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),T4(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ac(e.startAt)),e.endAt&&(t+="|ub:",t+=ac(e.endAt)),e.A=t}return e.A}function _h(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!qA(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!n2(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nE(n.startAt,e.startAt)&&nE(n.endAt,e.endAt)}function Ch(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Zi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new fo(e,t,r):"array-contains"===t?new Xw(e,r):"in"===t?new WA(e,r):"not-in"===t?new eE(e,r):"array-contains-any"===t?new tE(e,r):new Zi(e,t,r)}static R(e,t,r){return"in"===t?new Qw(e,r):new Jw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(X3(t,this.value)):null!==t&&E0(this.value)===E0(t)&&this.P(X3(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fo extends Zi{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.P(t)}}class Qw extends Zi{constructor(e,t){super(e,"in",t),this.keys=my(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jw extends Zi{constructor(e,t){super(e,"not-in",t),this.keys=my(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function my(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class Xw extends Zi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return L9(t)&&J3(t.arrayValue,this.value)}}class WA extends Zi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&J3(this.value.arrayValue,t)}}class eE extends Zi{constructor(e,t){super(e,"not-in",t)}matches(e){if(J3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!J3(this.value.arrayValue,t)}}class tE extends Zi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!L9(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>J3(this.value.arrayValue,r))}}class nu{constructor(e,t){this.position=e,this.before=t}}function ac(n){return`${n.before?"b":"a"}:${n.position.map(e=>x9(e)).join(",")}`}class D4{constructor(e,t="asc"){this.field=e,this.dir=t}}function qA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function gy(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?$e.comparator($e.fromName(h.referenceValue),t.key):X3(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function nE(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!n2(n.position[t],e.position[t]))return!1;return!0}class cc{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,C=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=C,this.V=null,this.S=null}}function rE(n,e,t,r,o,l,h,m){return new cc(n,e,t,r,o,l,h,m)}function lc(n){return new cc(n)}function bh(n){return!T4(n.limit)&&"F"===n.limitType}function wh(n){return!T4(n.limit)&&"L"===n.limitType}function k9(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vy(n){for(const e of n.filters)if(e.v())return e.field;return null}function z9(n){return null!==n.collectionGroup}function I0(n){const e=je(n);if(null===e.V){e.V=[];const t=vy(e),r=k9(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new D4(t)),e.V.push(new D4(pi.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new D4(pi.keyField(),l))}}}return e.V}function Ns(n){const e=je(n);if(!e.S)if("F"===e.limitType)e.S=Zw(e.path,e.collectionGroup,I0(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of I0(e))t.push(new D4(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new nu(e.endAt.position,!e.endAt.before):null,o=e.startAt?new nu(e.startAt.position,!e.startAt.before):null;e.S=Zw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.S}function Ls(n,e,t){return new cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eh(n,e){return _h(Ns(n),Ns(e))&&n.limitType===e.limitType}function R9(n){return`${yh(Ns(n))}|lt:${n.limitType}`}function P9(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${x9(r.value)}`;var r}).join(", ")}]`),T4(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+ac(n.startAt)),n.endAt&&(e+=", endAt: "+ac(n.endAt)),`Target(${e})`}(Ns(n))}; limitType=${n.limitType})`}function M0(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):$e.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!gy(t.startAt,I0(t),r)||t.endAt&&gy(t.endAt,I0(t),r)));var t,r}function V9(n){return(e,t)=>{let r=!1;for(const o of I0(n)){const l=yy(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function yy(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(o,l,h){const m=l.data.field(o),C=h.data.field(o);return null!==m&&null!==C?X3(m,C):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function Ih(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:w0(e)?"-0":e}}function Mh(n){return{integerValue:""+n}}function Ah(n,e){return S9(e)?Mh(e):Ih(n,e)}class S4{constructor(){this._=void 0}}function Th(n,e,t){return n instanceof A0?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof x4?F9(n,e):n instanceof N4?Cy(n,e):function(r,o){const l=O9(r,o),h=Dh(l)+Dh(r.C);return hy(l)&&hy(r.C)?Mh(h):Ih(r.N,h)}(n,e)}function _y(n,e,t){return n instanceof x4?F9(n,e):n instanceof N4?Cy(n,e):t}function O9(n,e){return n instanceof T0?hy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class A0 extends S4{}class x4 extends S4{constructor(e){super(),this.elements=e}}function F9(n,e){const t=by(e);for(const r of n.elements)t.some(o=>n2(o,r))||t.push(r);return{arrayValue:{values:t}}}class N4 extends S4{constructor(e){super(),this.elements=e}}function Cy(n,e){let t=by(e);for(const r of n.elements)t=t.filter(o=>!n2(o,r));return{arrayValue:{values:t}}}class T0 extends S4{constructor(e,t){super(),this.N=e,this.C=t}}function Dh(n){return ar(n.integerValue||n.doubleValue)}function by(n){return L9(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xr{constructor(e,t){this.field=e,this.transform=t}}class Sh{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function L4(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class D0{}function wy(n,e,t){n instanceof iu?function(r,o,l){const h=r.value.clone(),m=Ay(r.fieldTransforms,o,l.transformResults);h.setAll(m),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Q2?function(r,o,l){if(!L4(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Ay(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(My(r)),m.setAll(h),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function S0(n,e,t){var o;n instanceof iu?function(r,o,l){if(!L4(r.precondition,o))return;const h=r.value.clone(),m=Ty(r.fieldTransforms,l,o);h.setAll(m),o.convertToFoundDocument(Iy(o),h).setHasLocalMutations()}(n,e,t):n instanceof Q2?function(r,o,l){if(!L4(r.precondition,o))return;const h=Ty(r.fieldTransforms,l,o),m=o.data;m.setAll(My(r)),m.setAll(h),o.convertToFoundDocument(Iy(o),m).setHasLocalMutations()}(n,e,t):L4(n.precondition,o=e)&&o.convertToNoDocument(kt.min())}function iE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=O9(r.transform,o||null);null!=l&&(null==t&&(t=qi.empty()),t.set(r.field,l))}return t||null}function Ey(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Y3(t,r,(o,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof x4&&r instanceof x4||t instanceof N4&&r instanceof N4?Y3(t.elements,r.elements,n2):t instanceof T0&&r instanceof T0?n2(t.C,r.C):t instanceof A0&&r instanceof A0);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Iy(n){return n.isFoundDocument()?n.version:kt.min()}class iu extends D0{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Q2 extends D0{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function My(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ay(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,_y(h,m,t[o]))}return r}function Ty(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,Th(l,h,e))}return r}class ks extends D0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class k4 extends D0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class H9{constructor(e){this.count=e}}var mr,$t;function Dy(n){switch(n){default:return et();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function xh(n){if(void 0===n)return pr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case mr.OK:return ge.OK;case mr.CANCELLED:return ge.CANCELLED;case mr.UNKNOWN:return ge.UNKNOWN;case mr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case mr.INTERNAL:return ge.INTERNAL;case mr.UNAVAILABLE:return ge.UNAVAILABLE;case mr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case mr.NOT_FOUND:return ge.NOT_FOUND;case mr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case mr.ABORTED:return ge.ABORTED;case mr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case mr.DATA_LOSS:return ge.DATA_LOSS;default:return et()}}($t=mr||(mr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class Nr{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new Nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new su(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new su(this.root,e,this.comparator,!1)}getReverseIterator(){return new su(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new su(this.root,e,this.comparator,!0)}}class su{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:qr.RED,this.left=null!=o?o:qr.EMPTY,this.right=null!=l?l:qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new qr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return qr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jn{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jn(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const sE=new Nr($e.comparator);function gr(){return sE}const ou=new Nr($e.comparator);function uc(){return ou}const Nh=new Nr($e.comparator);function z4(){return Nh}const oE=new Jn($e.comparator);function mn(...n){let e=oE;for(const t of n)e=e.add(t);return e}const aE=new Jn(Ut);function au(){return aE}class x0{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,N0.createSynthesizedTargetChangeForCurrentChange(e,t)),new x0(kt.min(),r,au(),gr(),mn())}}class N0{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new N0(Wr.EMPTY_BYTE_STRING,t,mn(),mn(),mn())}}class cu{constructor(e,t,r,o){this.k=e,this.removedTargetIds=t,this.key=r,this.$=o}}class Lh{constructor(e,t){this.targetId=e,this.O=t}}class xy{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Ny{constructor(){this.F=0,this.M=kh(),this.L=Wr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=mn(),t=mn(),r=mn();return this.M.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new N0(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=kh()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Ly{constructor(e){this.tt=e,this.et=new Map,this.nt=gr(),this.st=hc(),this.it=new Jn(Ut)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,o)=>{this.ht(o)&&t(o)})}ft(e){const t=e.targetId,r=e.O.count,o=this.dt(t);if(o){const l=o.target;if(Ch(l))if(0===r){const h=new $e(l.path);this.at(t,h,Pn.newNoDocument(h,kt.min()))}else dt(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,h)=>{const m=this.dt(h);if(m){if(l.current&&Ch(m.target)){const C=new $e(m.target.path);null!==this.nt.get(C)||this.gt(h,C)||this.at(h,C,Pn.newNoDocument(C,e))}l.K&&(t.set(h,l.W()),l.G())}});let r=mn();this.st.forEach((l,h)=>{let m=!0;h.forEachWhile(C=>{const E=this.dt(C);return!E||2===E.purpose||(m=!1,!1)}),m&&(r=r.add(l))});const o=new x0(e,t,this.it,this.nt,r);return this.nt=gr(),this.st=hc(),this.it=new Jn(Ut),o}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,r){if(!this.ht(e))return;const o=this.ut(e);this.gt(e,t)?o.H(t,1):o.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Ny,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Jn(Ut),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Ny),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function hc(){return new Nr($e.comparator)}function kh(){return new Nr($e.comparator)}const cE={asc:"ASCENDING",desc:"DESCENDING"},lE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ZA{constructor(e,t){this.databaseId=e,this.D=t}}function zh(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uE(n,e){return n.D?e.toBase64():e.toUint8Array()}function KA(n,e){return zh(n,e.toTimestamp())}function Zr(n){return dt(!!n),kt.fromTimestamp(function(e){const t=w1(e);return new fi(t.seconds,t.nanos)}(n))}function B9(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hE(n){const e=Qt.fromString(n);return dt(Je(e)),e}function Rh(n,e){return B9(n.databaseId,e.path)}function J2(n,e){const t=hE(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(dE(t))}function ky(n,e){return B9(n.databaseId,e)}function zy(n){const e=hE(n);return 4===e.length?Qt.emptyPath():dE(e)}function Ph(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dE(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function fE(n,e,t){return{name:Rh(n,e),fields:t.value.mapValue.fields}}function pE(n,e,t){const r=J2(n,e.name),o=Zr(e.updateTime),l=new qi({mapValue:{fields:e.fields}}),h=Pn.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function a(n,e){let t;if(e instanceof iu)t={update:fE(n,e.key,e.value)};else if(e instanceof ks)t={delete:Rh(n,e.key)};else if(e instanceof Q2)t={update:fE(n,e.key,e.data),updateMask:Me(e.fieldMask)};else{if(!(e instanceof k4))return et();t={verify:Rh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof A0)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof x4)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof N4)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof T0)return{fieldPath:l.field.canonicalString(),increment:h.C};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:KA(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function c(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?cr.updateTime(Zr(o.updateTime)):void 0!==o.exists?cr.exists(o.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let m=null;"setToServerValue"in h?(dt("REQUEST_TIME"===h.setToServerValue),m=new A0):"appendMissingElements"in h?m=new x4(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new N4(h.removeAllFromArray.values||[]):"increment"in h?m=new T0(l,h.increment):et();const C=pi.fromServerFormat(h.fieldPath);return new xr(C,m)}(n,o)):[];var o;if(e.update){const o=J2(n,e.update.name),l=new qi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Y2((e.updateMask.fieldPaths||[]).map(E=>pi.fromServerFormat(E)));return new Q2(o,l,h,t,r)}return new iu(o,l,t,r)}if(e.delete){const o=J2(n,e.delete);return new ks(o,t)}if(e.verify){const o=J2(n,e.verify);return new k4(o,t)}return et()}function d(n,e){return{documents:[ky(n,e.path)]}}function v(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ky(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ky(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(m){if(0===m.length)return;const C=m.map(E=>function(T){if("=="===T.op){if(fy(T.value))return{unaryFilter:{field:Z(T.field),op:"IS_NAN"}};if(dy(T.value))return{unaryFilter:{field:Z(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(fy(T.value))return{unaryFilter:{field:Z(T.field),op:"IS_NOT_NAN"}};if(dy(T.value))return{unaryFilter:{field:Z(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Z(T.field),op:U(T.op),value:T.value}}}(E));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(m){if(0!==m.length)return m.map(C=>{return{field:Z((E=C).field),direction:z(E.dir)};var E})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(C=e.limit,n.D||T4(C)?C:{value:C});var C;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=D(e.startAt)),e.endAt&&(t.structuredQuery.endAt=D(e.endAt)),t}function y(n){let e=zy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=M(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(T=>{return new D4(he((x=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(T){let x;return x="object"==typeof T?T.value:T,T4(x)?null:x}(t.limit));let C=null;t.startAt&&(C=k(t.startAt));let E=null;return t.endAt&&(E=k(t.endAt)),rE(e,o,h,l,m,"F",C,E)}function M(n){return n?void 0!==n.unaryFilter?[Pe(n)]:void 0!==n.fieldFilter?[ne(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>M(e)).reduce((e,t)=>e.concat(t)):et():[]}function D(n){return{before:n.before,values:n.position}}function k(n){return new nu(n.values||[],!!n.before)}function z(n){return cE[n]}function U(n){return lE[n]}function Z(n){return{fieldPath:n.canonicalString()}}function he(n){return pi.fromServerFormat(n.fieldPath)}function ne(n){return Zi.create(he(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Pe(n){switch(n.unaryFilter.op){case"IS_NAN":const e=he(n.unaryFilter.field);return Zi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=he(n.unaryFilter.field);return Zi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=he(n.unaryFilter.field);return Zi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=he(n.unaryFilter.field);return Zi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function Me(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Je(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function tt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vr(e)),e=Ht(n.get(t),e);return vr(e)}function Ht(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function vr(n){return n+"\x01\x01"}function yr(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&et(),n.charAt(h+1)){case"\x01":const m=n.substring(l,h);let C;0===o.length?C=m:(o+=m,C=o,o=""),r.push(C);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:et()}l=h+2}return new Qt(r)}class lu{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Kr{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Kr.store="owner",Kr.key="owner";class Q1{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Q1.store="mutationQueues",Q1.keyPath="userId";class hn{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}hn.store="mutations",hn.keyPath="batchId",hn.userMutationsIndex="userMutationsIndex",hn.userMutationsKeyPath=["userId","batchId"];class Yr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,tt(t)]}static key(e,t,r){return[e,tt(t),r]}}Yr.store="documentMutations",Yr.PLACEHOLDER=new Yr;class U9{constructor(e,t){this.path=e,this.readTime=t}}class j9{constructor(e,t){this.path=e,this.version=t}}class Vn{constructor(e,t,r,o,l,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=h}}Vn.store="remoteDocuments",Vn.readTimeIndex="readTimeIndex",Vn.readTimeIndexPath="readTime",Vn.collectionReadTimeIndex="collectionReadTimeIndex",Vn.collectionReadTimeIndexPath=["parentPath","readTime"];class zs{constructor(e){this.byteSize=e}}zs.store="remoteDocumentGlobal",zs.key="remoteDocumentGlobalKey";class Rs{constructor(e,t,r,o,l,h,m){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=h,this.query=m}}Rs.store="targets",Rs.keyPath="targetId",Rs.queryTargetsIndexName="queryTargetsIndex",Rs.queryTargetsKeyPath=["canonicalId","targetId"];class Ki{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Ki.store="targetDocuments",Ki.keyPath=["targetId","path"],Ki.documentTargetsIndex="documentTargetsIndex",Ki.documentTargetsKeyPath=["path","targetId"];class po{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}po.key="targetGlobalKey",po.store="targetGlobal";class uu{constructor(e,t){this.collectionId=e,this.parent=t}}uu.store="collectionParents",uu.keyPath=["collectionId","parent"];class R4{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}R4.store="clientMetadata",R4.keyPath="clientId";class Vh{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Vh.store="bundles",Vh.keyPath="bundleId";class Oh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Oh.store="namedQueries",Oh.keyPath="name";const nx=[Q1.store,hn.store,Yr.store,Vn.store,Rs.store,Kr.store,po.store,Ki.store,R4.store,zs.store,uu.store,Vh.store,Oh.store],YA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,r)=>{t(e)})}static reject(e){return new ze((t,r)=>{r(e)})}static waitFor(e){return new ze((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},C=>r(C))}),h=!0,l===o&&t()})}static or(e){let t=ze.resolve(!1);for(const r of e)t=t.next(o=>o?ze.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class Ry{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Dr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new $9(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const o=mE(r.target.error);this.Et.reject(new $9(e,o))}}static open(e,t,r,o){try{return new Ry(t,e.transaction(o,r))}catch(l){throw new $9(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new ix(t)}}class X2{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===X2.Rt((0,R.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),du(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,R.hl)())return!1;if(X2.Pt())return!0;const e=(0,R.z$)(),t=X2.Rt(e),r=0<t&&t<10,o=X2.vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new $9(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new ke(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ke(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new $9(e,m))},l.onupgradeneeded=h=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.At.Ct(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,Ie.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Dt(e);const C=Ry.open(l.db,e,h?"readonly":"readwrite",r),E=o(C).catch(T=>(C.abort(T),ze.reject(T))).toPromise();return E.catch(()=>{}),yield C.It,E}catch(C){const E="FirebaseError"!==C.name&&m<3;if(He("SimpleDb","Transaction failed with error:",C.message,"Retrying:",E),l.close(),!E)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rx{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return du(this.kt.delete())}}class $9 extends ke{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hu(n){return"IndexedDbTransactionError"===n.name}class ix{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),du(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),du(this.store.add(e))}get(e){return du(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),du(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),du(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Bt(r,(l,h)=>{o.push(h)}).next(()=>o)}Ut(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const o=this.cursor(r);return this.Bt(o,(l,h,m)=>m.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Bt(o,t)}jt(e){const t=this.cursor({});return new ze((r,o)=>{t.onerror=l=>{const h=mE(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Bt(e,t){const r=[];return new ze((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const C=new rx(m),E=t(m.primaryKey,m.value,C);if(E instanceof ze){const T=E.catch(x=>(C.done(),ze.reject(x)));r.push(T)}C.isDone?o():null===C.Ft?m.continue():m.continue(C.Ft)}}).next(()=>ze.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function du(n){return new ze((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=mE(r.target.error);t(o)}})}let JA=!1;function mE(n){const e=X2.Rt((0,R.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return JA||(JA=!0,setTimeout(()=>{throw r},0)),r}}return n}class XA extends QA{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ps(n,e){const t=je(n);return X2.St(t.Qt,e)}class gE{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&wy(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&S0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&S0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(kt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mn())}isEqual(e){return this.batchId===e.batchId&&Y3(this.mutations,e.mutations,(t,r)=>Ey(t,r))&&Y3(this.baseMutations,e.baseMutations,(t,r)=>Ey(t,r))}}class vE{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=z4();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new vE(e,t,r,o)}}class L0{constructor(e,t,r,o,l=kt.min(),h=kt.min(),m=Wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new L0(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new L0(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new L0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class eT{constructor(e){this.Wt=e}}function yE(n,e){if(e.document)return pE(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=$e.fromSegments(e.noDocument.path),r=Hh(e.noDocument.readTime),o=Pn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=$e.fromSegments(e.unknownDocument.path),r=Hh(e.unknownDocument.version);return Pn.newUnknownDocument(t,r)}return et()}function tT(n,e,t){const r=_E(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:Rh(m=n.Wt,(C=e).key),fields:C.data.value.mapValue.fields,updateTime:zh(m,C.version.toTimestamp())};return new Vn(null,null,l,e.hasCommittedMutations,r,o)}var m,C;if(e.isNoDocument()){const l=e.key.path.toArray(),h=Fh(e.version),m=e.hasCommittedMutations;return new Vn(null,new U9(l,h),null,m,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),h=Fh(e.version);return new Vn(new j9(l,h),null,null,!0,r,o)}return et()}function _E(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nT(n){const e=new fi(n[0],n[1]);return kt.fromTimestamp(e)}function Fh(n){const e=n.toTimestamp();return new lu(e.seconds,e.nanoseconds)}function Hh(n){const e=new fi(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function Bh(n,e){const t=(e.baseMutations||[]).map(l=>c(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>c(n.Wt,l)),o=fi.fromMillis(e.localWriteTimeMs);return new gE(e.batchId,o,t,r)}function G9(n){const e=Hh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hh(n.lastLimboFreeSnapshotVersion):kt.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Ns(lc(zy(o.documents[0])))):r=Ns(y(n.query)),new L0(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function rT(n,e){const t=Fh(e.snapshotVersion),r=Fh(e.lastLimboFreeSnapshotVersion);let o;o=Ch(e.target)?d(n.Wt,e.target):v(n.Wt,e.target);const l=e.resumeToken.toBase64();return new Rs(e.targetId,yh(e.target),t,l,e.sequenceNumber,r,o)}function CE(n){const e=y({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ls(e,e.limit,"L"):e}class sx{getBundleMetadata(e,t){return iT(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Hh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return iT(e).put({bundleId:(r=t).id,createTime:Fh(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return sT(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:CE(o.bundledQuery),readTime:Hh(o.readTime)};var o})}saveNamedQuery(e,t){return sT(e).put({name:(r=t).name,readTime:Fh(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function iT(n){return Ps(n,Vh.store)}function sT(n){return Ps(n,Oh.store)}class ox{constructor(){this.Gt=new bE}addToCollectionParentIndex(e,t){return this.Gt.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.Gt.getEntries(t))}}class bE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Jn(Qt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Jn(Qt.comparator)).toArray()}}class ax{constructor(){this.zt=new bE}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:r,parent:tt(o)};return oT(e).put(l)}return ze.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[D9(t),""],!1,!0);return oT(e).Lt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(yr(h.parent))}return r})}}function oT(n){return Ps(n,uu.store)}const aT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cT(n,e,t){const r=n.store(hn.store),o=n.store(Yr.store),l=[],h=IDBKeyRange.only(t.batchId);let m=0;const C=r.Kt({range:h},(T,x,P)=>(m++,P.delete()));l.push(C.next(()=>{dt(1===m)}));const E=[];for(const T of t.mutations){const x=Yr.key(e,T.key.path,t.batchId);l.push(o.delete(x)),E.push(T.key)}return ze.waitFor(l).next(()=>E)}function Py(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class wE{constructor(e,t,r,o){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=o,this.Jt={}}static Yt(e,t,r,o){dt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new wE(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return k0(e).Kt({index:hn.userMutationsIndex,range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=Uh(e),h=k0(e);return h.add({}).next(m=>{dt("number"==typeof m);const C=new gE(m,t,r,o),E=function(P,B,Q){const Ae=Q.baseMutations.map(Ye=>a(P.Wt,Ye)),Ve=Q.mutations.map(Ye=>a(P.Wt,Ye));return new hn(B,Q.batchId,Q.localWriteTime.toMillis(),Ae,Ve)}(this.N,this.userId,C),T=[];let x=new Jn((P,B)=>Ut(P.canonicalString(),B.canonicalString()));for(const P of o){const B=Yr.key(this.userId,P.key.path,m);x=x.add(P.key.path.popLast()),T.push(h.put(E)),T.push(l.put(B,Yr.PLACEHOLDER))}return x.forEach(P=>{T.push(this.Ht.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Jt[m]=C.keys()}),ze.waitFor(T).next(()=>C)})}lookupMutationBatch(e,t){return k0(e).get(t).next(r=>r?(dt(r.userId===this.userId),Bh(this.N,r)):null)}Xt(e,t){return this.Jt[t]?ze.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Jt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return k0(e).Kt({index:hn.userMutationsIndex,range:o},(h,m,C)=>{m.userId===this.userId&&(dt(m.batchId>=r),l=Bh(this.N,m)),C.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return k0(e).Kt({index:hn.userMutationsIndex,range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return k0(e).Lt(hn.userMutationsIndex,t).next(r=>r.map(o=>Bh(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Yr.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Uh(e).Kt({range:o},(h,m,C)=>{const[E,T,x]=h,P=yr(T);if(E===this.userId&&t.path.isEqual(P))return k0(e).get(x).next(B=>{if(!B)throw et();dt(B.userId===this.userId),l.push(Bh(this.N,B))});C.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Ut);const o=[];return t.forEach(l=>{const h=Yr.prefixForPath(this.userId,l.path),m=IDBKeyRange.lowerBound(h),C=Uh(e).Kt({range:m},(E,T,x)=>{const[P,B,Q]=E,Ae=yr(B);P===this.userId&&l.path.isEqual(Ae)?r=r.add(Q):x.done()});o.push(C)}),ze.waitFor(o).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Yr.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(l);let m=new Jn(Ut);return Uh(e).Kt({range:h},(C,E,T)=>{const[x,P,B]=C,Q=yr(P);x===this.userId&&r.isPrefixOf(Q)?Q.length===o&&(m=m.add(B)):T.done()}).next(()=>this.Zt(e,m))}Zt(e,t){const r=[],o=[];return t.forEach(l=>{o.push(k0(e).get(l).next(h=>{if(null===h)throw et();dt(h.userId===this.userId),r.push(Bh(this.N,h))}))}),ze.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return cT(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),ze.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const r=IDBKeyRange.lowerBound(Yr.prefixForUser(this.userId)),o=[];return Uh(e).Kt({range:r},(l,h,m)=>{if(l[0]===this.userId){const C=yr(l[1]);o.push(C)}else m.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return lT(e,this.userId,t)}ee(e){return uT(e).get(this.userId).next(t=>t||new Q1(this.userId,-1,""))}}function lT(n,e,t){const r=Yr.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return Uh(n).Kt({range:l,qt:!0},(m,C,E)=>{const[T,x,P]=m;T===e&&x===o&&(h=!0),E.done()}).next(()=>h)}function k0(n){return Ps(n,hn.store)}function Uh(n){return Ps(n,Yr.store)}function uT(n){return Ps(n,Q1.store)}class fu{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new fu(0)}static ie(){return new fu(-1)}}class cx{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new fu(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>kt.fromTimestamp(new fi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.oe(e,o)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ce(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jh(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return jh(e).Kt((h,m)=>{const C=G9(m);C.sequenceNumber<=t&&null===r.get(C.targetId)&&(o++,l.push(this.removeTargetData(e,C)))}).next(()=>ze.waitFor(l)).next(()=>o)}forEachTarget(e,t){return jh(e).Kt((r,o)=>{const l=G9(o);t(l)})}re(e){return hT(e).get(po.key).next(t=>(dt(null!==t),t))}oe(e,t){return hT(e).put(po.key,t)}ae(e,t){return jh(e).put(rT(this.N,t))}ce(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return jh(e).Kt({range:o,index:Rs.queryTargetsIndexName},(h,m,C)=>{const E=G9(m);_h(t,E.target)&&(l=E,C.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=z0(e);return t.forEach(h=>{const m=tt(h.path);o.push(l.put(new Ki(r,m))),o.push(this.referenceDelegate.addReference(e,r,h))}),ze.waitFor(o)}removeMatchingKeys(e,t,r){const o=z0(e);return ze.forEach(t,l=>{const h=tt(l.path);return ze.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=z0(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=z0(e);let l=mn();return o.Kt({range:r,qt:!0},(h,m,C)=>{const E=yr(h[1]),T=new $e(E);l=l.add(T)}).next(()=>l)}containsKey(e,t){const r=tt(t.path),o=IDBKeyRange.bound([r],[D9(r)],!1,!0);let l=0;return z0(e).Kt({index:Ki.documentTargetsIndex,qt:!0,range:o},([h,m],C,E)=>{0!==h&&(l++,E.done())}).next(()=>l>0)}Tt(e,t){return jh(e).get(t).next(r=>r?G9(r):null)}}function jh(n){return Ps(n,Rs.store)}function hT(n){return Ps(n,po.store)}function z0(n){return Ps(n,Ki.store)}function pu(n){return EE.apply(this,arguments)}function EE(){return(EE=(0,Ie.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==YA)throw n;He("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function dT([n,e],[t,r]){const o=Ut(n,t);return 0===o?Ut(e,r):o}class lx{constructor(e){this.ue=e,this.buffer=new Jn(dT),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ux{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;He("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ie.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){hu(o)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield pu(o)}yield t._e(e)}))}}class hx{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(b1.T);const r=new lx(t);return this.me.forEachTarget(e,o=>r.fe(o.sequenceNumber)).next(()=>this.me.ye(e,o=>r.fe(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(aT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aT):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,o,l,h,m,C,E;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(l=x,C=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(E=Date.now(),T9()<=H1.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-T}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${l} targets in `+(C-m)+`ms\n\tRemoved ${x} documents in `+(E-C)+`ms\nTotal Duration: ${E-T}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:x})))}}class dx{constructor(e,t){this.db=e,this.garbageCollector=new hx(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,o)=>t(o))}addReference(e,t,r){return Vy(e,r)}removeReference(e,t,r){return Vy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vy(e,t)}Ie(e,t){return function(r,o){let l=!1;return uT(r).jt(h=>lT(r,h,o).next(m=>(m&&(l=!0),ze.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ee(e,(h,m)=>{if(m<=t){const C=this.Ie(e,h).next(E=>{if(!E)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h),z0(e).delete([0,tt(h.path)])))});o.push(C)}}).next(()=>ze.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vy(e,t)}Ee(e,t){const r=z0(e);let o,l=b1.T;return r.Kt({index:Ki.documentTargetsIndex},([h,m],{path:C,sequenceNumber:E})=>{0===h?(l!==b1.T&&t(new $e(yr(o)),l),l=E,o=C):l=b1.T}).next(()=>{l!==b1.T&&t(new $e(yr(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vy(n,e){return z0(n).put((r=n.currentSequenceNumber,new Ki(0,tt(e.path),r)));var r}class $h{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){K2(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return Sr(this.inner)}}class fT{constructor(){this.changes=new $h(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:kt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Pn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ze.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fx{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return R0(e).put(Oy(t),r)}removeEntry(e,t){const r=R0(e),o=Oy(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return R0(e).get(Oy(t)).next(r=>this.Re(t,r))}be(e,t){return R0(e).get(Oy(t)).next(r=>({document:this.Re(t,r),size:Py(r)}))}getEntries(e,t){let r=gr();return this.Pe(e,t,(o,l)=>{const h=this.Re(o,l);r=r.insert(o,h)}).next(()=>r)}ve(e,t){let r=gr(),o=new Nr($e.comparator);return this.Pe(e,t,(l,h)=>{const m=this.Re(l,h);r=r.insert(l,m),o=o.insert(l,Py(h))}).next(()=>({documents:r,Ve:o}))}Pe(e,t,r){if(t.isEmpty())return ze.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let h=l.getNext();return R0(e).Kt({range:o},(m,C,E)=>{const T=$e.fromSegments(m);for(;h&&$e.comparator(h,T)<0;)r(h,null),h=l.getNext();h&&h.isEqual(T)&&(r(h,C),h=l.hasNext()?l.getNext():null),h?E.Mt(h.path.toArray()):E.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=gr();const l=t.path.length+1,h={};if(r.isEqual(kt.min())){const m=t.path.toArray();h.range=IDBKeyRange.lowerBound(m)}else{const m=t.path.toArray(),C=_E(r);h.range=IDBKeyRange.lowerBound([m,C],!0),h.index=Vn.collectionReadTimeIndex}return R0(e).Kt(h,(m,C,E)=>{if(m.length!==l)return;const T=yE(this.N,C);t.path.isPrefixOf(T.key.path)?M0(t,T)&&(o=o.insert(T.key,T)):E.done()}).next(()=>o)}newChangeBuffer(e){return new px(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return pT(e).get(zs.key).next(t=>(dt(!!t),t))}Ae(e,t){return pT(e).put(zs.key,t)}Re(e,t){if(t){const r=yE(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return Pn.newInvalidDocument(e)}}class px extends fT{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new $h(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Jn((l,h)=>Ut(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const m=this.De.get(l);if(h.document.isValidDocument()){const C=tT(this.Se.N,h.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=Py(C)-m,t.push(this.Se.addEntry(e,l,C))}else if(r-=m,this.trackRemovals){const C=tT(this.Se.N,Pn.newNoDocument(l,kt.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,C))}else t.push(this.Se.removeEntry(e,l))}),o.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,r)),ze.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:o})=>(o.forEach((l,h)=>{this.De.set(l,h)}),r))}}function pT(n){return Ps(n,zs.store)}function R0(n){return Ps(n,Vn.store)}function Oy(n){return n.path.toArray()}class mx{constructor(e){this.N=e}Ct(e,t,r,o){dt(r<o&&r>=0&&o<=11);const l=new Ry("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore(Kr.store),(m=e).createObjectStore(Q1.store,{keyPath:Q1.keyPath}),m.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0}),m.createObjectStore(Yr.store),mT(e),function(m){m.createObjectStore(Vn.store)}(e));let h=ze.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore(Ki.store),m.deleteObjectStore(Rs.store),m.deleteObjectStore(po.store)}(e),mT(e)),h=h.next(()=>function(m){const C=m.store(po.store),E=new po(0,0,kt.min().toTimestamp(),0);return C.put(po.key,E)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,C){return C.store(hn.store).Lt().next(E=>{m.deleteObjectStore(hn.store),m.createObjectStore(hn.store,{keyPath:hn.keyPath,autoIncrement:!0}).createIndex(hn.userMutationsIndex,hn.userMutationsKeyPath,{unique:!0});const T=C.store(hn.store),x=E.map(P=>T.put(P));return ze.waitFor(x)})}(e,l))),h=h.next(()=>{!function(m){m.createObjectStore(R4.store,{keyPath:R4.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ce(l))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore(zs.store)}(e),this.Ne(l)))),r<7&&o>=7&&(h=h.next(()=>this.xe(l))),r<8&&o>=8&&(h=h.next(()=>this.ke(e,l))),r<9&&o>=9&&(h=h.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e),function(m){const C=m.objectStore(Vn.store);C.createIndex(Vn.readTimeIndex,Vn.readTimeIndexPath,{unique:!1}),C.createIndex(Vn.collectionReadTimeIndex,Vn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.$e(l))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore(Vh.store,{keyPath:Vh.keyPath})})(e),function(m){m.createObjectStore(Oh.store,{keyPath:Oh.keyPath})}(e)})),h}Ne(e){let t=0;return e.store(Vn.store).Kt((r,o)=>{t+=Py(o)}).next(()=>{const r=new zs(t);return e.store(zs.store).put(zs.key,r)})}Ce(e){const t=e.store(Q1.store),r=e.store(hn.store);return t.Lt().next(o=>ze.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Lt(hn.userMutationsIndex,h).next(m=>ze.forEach(m,C=>{dt(C.userId===l.userId);const E=Bh(this.N,C);return cT(e,l.userId,E).next(()=>{})}))}))}xe(e){const t=e.store(Ki.store),r=e.store(Vn.store);return e.store(po.store).get(po.key).next(o=>{const l=[];return r.Kt((h,m)=>{const C=new Qt(h),E=[0,tt(C)];l.push(t.get(E).next(T=>T?ze.resolve():t.put(new Ki(0,tt(C),o.highestListenSequenceNumber))))}).next(()=>ze.waitFor(l))})}ke(e,t){e.createObjectStore(uu.store,{keyPath:uu.keyPath});const r=t.store(uu.store),o=new bE,l=h=>{if(o.add(h)){const m=h.lastSegment(),C=h.popLast();return r.put({collectionId:m,parent:tt(C)})}};return t.store(Vn.store).Kt({qt:!0},(h,m)=>{const C=new Qt(h);return l(C.popLast())}).next(()=>t.store(Yr.store).Kt({qt:!0},([h,m,C],E)=>{const T=yr(m);return l(T.popLast())}))}$e(e){const t=e.store(Rs.store);return t.Kt((r,o)=>{const l=G9(o),h=rT(this.N,l);return t.put(h)})}}function mT(n){n.createObjectStore(Ki.store,{keyPath:Ki.keyPath}).createIndex(Ki.documentTargetsIndex,Ki.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Rs.store,{keyPath:Rs.keyPath}).createIndex(Rs.queryTargetsIndexName,Rs.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(po.store)}const IE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ME{constructor(e,t,r,o,l,h,m,C,E,T){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=l,this.window=h,this.document=m,this.Fe=E,this.Me=T,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=x=>Promise.resolve(),!ME.bt())throw new ke(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dx(this,o),this.We=t+"main",this.N=new eT(C),this.Ge=new X2(this.We,11,new mx(this.N)),this.ze=new cx(this.referenceDelegate,this.N),this.Ht=new ax,this.He=new fx(this.N,this.Ht),this.Je=new sx,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===T&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,IE);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new b1(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Fy(e).put(new R4(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(hu(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return W9(e).get(Kr.key).next(t=>ze.resolve(this.cn(t)))}un(e){return Fy(e).delete(this.clientId)}hn(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ps(r,R4.store);return o.Lt().next(l=>{const h=e.fn(l,18e5),m=l.filter(C=>-1===h.indexOf(C));return ze.forEach(m,C=>o.delete(C.clientId)).next(()=>m)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?ze.resolve(!0):W9(e).get(Kr.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new ke(ge.FAILED_PRECONDITION,IE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fy(e).Lt().next(r=>void 0===this.fn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Kr.store,R4.store],t=>{const r=new XA(t,b1.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Fy(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return wE.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let l;return He("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",nx,h=>(l=new XA(h,this.Le?this.Le.next():b1.T),"readwrite-primary"===t?this.sn(l).next(m=>!!m||this.rn(l)).next(m=>{if(!m)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new ke(ge.FAILED_PRECONDITION,YA);return r(l)}).next(m=>this.an(l).next(()=>m)):this.Tn(l).next(()=>r(l)))).then(h=>(l.raiseOnCommittedEvent(),h))}Tn(e){return W9(e).get(Kr.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(ge.FAILED_PRECONDITION,IE)})}an(e){const t=new Kr(this.clientId,this.allowTabSynchronization,Date.now());return W9(e).put(Kr.key,t)}static bt(){return X2.bt()}on(e){const t=W9(e);return t.get(Kr.key).next(r=>this.cn(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete(Kr.key)):ze.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,R.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function W9(n){return Ps(n,Kr.store)}function Fy(n){return Ps(n,R4.store)}function AE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gx{constructor(e,t){this.progress=e,this.En=t}}class gT{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(e,t.path):z9(t)?this.Sn(e,t,r):this.Dn(e,t,r);var o}Vn(e,t){return this.An(e,new $e(t)).next(r=>{let o=uc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Sn(e,t,r){const o=t.collectionGroup;let l=uc();return this.Ht.getCollectionParents(e,o).next(h=>ze.forEach(h,m=>{const C=(E=t,T=m.child(o),new cc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,T;return this.Dn(e,C,r).next(E=>{E.forEach((T,x)=>{l=l.insert(T,x)})})}).next(()=>l))}Dn(e,t,r){let o,l;return this.He.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(l=h,this.Cn(e,l,o).next(m=>{o=m;for(const C of l)for(const E of C.mutations){const T=E.key;let x=o.get(T);null==x&&(x=Pn.newInvalidDocument(T),o=o.insert(T,x)),S0(E,x,C.localWriteTime),x.isFoundDocument()||(o=o.remove(T))}}))).next(()=>(o.forEach((h,m)=>{M0(t,m)||(o=o.remove(h))}),o))}Cn(e,t,r){let o=mn();for(const h of t)for(const m of h.mutations)m instanceof Q2&&null===r.get(m.key)&&(o=o.add(m.key));let l=r;return this.He.getEntries(e,o).next(h=>(h.forEach((m,C)=>{C.isFoundDocument()&&(l=l.insert(m,C))}),l))}}class TE{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=o}static kn(e,t){let r=mn(),o=mn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new TE(e,t.fromCache,r,o)}}class vT{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(kt.min())?this.Fn(e,t):this.On.Pn(e,o).next(l=>{const h=this.Mn(t,l);return(bh(t)||wh(t))&&this.Ln(t.limitType,h,o,r)?this.Fn(e,t):(T9()<=H1.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),P9(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(m=>(h.forEach(C=>{m=m.insert(C.key,C)}),m)))});var l}Mn(e,t){let r=new Jn(V9(e));return t.forEach((o,l)=>{M0(e,l)&&(r=r.add(l))}),r}Ln(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Fn(e,t){return T9()<=H1.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",P9(t)),this.On.getDocumentsMatchingQuery(e,t,kt.min())}}class vx{constructor(e,t,r,o){this.persistence=e,this.Bn=t,this.N=o,this.Un=new Nr(Ut),this.qn=new $h(l=>yh(l),_h),this.Kn=kt.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new gT(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function yT(n,e,t,r){return new vx(n,e,t,r)}function _T(n,e){return DE.apply(this,arguments)}function DE(){return(DE=(0,Ie.Z)(function*(n,e){const t=je(n);let r=t.In,o=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let m;return t.In.getAllMutationBatches(h).next(C=>(m=C,r=t.persistence.getMutationQueue(e),o=new gT(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(C=>{const E=[],T=[];let x=mn();for(const P of m){E.push(P.batchId);for(const B of P.mutations)x=x.add(B.key)}for(const P of C){T.push(P.batchId);for(const B of P.mutations)x=x.add(B.key)}return o.Pn(h,x).next(P=>({Wn:P,removedBatchIds:E,addedBatchIds:T}))})});return t.In=r,t.Qn=o,t.Bn.$n(t.Qn),l})).apply(this,arguments)}function yx(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(h,m,C,E){const T=C.batch,x=T.keys();let P=ze.resolve();return x.forEach(B=>{P=P.next(()=>E.getEntry(m,B)).next(Q=>{const Ae=C.docVersions.get(B);dt(null!==Ae),Q.version.compareTo(Ae)<0&&(T.applyToRemoteDocument(Q,C),Q.isValidDocument()&&E.addEntry(Q,C.commitVersion))})}),P.next(()=>h.In.removeMutationBatch(m,T))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,o))})}function CT(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function _x(n,e){const t=je(n),r=e.snapshotVersion;let o=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.jn.newChangeBuffer({trackRemovals:!0});o=t.Un;const m=[];e.targetChanges.forEach((E,T)=>{const x=o.get(T);if(!x)return;m.push(t.ze.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.ze.addMatchingKeys(l,E.addedDocuments,T)));const P=E.resumeToken;if(P.approximateByteSize()>0){const B=x.withResumeToken(P,r).withSequenceNumber(l.currentSequenceNumber);o=o.insert(T,B),Q=x,Ve=E,dt((Ae=B).resumeToken.approximateByteSize()>0),(0===Q.resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&m.push(t.ze.updateTargetData(l,B))}var Q,Ae,Ve});let C=gr();if(e.documentUpdates.forEach((E,T)=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),m.push(bT(l,h,e.documentUpdates,r,void 0).next(E=>{C=E})),!r.isEqual(kt.min())){const E=t.ze.getLastRemoteSnapshotVersion(l).next(T=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(E)}return ze.waitFor(m).next(()=>h.apply(l)).next(()=>t.Qn.vn(l,C)).next(()=>C)}).then(l=>(t.Un=o,l))}function bT(n,e,t,r,o){let l=mn();return t.forEach(h=>l=l.add(h)),e.getEntries(n,l).next(h=>{let m=gr();return t.forEach((C,E)=>{const T=h.get(C),x=(null==o?void 0:o.get(C))||r;E.isNoDocument()&&E.version.isEqual(kt.min())?(e.removeEntry(C,x),m=m.insert(C,E)):!T.isValidDocument()||E.version.compareTo(T.version)>0||0===E.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(E,x),m=m.insert(C,E)):He("LocalStore","Ignoring outdated watch update for ",C,". Current version:",T.version," Watch version:",E.version)}),m})}function Cx(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function Gh(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ze.getTargetData(r,e).next(l=>l?(o=l,ze.resolve(o)):t.ze.allocateTargetId(r).next(h=>(o=new L0(e,h,0,r.currentSequenceNumber),t.ze.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Un.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function Wh(n,e,t){return SE.apply(this,arguments)}function SE(){return(SE=(0,Ie.Z)(function*(n,e,t){const r=je(n),o=r.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!hu(h))throw h;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Un=r.Un.remove(e),r.qn.delete(o.target)})).apply(this,arguments)}function Hy(n,e,t){const r=je(n);let o=kt.min(),l=mn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,C,E){const T=je(m),x=T.qn.get(E);return void 0!==x?ze.resolve(T.Un.get(x)):T.ze.getTargetData(C,E)}(r,h,Ns(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(h,m.targetId).next(C=>{l=C})}).next(()=>r.Bn.getDocumentsMatchingQuery(h,e,t?o:kt.min(),t?l:mn())).next(m=>({documents:m,Gn:l})))}function wT(n,e){const t=je(n),r=je(t.ze),o=t.Un.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Tt(l,e).next(h=>h?h.target:null))}function ET(n){const e=je(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const h=je(r);let m=gr(),C=_E(l);const E=R0(o),T=IDBKeyRange.lowerBound(C,!0);return E.Kt({index:Vn.readTimeIndex,range:T},(x,P)=>{const B=yE(h.N,P);m=m.insert(B.key,B),C=P.readTime}).next(()=>({En:m,readTime:nT(C)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function xE(){return(xE=(0,Ie.Z)(function*(n){const e=je(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=R0(r);let l=kt.min();return o.Kt({index:Vn.readTimeIndex,reverse:!0},(h,m,C)=>{m.readTime&&(l=nT(m.readTime)),C.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function NE(){return(NE=(0,Ie.Z)(function*(n,e,t,r){const o=je(n);let l=mn(),h=gr(),m=z4();for(const T of t){const x=e.zn(T.metadata.name);T.document&&(l=l.add(x)),h=h.insert(x,e.Hn(T)),m=m.insert(x,e.Jn(T.metadata.readTime))}const C=o.jn.newChangeBuffer({trackRemovals:!0}),E=yield Gh(o,(T=r,Ns(lc(Qt.fromString(`__bundle__/docs/${T}`)))));var T;return o.persistence.runTransaction("Apply bundle documents","readwrite",T=>bT(T,C,h,kt.min(),m).next(x=>(C.apply(T),x)).next(x=>o.ze.removeMatchingKeysForTargetId(T,E.targetId).next(()=>o.ze.addMatchingKeys(T,l,E.targetId)).next(()=>o.Qn.vn(T,x)).next(()=>x)))})).apply(this,arguments)}function Ex(n,e){return LE.apply(this,arguments)}function LE(){return(LE=(0,Ie.Z)(function*(n,e,t=mn()){const r=yield Gh(n,Ns(CE(e.bundledQuery))),o=je(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=Zr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(l,e);const m=r.withResumeToken(Wr.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(m.targetId,m),o.ze.updateTargetData(l,m).next(()=>o.ze.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ze.addMatchingKeys(l,t,r.targetId)).next(()=>o.Je.saveNamedQuery(l,e))})})).apply(this,arguments)}class Ix{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return ze.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:CE(r.bundledQuery),readTime:Zr(r.readTime)}),ze.resolve();var r}}class kE{constructor(){this.Zn=new Jn(Di.ts),this.es=new Jn(Di.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Di(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Di(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new $e(new Qt([])),r=new Di(t,e),o=new Di(t,e+1),l=[];return this.es.forEachInRange([r,o],h=>{this.rs(h),l.push(h.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new $e(new Qt([])),r=new Di(t,e),o=new Di(t,e+1);let l=mn();return this.es.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Di(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return $e.comparator(e.key,t.key)||Ut(e.ls,t.ls)}static ns(e,t){return Ut(e.ls,t.ls)||$e.comparator(e.key,t.key)}}class Mx{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Jn(Di.ts)}checkEmpty(e){return ze.resolve(0===this.In.length)}addMutationBatch(e,t,r,o){const l=this.fs;this.fs++;const h=new gE(l,t,r,o);this.In.push(h);for(const m of o)this.ds=this.ds.add(new Di(m.key,l)),this.Ht.addToCollectionParentIndex(e,m.key.path.popLast());return ze.resolve(h)}lookupMutationBatch(e,t){return ze.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const o=this._s(t+1),l=o<0?0:o;return ze.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return ze.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),o=new Di(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,o],h=>{const m=this.ws(h.ls);l.push(m)}),ze.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Jn(Ut);return t.forEach(o=>{const l=new Di(o,0),h=new Di(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,h],m=>{r=r.add(m.ls)})}),ze.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;$e.isDocumentKey(l)||(l=l.child(""));const h=new Di(new $e(l),0);let m=new Jn(Ut);return this.ds.forEachWhile(C=>{const E=C.key.path;return!!r.isPrefixOf(E)&&(E.length===o&&(m=m.add(C.ls)),!0)},h),ze.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const o=this.ws(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return ze.forEach(t.mutations,o=>{const l=new Di(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new Di(t,0),o=this.ds.firstAfterOrEqual(r);return ze.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ze.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class Ax{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Nr($e.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),h=l?l.size:0,m=this.ps(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:m,readTime:r}),this.size+=m-h,this.Ht.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ze.resolve(r?r.document.clone():Pn.newInvalidDocument(t))}getEntries(e,t){let r=gr();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.clone():Pn.newInvalidDocument(o))}),ze.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=gr();const l=new $e(t.path.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:m,value:{document:C,readTime:E}}=h.getNext();if(!t.path.isPrefixOf(m.path))break;E.compareTo(r)<=0||M0(t,C)&&(o=o.insert(C.key,C.clone()))}return ze.resolve(o)}Ts(e,t){return ze.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Tx(this)}getSize(e){return ze.resolve(this.size)}}class Tx extends fT{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.Se.addEntry(e,o.document,this.getReadTime(r))):this.Se.removeEntry(r)}),ze.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class Dx{constructor(e){this.persistence=e,this.Es=new $h(t=>yh(t),_h),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Is=0,this.As=new kE,this.targetCount=0,this.Rs=fu.se()}forEachTarget(e,t){return this.Es.forEach((r,o)=>t(o)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),ze.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new fu(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.ae(t),ze.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Es.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Es.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ze.waitFor(l).next(()=>o)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return ze.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ze.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),ze.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ze.resolve(r)}containsKey(e,t){return ze.resolve(this.As.containsKey(t))}}class Sx{constructor(e,t){this.bs={},this.Le=new b1(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Dx(this),this.Ht=new ox,this.He=new Ax(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new eT(t),this.Je=new Ix(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Mx(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const o=new xx(this.Le.next());return this.referenceDelegate.vs(),r(o).next(l=>this.referenceDelegate.Vs(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ss(e,t){return ze.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class xx extends QA{constructor(e){super(),this.currentSequenceNumber=e}}class zE{constructor(e){this.persistence=e,this.Ds=new kE,this.Cs=null}static Ns(e){return new zE(e)}get xs(){if(this.Cs)return this.Cs;throw et()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),ze.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.xs,r=>{const o=$e.fromPath(r);return this.ks(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return ze.or([()=>ze.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function IT(n,e){return`firestore_clients_${n}_${e}`}function MT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function RE(n,e){return`firestore_targets_${n}_${e}`}class By{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static $s(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new ke(o.error.code,o.error.message))),h?new By(e,t,o.state,l):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class q9{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new ke(r.error.code,r.error.message))),l?new q9(e,r.state,o):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=au();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=S9(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new Uy(e,l):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class PE{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new PE(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class VE{constructor(){this.activeTargetIds=au()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OE{constructor(e,t,r,o,l){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Nr(Ut),this.started=!1,this.Ks=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=IT(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new VE),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(m){return`firestore_bundle_loaded_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.pn();for(const o of t){if(o===e.Ls)continue;const l=e.getItem(IT(e.persistenceKey,o));if(l){const h=Uy.$s(o,l);h&&(e.qs=e.qs.insert(h.clientId,h))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const o=e.Xs(r);o&&e.Zs(o)}for(const o of e.Ks)e.Us(o);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(RE(this.persistenceKey,e));if(r){const o=q9.$s(e,r);o&&(t=o.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(RE(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.ni(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const o=t.ai(r.key);return t.ci(o,null)}{const o=t.ui(r.key,r.newValue);if(o)return t.ci(o.clientId,o)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const o=t.hi(r.key,r.newValue);if(o)return t.li(o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.fi(r.key,r.newValue);if(o)return t.di(o)}}else if(r.key===t.Hs){if(null!==r.newValue){const o=t.Xs(r.newValue);if(o)return t.Zs(o)}}else if(r.key===t.Qs){const o=function(l){let h=b1.T;if(null!=l)try{const m=JSON.parse(l);dt("number"==typeof m),h=m}catch(m){pr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==b1.T&&t.sequenceNumberHandler(o)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const o=new By(this.currentUser,e,t,r),l=MT(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Os())}ni(e){const t=MT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const o=RE(this.persistenceKey,e),l=new q9(e,t,r);this.setItem(o,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ai(e);return Uy.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),o=Number(r[1]);return By.$s(new Ti(void 0!==r[2]?r[2]:null),o,t)}fi(e,t){const r=this.zs.exec(e),o=Number(r[1]);return q9.$s(o,t)}Xs(e){return PE.$s(e)}li(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),o=this.ti(this.qs),l=this.ti(r),h=[],m=[];return l.forEach(C=>{o.has(C)||h.push(C)}),o.forEach(C=>{l.has(C)||m.push(C)}),this.syncEngine.gi(h,m).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=au();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class AT{constructor(){this.yi=new VE,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new VE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Nx{Ti(e){}shutdown(){}}class TT{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Lx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class kx{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class zx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,o){const l=this.Bi(e,t);He("RestConnection","Sending: ",l,r);const h={};return this.Ui(h,o),this.qi(e,l,h,r).then(m=>(He("RestConnection","Received: ",m),m),m=>{throw ph("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}Ki(e,t,r,o){return this.Li(e,t,r,o)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+b0,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${Lx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,o){return new Promise((l,h)=>{const m=new Uw;m.listenOnce(Bw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Y1.NO_ERROR:const E=m.getResponseJson();He("Connection","XHR received:",JSON.stringify(E)),l(E);break;case Y1.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),h(new ke(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Y1.HTTP_ERROR:const T=m.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const x=m.getResponseJson().error;if(x&&x.status&&x.message){const P=function(B){const Q=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Q)>=0?Q:ge.UNKNOWN}(x.status);h(new ke(P,x.message))}else h(new ke(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ke(ge.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const C=JSON.stringify(o);m.send(t,"POST",C,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=A9(),l=Hw(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new BA({})),this.Ui(h.initMessageHeaders,t),(0,R.uI)()||(0,R.b$)()||(0,R.d)()||(0,R.w1)()||(0,R.Mn)()||(0,R.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=r.join("");He("Connection","Creating WebChannel: "+m,h);const C=o.createWebChannel(m,h);let E=!1,T=!1;const x=new kx({vi:B=>{T?He("Connection","Not sending because WebChannel is closed:",B):(E||(He("Connection","Opening WebChannel transport."),C.open(),E=!0),He("Connection","WebChannel sending:",B),C.send(B))},Vi:()=>C.close()}),P=(B,Q,Ae)=>{B.listen(Q,Ve=>{try{Ae(Ve)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return P(C,fh.EventType.OPEN,()=>{T||He("Connection","WebChannel transport opened.")}),P(C,fh.EventType.CLOSE,()=>{T||(T=!0,He("Connection","WebChannel transport closed"),x.$i())}),P(C,fh.EventType.ERROR,B=>{T||(T=!0,ph("Connection","WebChannel transport errored:",B),x.$i(new ke(ge.UNAVAILABLE,"The operation could not be completed")))}),P(C,fh.EventType.MESSAGE,B=>{var Q;if(!T){const Ae=B.data[0];dt(!!Ae);const Ve=Ae,Ye=Ve.error||(null===(Q=Ve[0])||void 0===Q?void 0:Q.error);if(Ye){He("Connection","WebChannel received error:",Ye);const bt=Ye.status;let Jt=function(An){const Lr=mr[An];if(void 0!==Lr)return xh(Lr)}(bt),wt=Ye.message;void 0===Jt&&(Jt=ge.INTERNAL,wt="Unknown error status: "+bt+" with message "+Ye.message),T=!0,x.$i(new ke(Jt,wt)),C.close()}else He("Connection","WebChannel received:",Ae),x.Oi(Ae)}}),P(l,HA.STAT_EVENT,B=>{B.stat===ty.PROXY?He("Connection","Detected buffering proxy"):B.stat===ty.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.ki()},0),x}}function DT(){return"undefined"!=typeof window?window:null}function jy(){return"undefined"!=typeof document?document:null}function Z9(n){return new ZA(n,!0)}class FE{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=o,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),o=Math.max(0,t-r);o>0&&He("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class ST{constructor(e,t,r,o,l,h){this.Oe=e,this.er=r,this.nr=o,this.credentialsProvider=l,this.listener=h,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new FE(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,Ie.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,Ie.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r._r(),r.rr.cancel(),r.sr++,3!==e?r.rr.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.rr.Yi()):t&&t.code===ge.UNAUTHENTICATED&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.mr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(r=>{this.sr===t&&this.yr(r)},r=>{e(()=>{const o=new ke(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.pr(o)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.pr(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}ur(){var e=this;this.state=4,this.rr.Xi((0,Ie.Z)(function*(){e.state=0,e.start()}))}pr(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rx extends ST{constructor(e,t,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,r,l),this.N=o}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(C=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:et(),o=e.targetChange.targetIds||[],l=function(C,E){return C.D?(dt(void 0===E||"string"==typeof E),Wr.fromBase64String(E||"")):(dt(void 0===E||E instanceof Uint8Array),Wr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(C){const E=void 0===C.code?ge.UNKNOWN:xh(C.code);return new ke(E,C.message||"")}(h);t=new xy(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=J2(n,r.document.name),l=Zr(r.document.updateTime),h=new qi({mapValue:{fields:r.document.fields}}),m=Pn.newFoundDocument(o,l,h);t=new cu(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=J2(n,r.document),l=r.readTime?Zr(r.readTime):kt.min(),h=Pn.newNoDocument(o,l);t=new cu([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=J2(n,r.document);t=new cu([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,l=new H9(r.count||0);t=new Lh(r.targetId,l)}}var C;return t}(this.N,e),r=function(o){if(!("targetChange"in o))return kt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?kt.min():l.readTime?Zr(l.readTime):kt.min()}(e);return this.listener.Er(t,r)}Ir(e){const t={};t.database=Ph(this.N),t.addTarget=function(o,l){let h;const m=l.target;return h=Ch(m)?{documents:d(o,m)}:{query:v(o,m)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=uE(o,l.resumeToken):l.snapshotVersion.compareTo(kt.min())>0&&(h.readTime=zh(o,l.snapshotVersion.toTimestamp())),h}(this.N,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.wr(t)}Ar(e){const t={};t.database=Ph(this.N),t.removeTarget=e,this.wr(t)}}class Px extends ST{constructor(e,t,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle",t,r,l),this.N=o,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let l=Zr(r.updateTime?r.updateTime:o);return l.isEqual(kt.min())&&(l=Zr(o)),new Sh(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.vr(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Ph(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>a(this.N,r))};this.wr(t)}}class Vx extends class{}{constructor(e,t,r){super(),this.credentials=e,this.nr=t,this.N=r,this.Dr=!1}Cr(){if(this.Dr)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Li(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new ke(ge.UNKNOWN,o.toString())})}Ki(e,t,r){return this.Cr(),this.credentials.getToken().then(o=>this.nr.Ki(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new ke(ge.UNKNOWN,o.toString())})}terminate(){this.Dr=!0}}class Ox{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(pr(t),this.$r=!1):He("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Fx{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=l,this.Qr.Ti(m=>{r.enqueueAndForget((0,Ie.Z)(function*(){var C;P0(h)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(C=(0,Ie.Z)(function*(E){const T=je(E);T.Kr.add(4),yield qh(T),T.Wr.set("Unknown"),T.Kr.delete(4),yield K9(T)}),function(E){return C.apply(this,arguments)})(h))}))}),this.Wr=new Ox(r,o)}}function K9(n){return HE.apply(this,arguments)}function HE(){return(HE=(0,Ie.Z)(function*(n){if(P0(n))for(const e of n.jr)yield e(!0)})).apply(this,arguments)}function qh(n){return BE.apply(this,arguments)}function BE(){return(BE=(0,Ie.Z)(function*(n){for(const e of n.jr)yield e(!1)})).apply(this,arguments)}function $y(n,e){const t=je(n);t.qr.has(e.targetId)||(t.qr.set(e.targetId,e),$E(t)?jE(t):Kh(t).cr()&&UE(t,e))}function Y9(n,e){const t=je(n),r=Kh(t);t.qr.delete(e),r.cr()&&xT(t,e),0===t.qr.size&&(r.cr()?r.lr():P0(t)&&t.Wr.set("Unknown"))}function UE(n,e){n.Gr.Y(e.targetId),Kh(n).Ir(e)}function xT(n,e){n.Gr.Y(e),Kh(n).Ar(e)}function jE(n){n.Gr=new Ly({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qr.get(e)||null}),Kh(n).start(),n.Wr.Or()}function $E(n){return P0(n)&&!Kh(n).ar()&&n.qr.size>0}function P0(n){return 0===je(n).Kr.size}function NT(n){n.Gr=void 0}function Hx(n){return GE.apply(this,arguments)}function GE(){return(GE=(0,Ie.Z)(function*(n){n.qr.forEach((e,t)=>{UE(n,e)})})).apply(this,arguments)}function Bx(n,e){return WE.apply(this,arguments)}function WE(){return(WE=(0,Ie.Z)(function*(n,e){NT(n),$E(n)?(n.Wr.Lr(e),jE(n)):n.Wr.set("Unknown")})).apply(this,arguments)}function Ux(n,e,t){return qE.apply(this,arguments)}function qE(){return(qE=(0,Ie.Z)(function*(n,e,t){if(n.Wr.set("Online"),e instanceof xy&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,l){const h=l.cause;for(const m of l.targetIds)o.qr.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.qr.delete(m),o.Gr.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gy(n,r)}else if(e instanceof cu?n.Gr.rt(e):e instanceof Lh?n.Gr.ft(e):n.Gr.ct(e),!t.isEqual(kt.min()))try{const r=yield CT(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.Gr._t(l);return h.targetChanges.forEach((m,C)=>{if(m.resumeToken.approximateByteSize()>0){const E=o.qr.get(C);E&&o.qr.set(C,E.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach(m=>{const C=o.qr.get(m);if(!C)return;o.qr.set(m,C.withResumeToken(Wr.EMPTY_BYTE_STRING,C.snapshotVersion)),xT(o,m);const E=new L0(C.target,m,1,C.sequenceNumber);UE(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield Gy(n,r)}var r})).apply(this,arguments)}function Gy(n,e,t){return ZE.apply(this,arguments)}function ZE(){return(ZE=(0,Ie.Z)(function*(n,e,t){if(!hu(e))throw e;n.Kr.add(1),yield qh(n),n.Wr.set("Offline"),t||(t=()=>CT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.Kr.delete(1),yield K9(n)}))})).apply(this,arguments)}function LT(n,e){return e().catch(t=>Gy(n,t,e))}function Zh(n){return KE.apply(this,arguments)}function KE(){return(KE=(0,Ie.Z)(function*(n){const e=je(n),t=V0(e);let r=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;jx(e);)try{const o=yield Cx(e.localStore,r);if(null===o){0===e.Ur.length&&t.lr();break}r=o.batchId,$x(e,o)}catch(o){yield Gy(e,o)}kT(e)&&zT(e)})).apply(this,arguments)}function jx(n){return P0(n)&&n.Ur.length<10}function $x(n,e){n.Ur.push(e);const t=V0(n);t.cr()&&t.br&&t.Pr(e.mutations)}function kT(n){return P0(n)&&!V0(n).ar()&&n.Ur.length>0}function zT(n){V0(n).start()}function Gx(n){return YE.apply(this,arguments)}function YE(){return(YE=(0,Ie.Z)(function*(n){V0(n).Sr()})).apply(this,arguments)}function Wx(n){return QE.apply(this,arguments)}function QE(){return(QE=(0,Ie.Z)(function*(n){const e=V0(n);for(const t of n.Ur)e.Pr(t.mutations)})).apply(this,arguments)}function qx(n,e,t){return JE.apply(this,arguments)}function JE(){return(JE=(0,Ie.Z)(function*(n,e,t){const r=n.Ur.shift(),o=vE.from(r,e,t);yield LT(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Zh(n)})).apply(this,arguments)}function Zx(n,e){return XE.apply(this,arguments)}function XE(){return(XE=(0,Ie.Z)(function*(n,e){var t;e&&V0(n).br&&(yield(t=(0,Ie.Z)(function*(r,o){if(Dy(l=o.code)&&l!==ge.ABORTED){const h=r.Ur.shift();V0(r).hr(),yield LT(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Zh(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),kT(n)&&zT(n)})).apply(this,arguments)}function eI(n,e){return tI.apply(this,arguments)}function tI(){return(tI=(0,Ie.Z)(function*(n,e){const t=je(n);e?(t.Kr.delete(2),yield K9(t)):e||(t.Kr.add(2),yield qh(t),t.Wr.set("Unknown"))})).apply(this,arguments)}function Kh(n){return n.zr||(n.zr=function(e,t,r){const o=je(e);return o.Cr(),new Rx(t,o.nr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:Hx.bind(null,n),Ci:Bx.bind(null,n),Er:Ux.bind(null,n)}),n.jr.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.zr.hr(),$E(n)?jE(n):n.Wr.set("Unknown")):(yield n.zr.stop(),NT(n))});return function(t){return e.apply(this,arguments)}}())),n.zr}function V0(n){return n.Hr||(n.Hr=function(e,t,r){const o=je(e);return o.Cr(),new Px(t,o.nr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:Gx.bind(null,n),Ci:Zx.bind(null,n),Vr:Wx.bind(null,n),vr:qx.bind(null,n)}),n.jr.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Hr.hr(),yield Zh(n)):(yield n.Hr.stop(),n.Ur.length>0&&(He("RemoteStore",`Stopping write stream with ${n.Ur.length} pending writes`),n.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),n.Hr}class nI{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new nI(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yh(n,e){if(pr("AsyncQueue",`${e}: ${n}`),hu(n))return new ke(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Qh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new Nr(this.comparator)}static emptySet(e){return new Qh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RT{constructor(){this.Jr=new Nr($e.comparator)}track(e){const t=e.doc.key,r=this.Jr.get(t);r?0!==e.type&&3===r.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==r.type?this.Jr=this.Jr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jr=this.Jr.remove(t):1===e.type&&2===r.type?this.Jr=this.Jr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):et():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jh{constructor(e,t,r,o,l,h,m,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=C}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Jh(e,t,Qh.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Kx{constructor(){this.Xr=void 0,this.listeners=[]}}class Yx{constructor(){this.queries=new $h(e=>R9(e),Eh),this.onlineState="Unknown",this.Zr=new Set}}function rI(n,e){return iI.apply(this,arguments)}function iI(){return(iI=(0,Ie.Z)(function*(n,e){const t=je(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new Kx),o)try{l.Xr=yield t.onListen(r)}catch(h){const m=Yh(h,`Initialization of query '${P9(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.eo(t.onlineState),l.Xr&&e.no(l.Xr)&&aI(t)})).apply(this,arguments)}function sI(n,e){return oI.apply(this,arguments)}function oI(){return(oI=(0,Ie.Z)(function*(n,e){const t=je(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function Qx(n,e){const t=je(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.no(o)&&(r=!0);h.Xr=o}}r&&aI(t)}function Jx(n,e,t){const r=je(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function aI(n){n.Zr.forEach(e=>{e.next()})}class cI{constructor(e,t,r){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}no(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Jh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Xx{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class PT{constructor(e){this.N=e}zn(e){return J2(this.N,e)}Hn(e){return e.metadata.exists?pE(this.N,e.document,!1):Pn.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Zr(e)}}class eN{constructor(e,t,r){this.lo=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=VT(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,r=new PT(this.N);for(const o of e)if(o.metadata.queries){const l=r.zn(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||mn()).add(l);t.set(h,m)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function(n,e,t,r){return NE.apply(this,arguments)}(e.localStore,new PT(e.N),e.documents,e.lo.id),r=e.wo(e.documents);for(const o of e.queries)yield Ex(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new gx(Object.assign({},e.progress),t)})()}}function VT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class HT{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=mn(),this.mutatedKeys=mn(),this.po=V9(e),this.To=new Qh(this.po)}get Eo(){return this._o}Io(e,t){const r=t?t.Ao:new RT,o=t?t.To:this.To;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const C=bh(this.query)&&o.size===this.query.limit?o.last():null,E=wh(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,x)=>{const P=o.get(T),B=M0(this.query,x)?x:null,Q=!!P&&this.mutatedKeys.has(P.key),Ae=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Ve=!1;P&&B?P.data.isEqual(B.data)?Q!==Ae&&(r.track({type:3,doc:B}),Ve=!0):this.Ro(P,B)||(r.track({type:2,doc:B}),Ve=!0,(C&&this.po(B,C)>0||E&&this.po(B,E)<0)&&(m=!0)):!P&&B?(r.track({type:0,doc:B}),Ve=!0):P&&!B&&(r.track({type:1,doc:P}),Ve=!0,(C||E)&&(m=!0)),Ve&&(B?(h=h.add(B),l=Ae?l.add(T):l.delete(T)):(h=h.delete(T),l=l.delete(T)))}),bh(this.query)||wh(this.query))for(;h.size>this.query.limit;){const T=bh(this.query)?h.last():h.first();h=h.delete(T.key),l=l.delete(T.key),r.track({type:1,doc:T})}return{To:h,Ao:r,Ln:m,mutatedKeys:l}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const l=e.Ao.Yr();l.sort((E,T)=>function(x,P){const B=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return B(x)-B(P)}(E.type,T.type)||this.po(E.doc,T.doc)),this.bo(r);const h=t?this.Po():[],m=0===this.yo.size&&this.current?1:0,C=m!==this.mo;return this.mo=m,0!==l.length||C?{snapshot:new Jh(this.query,e.To,o,l,e.mutatedKeys,0===m,C,!1),vo:h}:{vo:h}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new RT,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(t=>this._o=this._o.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=mn(),this.To.forEach(r=>{this.Vo(r.key)&&(this.yo=this.yo.add(r.key))});const t=[];return e.forEach(r=>{this.yo.has(r)||t.push(new FT(r))}),this.yo.forEach(r=>{e.has(r)||t.push(new OT(r))}),t}So(e){this._o=e.Gn,this.yo=mn();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return Jh.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class tN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nN{constructor(e){this.key=e,this.Co=!1}}class rN{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.No={},this.xo=new $h(m=>R9(m),Eh),this.ko=new Map,this.$o=new Set,this.Oo=new Nr($e.comparator),this.Fo=new Map,this.Mo=new kE,this.Lo={},this.Bo=new Map,this.Uo=fu.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function iN(n,e){return lI.apply(this,arguments)}function lI(){return(lI=(0,Ie.Z)(function*(n,e){const t=LI(n);let r,o;const l=t.xo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Do();else{const h=yield Gh(t.localStore,Ns(e)),m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield uI(t,e,r,"current"===m),t.isPrimaryClient&&$y(t.remoteStore,h)}return o})).apply(this,arguments)}function uI(n,e,t,r){return hI.apply(this,arguments)}function hI(){return(hI=(0,Ie.Z)(function*(n,e,t,r){n.Ko=(T,x,P)=>{return(B=(0,Ie.Z)(function*(Q,Ae,Ve,Ye){let bt=Ae.view.Io(Ve);bt.Ln&&(bt=yield Hy(Q.localStore,Ae.query,!1).then(({documents:An})=>Ae.view.Io(An,bt)));const Jt=Ye&&Ye.targetChanges.get(Ae.targetId),wt=Ae.view.applyChanges(bt,Q.isPrimaryClient,Jt);return bI(Q,Ae.targetId,wt.vo),wt.snapshot}),function(Q,Ae,Ve,Ye){return B.apply(this,arguments)})(n,T,x,P);var B};const o=yield Hy(n.localStore,e,!0),l=new HT(e,o.Gn),h=l.Io(o.documents),m=N0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),C=l.applyChanges(h,n.isPrimaryClient,m);bI(n,t,C.vo);const E=new tN(e,t,l);return n.xo.set(e,E),n.ko.has(t)?n.ko.get(t).push(e):n.ko.set(t,[e]),C.snapshot})).apply(this,arguments)}function sN(n,e){return dI.apply(this,arguments)}function dI(){return(dI=(0,Ie.Z)(function*(n,e){const t=je(n),r=t.xo.get(e),o=t.ko.get(r.targetId);if(o.length>1)return t.ko.set(r.targetId,o.filter(l=>!Eh(l,e))),void t.xo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Y9(t.remoteStore,r.targetId),Xh(t,r.targetId)}).catch(pu))):(Xh(t,r.targetId),yield Wh(t.localStore,r.targetId,!0))})).apply(this,arguments)}function fI(){return(fI=(0,Ie.Z)(function*(n,e,t){const r=kI(n);try{const o=yield function(l,h){const m=je(l),C=fi.now(),E=h.reduce((x,P)=>x.add(P.key),mn());let T;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>m.Qn.Pn(x,E).next(P=>{T=P;const B=[];for(const Q of h){const Ae=iE(Q,T.get(Q.key));null!=Ae&&B.push(new Q2(Q.key,Ae,py(Ae.value.mapValue),cr.exists(!0)))}return m.In.addMutationBatch(x,C,B,h)})).then(x=>(x.applyToLocalDocumentSet(T),{batchId:x.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,m){let C=l.Lo[l.currentUser.toKey()];C||(C=new Nr(Ut)),C=C.insert(h,m),l.Lo[l.currentUser.toKey()]=C}(r,o.batchId,t),yield P4(r,o.changes),yield Zh(r.remoteStore)}catch(o){const l=Yh(o,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function BT(n,e){return pI.apply(this,arguments)}function pI(){return(pI=(0,Ie.Z)(function*(n,e){const t=je(n);try{const r=yield _x(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Fo.get(l);h&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Co=!0:o.modifiedDocuments.size>0?dt(h.Co):o.removedDocuments.size>0&&(dt(h.Co),h.Co=!1))}),yield P4(t,r,e)}catch(r){yield pu(r)}})).apply(this,arguments)}function UT(n,e,t){const r=je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.xo.forEach((l,h)=>{const m=h.view.eo(e);m.snapshot&&o.push(m.snapshot)}),function(l,h){const m=je(l);m.onlineState=h;let C=!1;m.queries.forEach((E,T)=>{for(const x of T.listeners)x.eo(h)&&(C=!0)}),C&&aI(m)}(r.eventManager,e),o.length&&r.No.Er(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aN(n,e,t){return mI.apply(this,arguments)}function mI(){return(mI=(0,Ie.Z)(function*(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Fo.get(e),l=o&&o.key;if(l){let h=new Nr($e.comparator);h=h.insert(l,Pn.newNoDocument(l,kt.min()));const m=mn().add(l),C=new x0(kt.min(),new Map,new Jn(Ut),h,m);yield BT(r,C),r.Oo=r.Oo.remove(l),r.Fo.delete(e),wI(r)}else yield Wh(r.localStore,e,!1).then(()=>Xh(r,e,t)).catch(pu)})).apply(this,arguments)}function cN(n,e){return gI.apply(this,arguments)}function gI(){return(gI=(0,Ie.Z)(function*(n,e){const t=je(n),r=e.batch.batchId;try{const o=yield yx(t.localStore,e);CI(t,r,null),_I(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield P4(t,o)}catch(o){yield pu(o)}})).apply(this,arguments)}function lN(n,e,t){return vI.apply(this,arguments)}function vI(){return(vI=(0,Ie.Z)(function*(n,e,t){const r=je(n);try{const o=yield function(l,h){const m=je(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let E;return m.In.lookupMutationBatch(C,h).next(T=>(dt(null!==T),E=T.keys(),m.In.removeMutationBatch(C,T))).next(()=>m.In.performConsistencyCheck(C)).next(()=>m.Qn.Pn(C,E))})}(r.localStore,e);CI(r,e,t),_I(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield P4(r,o)}catch(o){yield pu(o)}})).apply(this,arguments)}function yI(){return(yI=(0,Ie.Z)(function*(n,e){const t=je(n);P0(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=je(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.In.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Bo.get(r)||[];o.push(e),t.Bo.set(r,o)}catch(r){const o=Yh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function _I(n,e){(n.Bo.get(e)||[]).forEach(t=>{t.resolve()}),n.Bo.delete(e)}function CI(n,e,t){const r=je(n);let o=r.Lo[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Lo[r.currentUser.toKey()]=o}}function Xh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ko.get(e))n.xo.delete(r),t&&n.No.jo(r,t);n.ko.delete(e),n.isPrimaryClient&&n.Mo.cs(e).forEach(r=>{n.Mo.containsKey(r)||jT(n,r)})}function jT(n,e){n.$o.delete(e.path.canonicalString());const t=n.Oo.get(e);null!==t&&(Y9(n.remoteStore,t),n.Oo=n.Oo.remove(e),n.Fo.delete(t),wI(n))}function bI(n,e,t){for(const r of t)r instanceof OT?(n.Mo.addReference(r.key,e),hN(n,r)):r instanceof FT?(He("SyncEngine","Document no longer in limbo: "+r.key),n.Mo.removeReference(r.key,e),n.Mo.containsKey(r.key)||jT(n,r.key)):et()}function hN(n,e){const t=e.key,r=t.path.canonicalString();n.Oo.get(t)||n.$o.has(r)||(He("SyncEngine","New document in limbo: "+t),n.$o.add(r),wI(n))}function wI(n){for(;n.$o.size>0&&n.Oo.size<n.maxConcurrentLimboResolutions;){const e=n.$o.values().next().value;n.$o.delete(e);const t=new $e(Qt.fromString(e)),r=n.Uo.next();n.Fo.set(r,new nN(t)),n.Oo=n.Oo.insert(t,r),$y(n.remoteStore,new L0(Ns(lc(t.path)),r,2,b1.T))}}function P4(n,e,t){return EI.apply(this,arguments)}function EI(){return(EI=(0,Ie.Z)(function*(n,e,t){const r=je(n),o=[],l=[],h=[];var m;r.xo.isEmpty()||(r.xo.forEach((m,C)=>{h.push(r.Ko(C,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(C.targetId,E.fromCache?"not-current":"current"),o.push(E);const T=TE.kn(C.targetId,E);l.push(T)}}))}),yield Promise.all(h),r.No.Er(o),yield(m=(0,Ie.Z)(function*(C,E){const T=je(C);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ze.forEach(E,P=>ze.forEach(P.Nn,B=>T.persistence.referenceDelegate.addReference(x,P.targetId,B)).next(()=>ze.forEach(P.xn,B=>T.persistence.referenceDelegate.removeReference(x,P.targetId,B)))))}catch(x){if(!hu(x))throw x;He("LocalStore","Failed to update sequence numbers: "+x)}for(const x of E){const P=x.targetId;if(!x.fromCache){const B=T.Un.get(P),Ae=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);T.Un=T.Un.insert(P,Ae)}}}),function(C,E){return m.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function dN(n,e){return II.apply(this,arguments)}function II(){return(II=(0,Ie.Z)(function*(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield _T(t.localStore,e);t.currentUser=e,(o=t).Bo.forEach(h=>{h.forEach(m=>{m.reject(new ke(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Bo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield P4(t,r.Wn)}var o})).apply(this,arguments)}function fN(n,e){const t=je(n),r=t.Fo.get(e);if(r&&r.Co)return mn().add(r.key);{let o=mn();const l=t.ko.get(e);if(!l)return o;for(const h of l){const m=t.xo.get(h);o=o.unionWith(m.view.Eo)}return o}}function pN(n,e){return MI.apply(this,arguments)}function MI(){return(MI=(0,Ie.Z)(function*(n,e){const t=je(n),r=yield Hy(t.localStore,e.query,!0),o=e.view.So(r);return t.isPrimaryClient&&bI(t,e.targetId,o.vo),o})).apply(this,arguments)}function mN(n){return AI.apply(this,arguments)}function AI(){return(AI=(0,Ie.Z)(function*(n){const e=je(n);return ET(e.localStore).then(t=>P4(e,t))})).apply(this,arguments)}function gN(n,e,t,r){return TI.apply(this,arguments)}function TI(){return(TI=(0,Ie.Z)(function*(n,e,t,r){const o=je(n),l=yield function(h,m){const C=je(h),E=je(C.In);return C.persistence.runTransaction("Lookup mutation documents","readonly",T=>E.Xt(T,m).next(x=>x?C.Qn.Pn(T,x):ze.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Zh(o.remoteStore):"acknowledged"===t||"rejected"===t?(CI(o,e,r||null),_I(o,e),m=e,je(je(o.localStore).In).te(m)):et(),yield P4(o,l)):He("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function DI(){return(DI=(0,Ie.Z)(function*(n,e){const t=je(n);if(LI(t),kI(t),!0===e&&!0!==t.qo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $T(t,r.toArray());t.qo=!0,yield eI(t.remoteStore,!0);for(const l of o)$y(t.remoteStore,l)}else if(!1===e&&!1!==t.qo){const r=[];let o=Promise.resolve();t.ko.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Xh(t,h),Wh(t.localStore,h,!0))),Y9(t.remoteStore,h)}),yield o,yield $T(t,r),function(l){const h=je(l);h.Fo.forEach((m,C)=>{Y9(h.remoteStore,C)}),h.Mo.us(),h.Fo=new Map,h.Oo=new Nr($e.comparator)}(t),t.qo=!1,yield eI(t.remoteStore,!1)}})).apply(this,arguments)}function $T(n,e,t){return SI.apply(this,arguments)}function SI(){return(SI=(0,Ie.Z)(function*(n,e,t){const r=je(n),o=[],l=[];for(const h of e){let m;const C=r.ko.get(h);if(C&&0!==C.length){m=yield Gh(r.localStore,Ns(C[0]));for(const E of C){const T=r.xo.get(E),x=yield pN(r,T);x.snapshot&&l.push(x.snapshot)}}else{const E=yield wT(r.localStore,h);m=yield Gh(r.localStore,E),yield uI(r,GT(E),h,!1)}o.push(m)}return r.No.Er(l),o})).apply(this,arguments)}function GT(n){return rE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yN(n){const e=je(n);return je(je(e.localStore).persistence).pn()}function _N(n,e,t,r){return xI.apply(this,arguments)}function xI(){return(xI=(0,Ie.Z)(function*(n,e,t,r){const o=je(n);if(o.qo)He("SyncEngine","Ignoring unexpected query state notification.");else if(o.ko.has(e))switch(t){case"current":case"not-current":{const l=yield ET(o.localStore),h=x0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield P4(o,l,h);break}case"rejected":yield Wh(o.localStore,e,!0),Xh(o,e,r);break;default:et()}})).apply(this,arguments)}function CN(n,e,t){return NI.apply(this,arguments)}function NI(){return(NI=(0,Ie.Z)(function*(n,e,t){const r=LI(n);if(r.qo){for(const o of e){if(r.ko.has(o)){He("SyncEngine","Adding an already active target "+o);continue}const l=yield wT(r.localStore,o),h=yield Gh(r.localStore,l);yield uI(r,GT(l),h.targetId,!1),$y(r.remoteStore,h)}for(const o of t)r.ko.has(o)&&(yield Wh(r.localStore,o,!1).then(()=>{Y9(r.remoteStore,o),Xh(r,o)}).catch(pu))}})).apply(this,arguments)}function LI(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aN.bind(null,e),e.No.Er=Qx.bind(null,e.eventManager),e.No.jo=Jx.bind(null,e.eventManager),e}function kI(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lN.bind(null,e),e}class WT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.N=Z9(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return yT(this.persistence,new vT,e.initialUser,this.N)}Go(e){return new Sx(zE.Ns,this.N)}Wo(e){return new AT}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qT extends WT{constructor(e,t,r){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield function(n){return xE.apply(this,arguments)}(r.localStore),yield r.Jo.initialize(r,e),yield kI(r.Jo.syncEngine),yield Zh(r.Jo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ho(e){return yT(this.persistence,new vT,e.initialUser,this.N)}zo(e){return new ux(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=AE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new ME(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DT(),jy(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new AT}}class wN extends qT{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Jo.syncEngine;r.sharedClientState instanceof OE&&(r.sharedClientState.syncEngine={_i:gN.bind(null,o),mi:_N.bind(null,o),gi:CN.bind(null,o),pn:yN.bind(null,o),wi:mN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var l=(0,Ie.Z)(function*(h){yield function(n,e){return DI.apply(this,arguments)}(r.Jo.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}Wo(e){const t=DT();if(!OE.bt(t))throw new ke(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=AE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new OE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class zI{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>UT(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=dN.bind(null,r.syncEngine),yield eI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Yx}createDatastore(e){const t=Z9(e.databaseInfo.databaseId),r=new zx(e.databaseInfo);return new Vx(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>UT(this.syncEngine,m,0),h=TT.bt()?new TT:new Nx,new Fx(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,m,C,E){const T=new rN(r,o,l,h,m,C);return E&&(T.qo=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=je(t);He("RemoteStore","RemoteStore shutting down."),r.Kr.add(5),yield qh(r),r.Qr.shutdown(),r.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ZT(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class EN{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(r=>{r&&r.ho()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.na();if(null===t)return null;const r=e.ta.decode(t),o=Number(r);isNaN(o)&&e.sa(`length string (${r}) is not valid number`);const l=yield e.ia(o);return new Xx(JSON.parse(l),t.length+o)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,Ie.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ia(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const r=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(l,h){const m=je(l),C=Ph(m.N)+"/documents",E={documents:h.map(B=>Rh(m.N,B))},T=yield m.Ki("BatchGetDocuments",C,E),x=new Map;T.forEach(B=>{const Q=function(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=J2(t,r.found.name),l=Zr(r.found.updateTime),h=new qi({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=J2(t,r.missing),l=Zr(r.readTime);return Pn.newNoDocument(o,l)}(n,e):et()}(m.N,B);x.set(Q.key.toString(),Q)});const P=[];return h.forEach(B=>{const Q=x.get(B.toString());dt(!!Q),P.push(Q)}),P}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ks(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=$e.fromPath(o);e.mutations.push(new k4(l,e.precondition(l)))}),yield(r=(0,Ie.Z)(function*(o,l){const h=je(o),m=Ph(h.N)+"/documents",C={writes:l.map(E=>a(h.N,E))};yield h.Li("Commit",m,C)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new ke(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class MN{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.aa=5,this.rr=new FE(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,Ie.Z)(function*(){const t=new IN(e.datastore),r=e.ua(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.ha(l)}))}).catch(o=>{e.ha(o)})}))}ua(e){try{const t=this.updateFunction(e);return!T4(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dy(t)}return!1}}class AN{constructor(e,t,r){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=Ti.UNAUTHENTICATED,this.clientId=sy.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,Ie.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const o=Yh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function KT(n,e){return RI.apply(this,arguments)}function RI(){return(RI=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(l){r.isEqual(l)||(yield _T(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function YT(n,e){return PI.apply(this,arguments)}function PI(){return(PI=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VI(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(l=(0,Ie.Z)(function*(h,m){const C=je(h);C.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const E=P0(C);C.Kr.add(3),yield qh(C),E&&C.Wr.set("Unknown"),yield C.remoteSyncer.handleCredentialChange(m),C.Kr.delete(3),yield K9(C)}),function(h,m){return l.apply(this,arguments)})(e.remoteStore,o);var l}),n.onlineComponents=e})).apply(this,arguments)}function VI(n){return OI.apply(this,arguments)}function OI(){return(OI=(0,Ie.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield KT(n,new WT)),n.offlineComponents})).apply(this,arguments)}function qy(n){return FI.apply(this,arguments)}function FI(){return(FI=(0,Ie.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield YT(n,new zI)),n.onlineComponents})).apply(this,arguments)}function QT(n){return VI(n).then(e=>e.persistence)}function HI(n){return VI(n).then(e=>e.localStore)}function JT(n){return qy(n).then(e=>e.remoteStore)}function BI(n){return qy(n).then(e=>e.syncEngine)}function ed(n){return UI.apply(this,arguments)}function UI(){return(UI=(0,Ie.Z)(function*(n){const e=yield qy(n),t=e.eventManager;return t.onListen=iN.bind(null,e.syncEngine),t.onUnlisten=sN.bind(null,e.syncEngine),t})).apply(this,arguments)}function XT(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,l,h,m,C){const E=new Wy({next:x=>{l.enqueueAndForget(()=>sI(o,T));const P=x.docs.has(h);!P&&x.fromCache?C.reject(new ke(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&x.fromCache&&m&&"server"===m.source?C.reject(new ke(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(x)},error:x=>C.reject(x)}),T=new cI(lc(h.path),E,{includeMetadataChanges:!0,uo:!0});return rI(o,T)}(yield ed(n),n.asyncQueue,e,t,r)})),r.promise}function eD(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,l,h,m,C){const E=new Wy({next:x=>{l.enqueueAndForget(()=>sI(o,T)),x.fromCache&&"server"===m.source?C.reject(new ke(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(x)},error:x=>C.reject(x)}),T=new cI(h,E,{includeMetadataChanges:!0,uo:!0});return rI(o,T)}(yield ed(n),n.asyncQueue,e,t,r)})),r.promise}class RN{constructor(e,t,r,o,l,h,m,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=C}}class td{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof td&&e.projectId===this.projectId&&e.database===this.database}}const tD=new Map;function jI(n,e,t){if(!t)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nD(n,e,t,r){if(!0===e&&!0===r)throw new ke(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rD(n){if(!$e.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iD(n){if($e.isDocumentKey(n))throw new ke(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zy(n);throw new ke(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sD(n,e){if(e<=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class oD{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,nD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Q9{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oD({}),this._settingsFrozen=!1,e instanceof td?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ke(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new td(r.options.projectId)}(e))}get app(){if(!this._app)throw new ke(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oD(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new UA;switch(t.type){case"gapi":const r=t.client;return dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new iy(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(ge.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tD.get(e);t&&(He("ComponentProvider","Removing Datastore"),tD.delete(e),t.terminate())}(this),Promise.resolve()}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class E1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new E1(this.firestore,e,this._query)}}class dc extends E1{constructor(e,t,r){super(e,t,lc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new $e(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function aD(n,e,...t){if(n=(0,R.m9)(n),jI("collection","path",e),n instanceof Q9){const r=Qt.fromString(e,...t);return iD(r),new dc(n,null,r)}{if(!(n instanceof Gn||n instanceof dc))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return iD(r),new dc(n.firestore,null,r)}}function Ky(n,e,...t){if(n=(0,R.m9)(n),1===arguments.length&&(e=sy.I()),jI("doc","path",e),n instanceof Q9){const r=Qt.fromString(e,...t);return rD(r),new Gn(n,null,new $e(r))}{if(!(n instanceof Gn||n instanceof dc))throw new ke(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return rD(r),new Gn(n.firestore,n instanceof dc?n.converter:null,new $e(r))}}function cD(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),(n instanceof Gn||n instanceof dc)&&(e instanceof Gn||e instanceof dc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lD(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),n instanceof E1&&e instanceof E1&&n.firestore===e.firestore&&Eh(n._query,e._query)&&n.converter===e.converter}class ON{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new FE(this,"async_queue_retry"),this.Ta=()=>{const t=jy();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const e=jy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=jy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new Dr;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!hu(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(r=>{throw this.ma=r,this.ga=!1,pr("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.ga=!1,r))));return this.fa=t,t}enqueueAfterDelay(e,t,r){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const o=nI.createAndSchedule(this,e,t,r,l=>this.Ra(l));return this._a.push(o),o}Ea(){this.ma&&et()}verifyOperationInProgress(){}ba(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function $I(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class FN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends Q9{constructor(e,t){super(e,t),this.type="firestore",this._queue=new ON,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uD(this),this._firestoreClient.terminate()}}function mi(n){return n._firestoreClient||uD(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function uD(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new RN(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new AN(n._credentials,n._queue,r)}function hD(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield KT(n,t),yield YT(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ge.FAILED_PRECONDITION||l.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function dD(n){if(n._initialized||n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class V4{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(Wr.fromBase64String(e))}catch(t){throw new ke(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mu{constructor(e){this._methodName=e}}class Yy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const KN=/^__.*__$/;class YN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Q2(e,this.data,this.fieldMask,t,this.fieldTransforms):new iu(e,this.data,t,this.fieldTransforms)}}class fD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Q2(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class Qy{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Sa(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Qy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Ca({path:r,xa:!1});return o.ka(e),o}$a(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Ca({path:r,xa:!1});return o.Sa(),o}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Xy(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(pD(this.Da)&&KN.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class QN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||Z9(e)}Ba(e,t,r,o=!1){return new Qy({Da:e,methodName:t,La:r,path:pi.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function gu(n){const e=n._freezeSettings(),t=Z9(n._databaseId);return new QN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Jy(n,e,t,r,o,l={}){const h=n.Ba(l.merge||l.mergeFields?2:0,e,t,o);ZI("Data must be an object, but it was:",h,r);const m=vD(r,h);let C,E;if(l.merge)C=new Y2(h.fieldMask),E=h.fieldTransforms;else if(l.mergeFields){const T=[];for(const x of l.mergeFields){const P=KI(e,x,t);if(!h.contains(P))throw new ke(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);_D(T,P)||T.push(P)}C=new Y2(T),E=h.fieldTransforms.filter(x=>C.covers(x.field))}else C=null,E=h.fieldTransforms;return new YN(new qi(m),C,E)}class J9 extends mu{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof J9}}function mD(n,e,t){return new Qy({Da:3,La:e.settings.La,methodName:n._methodName,xa:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class GI extends mu{_toFieldTransform(e){return new xr(e.path,new A0)}isEqual(e){return e instanceof GI}}class JN extends mu{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=mD(this,e,!0),r=this.Ua.map(l=>vu(l,t)),o=new x4(r);return new xr(e.path,o)}isEqual(e){return this===e}}class XN extends mu{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=mD(this,e,!0),r=this.Ua.map(l=>vu(l,t)),o=new N4(r);return new xr(e.path,o)}isEqual(e){return this===e}}class eL extends mu{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new T0(e.N,Ah(e.N,this.qa));return new xr(e.path,t)}isEqual(e){return this===e}}function WI(n,e,t,r){const o=n.Ba(1,e,t);ZI("Data must be an object, but it was:",o,r);const l=[],h=qi.empty();K2(r,(C,E)=>{const T=YI(e,C,t);E=(0,R.m9)(E);const x=o.$a(T);if(E instanceof J9)l.push(T);else{const P=vu(E,x);null!=P&&(l.push(T),h.set(T,P))}});const m=new Y2(l);return new fD(h,m,o.fieldTransforms)}function qI(n,e,t,r,o,l){const h=n.Ba(1,e,t),m=[KI(e,r,t)],C=[o];if(l.length%2!=0)throw new ke(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<l.length;P+=2)m.push(KI(e,l[P])),C.push(l[P+1]);const E=[],T=qi.empty();for(let P=m.length-1;P>=0;--P)if(!_D(E,m[P])){const B=m[P];let Q=C[P];Q=(0,R.m9)(Q);const Ae=h.$a(B);if(Q instanceof J9)E.push(B);else{const Ve=vu(Q,Ae);null!=Ve&&(E.push(B),T.set(B,Ve))}}const x=new Y2(E);return new fD(T,x,h.fieldTransforms)}function gD(n,e,t,r=!1){return vu(t,n.Ba(r?4:3,e))}function vu(n,e){if(yD(n=(0,R.m9)(n)))return ZI("Unsupported field value:",e,n),vD(n,e);if(n instanceof mu)return function(t,r){if(!pD(r.Da))throw r.Fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let m=vu(h,r.Oa(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,R.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ah(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=fi.fromDate(t);return{timestampValue:zh(r.N,o)}}if(t instanceof fi){const o=new fi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zh(r.N,o)}}if(t instanceof Yy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fc)return{bytesValue:uE(r.N,t._byteString)};if(t instanceof Gn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.Fa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:B9(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Fa(`Unsupported field value: ${Zy(t)}`)}(n,e)}function vD(n,e){const t={};return Sr(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):K2(n,(r,o)=>{const l=vu(o,e.Na(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function yD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fi||n instanceof Yy||n instanceof fc||n instanceof Gn||n instanceof mu)}function ZI(n,e,t){if(!yD(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Zy(t);throw e.Fa("an object"===r?n+" a custom object":n+" "+r)}var r}function KI(n,e,t){if((e=(0,R.m9)(e))instanceof V4)return e._internalPath;if("string"==typeof e)return YI(n,e);throw Xy("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const tL=new RegExp("[~\\*/\\[\\]]");function YI(n,e,t){if(e.search(tL)>=0)throw Xy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new V4(...e.split("."))._internalPath}catch(r){throw Xy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xy(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let C="";return(l||h)&&(C+=" (found",l&&(C+=` in field ${r}`),h&&(C+=` in document ${o}`),C+=")"),new ke(ge.INVALID_ARGUMENT,m+n+C)}function _D(n,e){return n.some(t=>t.isEqual(e))}class X9{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(e_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nL extends X9{data(){return super.data()}}function e_(n,e){return"string"==typeof e?YI(n,e):e instanceof V4?e._internalPath:e._delegate._internalPath}class yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class O4 extends X9{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ep(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(e_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ep extends O4{data(e={}){return super.data(e)}}class O0{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new yu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ep(this._firestore,this._userDataWriter,r.key,r,new yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new ep(r._firestore,r._userDataWriter,h.doc.key,h.doc,new yu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new ep(r._firestore,r._userDataWriter,h.doc.key,h.doc,new yu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let C=-1,E=-1;return 0!==h.type&&(C=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),E=l.indexOf(h.doc.key)),{type:rL(h.type),doc:m,oldIndex:C,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function CD(n,e){return n instanceof O4&&e instanceof O4?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof O0&&e instanceof O0&&n._firestore===e._firestore&&lD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function bD(n){if(wh(n)&&0===n.explicitOrderBy.length)throw new ke(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tp{}function F0(n,...e){for(const t of e)n=t._apply(n);return n}class iL extends tp{constructor(e,t,r){super(),this.Ka=e,this.ja=t,this.Qa=r,this.type="where"}_apply(e){const t=gu(e.firestore),r=function(o,l,h,m,C,E,T){let x;if(C.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on FieldPath.documentId().`);if("in"===E||"not-in"===E){TD(T,E);const B=[];for(const Q of T)B.push(AD(m,o,Q));x={arrayValue:{values:B}}}else x=AD(m,o,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||TD(T,E),x=gD(h,"where",T,"in"===E||"not-in"===E);const P=Zi.create(C,E,x);return function(B,Q){if(Q.v()){const Ve=vy(B);if(null!==Ve&&!Ve.isEqual(Q.field))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${Q.field.toString()}'`);const Ye=k9(B);null!==Ye&&DD(0,Q.field,Ye)}const Ae=function(Ve,Ye){for(const bt of Ve.filters)if(Ye.indexOf(bt.op)>=0)return bt.op;return null}(B,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==Ae)throw new ke(ge.INVALID_ARGUMENT,Ae===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${Ae.toString()}' filters.`)}(o,P),P}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new E1(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new cc(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class oL extends tp{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new D4(o,l);return function(m,C){if(null===k9(m)){const E=vy(m);null!==E&&DD(0,E,C.field)}}(r,h),h}(e._query,this.Ka,this.Wa);return new E1(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new cc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class wD extends tp{constructor(e,t,r){super(),this.type=e,this.Ga=t,this.za=r}_apply(e){return new E1(e.firestore,e.converter,Ls(e._query,this.Ga,this.za))}}class ED extends tp{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=MD(e,this.type,this.Ha,this.Ja);return new E1(e.firestore,e.converter,(o=t,new cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ID extends tp{constructor(e,t,r){super(),this.type=e,this.Ha=t,this.Ja=r}_apply(e){const t=MD(e,this.type,this.Ha,this.Ja);return new E1(e.firestore,e.converter,(o=t,new cc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MD(n,e,t,r){if(t[0]=(0,R.m9)(t[0]),t[0]instanceof X9)return function(o,l,h,m,C){if(!m)throw new ke(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const E=[];for(const T of I0(o))if(T.field.isKeyField())E.push(N9(l,m.key));else{const x=m.data.field(T.field);if(Q3(x))throw new ke(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const P=T.field.canonicalString();throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(x)}return new nu(E,C)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=gu(n.firestore);return function(l,h,m,C,E,T){const x=l.explicitOrderBy;if(E.length>x.length)throw new ke(ge.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let B=0;B<E.length;B++){const Q=E[B];if(x[B].field.isKeyField()){if("string"!=typeof Q)throw new ke(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof Q}`);if(!z9(l)&&-1!==Q.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${C}() must be a plain document ID, but '${Q}' contains a slash.`);const Ae=l.path.child(Qt.fromString(Q));if(!$e.isDocumentKey(Ae))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${C}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const Ve=new $e(Ae);P.push(N9(h,Ve))}else{const Ae=gD(m,C,Q);P.push(Ae)}}return new nu(P,T)}(n._query,n.firestore._databaseId,o,e,t,r)}}function AD(n,e,t){if("string"==typeof(t=(0,R.m9)(t))){if(""===t)throw new ke(ge.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!z9(e)&&-1!==t.indexOf("/"))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!$e.isDocumentKey(r))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N9(n,new $e(r))}if(t instanceof Gn)return N9(n,t._key);throw new ke(ge.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zy(t)}.`)}function TD(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DD(n,e,t){if(!t.isEqual(e))throw new ke(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QI{convertValue(e,t="none"){switch(E0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return K2(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Yy(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ly(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){const t=w1(e);return new fi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);dt(Je(r));const o=new td(r.get(1),r.get(3)),l=new $e(r.popFirst(5));return o.isEqual(t)||pr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function t_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pL extends QI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}class SD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gu(e)}set(e,t,r){this._verifyNotCommitted();const o=H0(e,this._firestore),l=t_(o.converter,t,r),h=Jy(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,cr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=H0(e,this._firestore);let h;return h="string"==typeof(t=(0,R.m9)(t))||t instanceof V4?qI(this._dataReader,"WriteBatch.update",l._key,t,r,o):WI(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=H0(e,this._firestore);return this._mutations=this._mutations.concat(new ks(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function H0(n,e){if((n=(0,R.m9)(n)).firestore!==e)throw new ke(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class _u extends QI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function xD(n,e,t){n=on(n,Gn);const r=on(n.firestore,_r),o=t_(n.converter,e,t);return nd(r,[Jy(gu(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,cr.none())])}function ND(n,e,t,...r){n=on(n,Gn);const o=on(n.firestore,_r),l=gu(o);let h;return h="string"==typeof(e=(0,R.m9)(e))||e instanceof V4?qI(l,"updateDoc",n._key,e,t,r):WI(l,"updateDoc",n._key,e),nd(o,[h.toMutation(n._key,cr.exists(!0))])}function LD(n,...e){var t,r,o;n=(0,R.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||$I(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges};if($I(e[h])){const x=e[h];e[h]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[h+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[h+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let C,E,T;if(n instanceof Gn)E=on(n.firestore,_r),T=lc(n._key.path),C={next:x=>{e[h]&&e[h](JI(E,n,x))},error:e[h+1],complete:e[h+2]};else{const x=on(n,E1);E=on(x.firestore,_r),T=x._query;const P=new _u(E);C={next:B=>{e[h]&&e[h](new O0(E,P,x,B))},error:e[h+1],complete:e[h+2]},bD(n._query)}return function(x,P,B,Q){const Ae=new Wy(Q),Ve=new cI(P,Ae,B);return x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return rI(yield ed(x),Ve)})),()=>{Ae.Xo(),x.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return sI(yield ed(x),Ve)}))}}(mi(E),T,m,C)}function nd(n,e){return function(t,r){const o=new Dr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e,t){return fI.apply(this,arguments)}(yield BI(t),r,o)})),o.promise}(mi(n),e)}function JI(n,e,t){const r=t.docs.get(e._key),o=new _u(n);return new O4(n,o,e._key,r,new yu(t.hasPendingWrites,t.fromCache),e.converter)}class IL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gu(e)}get(e){const t=H0(e,this._firestore),r=new pL(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const l=o[0];if(l.isFoundDocument())return new X9(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new X9(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=H0(e,this._firestore),l=t_(o.converter,t,r),h=Jy(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=H0(e,this._firestore);let h;return h="string"==typeof(t=(0,R.m9)(t))||t instanceof V4?qI(this._dataReader,"Transaction.update",l._key,t,r,o):WI(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=H0(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=H0(e,this._firestore),r=new _u(this._firestore);return super.get(e).then(o=>new O4(this._firestore,r,t._key,o._document,new yu(!1,!1),t.converter))}}function XI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kD(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function zD(){if("undefined"==typeof atob)throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(n){b0=n})(F1.SDK_VERSION),(0,F1._registerComponent)(new Es.wA("firestore",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),r=new _r(t,new $A(n.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),r._setSettings(e),r},"PUBLIC")),(0,F1.registerVersion)(ny,"3.1.1",void 0),(0,F1.registerVersion)(ny,"3.1.1","esm2017");class np{constructor(e){this._delegate=e}static fromBase64String(e){return zD(),new np(fc.fromBase64String(e))}static fromUint8Array(e){return kD(),new np(fc.fromUint8Array(e))}toBase64(){return zD(),this._delegate.toBase64()}toUint8Array(){return kD(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eM(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class RL{enableIndexedDbPersistence(e,t){return function(n,e){dD(n=on(n,_r));const t=mi(n),r=n._freezeSettings(),o=new zI;return hD(t,o,new qT(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){dD(n=on(n,_r));const e=mi(n),t=n._freezeSettings(),r=new zI;return hD(e,r,new wN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new ke(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!X2.bt())return Promise.resolve();const o=r+"main";yield X2.delete(o)}),function(r){return t.apply(this,arguments)})(AE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RD{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof td||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ph("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const l=(n=on(n,Q9))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&ph("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Ti.MOCK_USER;else{h=(0,R.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new ke(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ti(C)}n._credentials=new jA(new ry(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield QT(n),t=yield JT(n);return e.setNetworkEnabled(!0),function(r){const o=je(r);return o.Kr.delete(0),K9(o)}(t)}))}(mi(n=on(n,_r)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield QT(n),t=yield JT(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const l=je(o);l.Kr.add(0),yield qh(l),l.Wr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(mi(n=on(n,_r)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e){return yI.apply(this,arguments)}(yield BI(e),t)})),t.promise}(mi(n=on(n,_r)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Wy(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield ed(n),o=t,je(r).Zr.add(o),void o.next();var r,o})),()=>{t.Xo(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield ed(n),o=t,void je(r).Zr.delete(o);var r,o}))}}(mi(n=on(n,_r)),$I(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rd(this,aD(this._delegate,e))}catch(t){throw J1(t,"collection()","Firestore.collection()")}}doc(e){try{return new r2(this,Ky(this._delegate,e))}catch(t){throw J1(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new X1(this,function(n,e){if(n=on(n,Q9),jI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new E1(n,null,(t=e,new cc(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw J1(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const r=yield(o=n,qy(o).then(l=>l.datastore));var o;new MN(n.asyncQueue,r,e,t).run()})),t.promise}(mi(n),t=>e(new IL(n,t)))}(this._delegate,t=>e(new PD(this,t)))}batch(){return mi(this._delegate),new VD(new SD(this._delegate,e=>nd(this._delegate,e)))}loadBundle(e){return function(n,e){const t=mi(n=on(n,_r)),r=new FN;return function(n,e,t,r){const o=function(l,h){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,C=function(C,E){if(C instanceof Uint8Array)return ZT(C,E);if(C instanceof ArrayBuffer)return ZT(new Uint8Array(C),E);if(C instanceof ReadableStream)return C.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new EN(C,h);var C}(t,Z9(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function(n,e,t){const r=je(n);var o;(o=(0,Ie.Z)(function*(l,h,m){try{const C=yield h.getMetadata();if(yield function(P,B){const Q=je(P),Ae=Zr(B.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",Ve=>Q.Je.getBundleMetadata(Ve,B.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Ae)>=0)}(l.localStore,C))return yield h.close(),void m._completeWith((P=C,{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}));m._updateProgress(VT(C));const E=new eN(C,l.localStore,h.N);let T=yield h.Qo();for(;T;){const P=yield E.fo(T);P&&m._updateProgress(P),T=yield h.Qo()}const x=yield E.complete();yield P4(l,x.En,void 0),yield function(P,B){const Q=je(P);return Q.persistence.runTransaction("Save bundle","readwrite",Ae=>Q.Je.saveBundleMetadata(Ae,B))}(l.localStore,C),m._completeWith(x.progress)}catch(C){ph("SyncEngine",`Loading bundle failed with ${C}`),m._failWith(C)}var P}),function(l,h,m){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield BI(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=je(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Je.getNamedQuery(l,r))}(yield HI(n),e)}))}(mi(n=on(n,_r)),e).then(t=>t?new E1(n,null,t.query):null)}(this._delegate,e).then(t=>t?new X1(this,t):null)}}class n_ extends QI{constructor(e){super(),this.firestore=e}convertBytes(e){return new np(new fc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return r2.forKey(t,this.firestore,null)}}class PD{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new n_(e)}get(e){const t=bu(e);return this._delegate.get(t).then(r=>new rp(this._firestore,new O4(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=bu(e);return r?(XI("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=bu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=bu(e);return this._delegate.delete(t),this}}class VD{constructor(e){this._delegate=e}set(e,t,r){const o=bu(e);return r?(XI("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=bu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=bu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Cu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ep(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ip(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Cu.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Cu(e,new n_(e),t),o.set(t,l)),l}}Cu.INSTANCES=new WeakMap;class r2{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new n_(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new r2(t,new Gn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new r2(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rd(this.firestore,aD(this._delegate,e))}catch(t){throw J1(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof Gn&&cD(this._delegate,e)}set(e,t){t=XI("DocumentReference.set",t);try{return t?xD(this._delegate,e,t):xD(this._delegate,e)}catch(r){throw J1(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ND(this._delegate,e):ND(this._delegate,e,t,...r)}catch(o){throw J1(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return nd(on(n.firestore,_r),[new ks(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=OD(e),r=FD(e,o=>new rp(this.firestore,new O4(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return LD(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,Gn);const e=on(n.firestore,_r),t=mi(e),r=new _u(e);return function(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,l,h){try{const m=yield function(C,E){const T=je(C);return T.persistence.runTransaction("read document","readonly",x=>T.Qn.An(x,E))}(o,l);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new ke(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const C=Yh(m,`Failed to get document '${l} from cache`);h.reject(C)}}),function(o,l,h){return r.apply(this,arguments)})(yield HI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new O4(e,r,n._key,o,new yu(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,Gn);const e=on(n.firestore,_r);return XT(mi(e),n._key,{source:"server"}).then(t=>JI(e,n,t))}(this._delegate):function(n){n=on(n,Gn);const e=on(n.firestore,_r);return XT(mi(e),n._key).then(t=>JI(e,n,t))}(this._delegate),t.then(r=>new rp(this.firestore,new O4(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new r2(this.firestore,this._delegate.withConverter(e?Cu.getInstance(this.firestore,e):null))}}function J1(n,e,t){return n.message=n.message.replace(e,t),n}function OD(n){for(const e of n)if("object"==typeof e&&!eM(e))return e;return{}}function FD(n,e){var t,r;let o;return o=eM(n[0])?n[0]:eM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class rp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new r2(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return CD(this._delegate,e._delegate)}}class ip extends rp{data(e){const t=this._delegate.data(e);return function(n,e){n||et()}(void 0!==t),t}}class X1{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new n_(e)}where(e,t,r){try{return new X1(this.firestore,F0(this._delegate,function(n,e,t){const r=e,o=e_("where",n);return new iL(o,r,t)}(e,t,r)))}catch(o){throw J1(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new X1(this.firestore,F0(this._delegate,function(n,e="asc"){const t=e,r=e_("orderBy",n);return new oL(r,t)}(e,t)))}catch(r){throw J1(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new X1(this.firestore,F0(this._delegate,function(n){return sD("limit",n),new wD("limit",n,"F")}(e)))}catch(t){throw J1(t,"limit()","Query.limit()")}}limitToLast(e){try{return new X1(this.firestore,F0(this._delegate,function(n){return sD("limitToLast",n),new wD("limitToLast",n,"L")}(e)))}catch(t){throw J1(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new X1(this.firestore,F0(this._delegate,function(...n){return new ED("startAt",n,!0)}(...e)))}catch(t){throw J1(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new X1(this.firestore,F0(this._delegate,function(...n){return new ED("startAfter",n,!1)}(...e)))}catch(t){throw J1(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new X1(this.firestore,F0(this._delegate,function(...n){return new ID("endBefore",n,!0)}(...e)))}catch(t){throw J1(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new X1(this.firestore,F0(this._delegate,function(...n){return new ID("endAt",n,!1)}(...e)))}catch(t){throw J1(t,"endAt()","Query.endAt()")}}isEqual(e){return lD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=on(n,E1);const e=on(n.firestore,_r),t=mi(e),r=new _u(e);return function(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,l,h){try{const m=yield Hy(o,l,!0),C=new HT(l,m.Gn),E=C.Io(m.documents),T=C.applyChanges(E,!1);h.resolve(T.snapshot)}catch(m){const C=Yh(m,`Failed to execute query '${l} against cache`);h.reject(C)}}),function(o,l,h){return r.apply(this,arguments)})(yield HI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new O0(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=on(n,E1);const e=on(n.firestore,_r),t=mi(e),r=new _u(e);return eD(t,n._query,{source:"server"}).then(o=>new O0(e,r,n,o))}(this._delegate):function(n){n=on(n,E1);const e=on(n.firestore,_r),t=mi(e),r=new _u(e);return bD(n._query),eD(t,n._query).then(o=>new O0(e,r,n,o))}(this._delegate),t.then(r=>new tM(this.firestore,new O0(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OD(e),r=FD(e,o=>new tM(this.firestore,new O0(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return LD(this._delegate,t,r)}withConverter(e){return new X1(this.firestore,this._delegate.withConverter(e?Cu.getInstance(this.firestore,e):null))}}class VL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ip(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new X1(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ip(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ip(this._firestore,r))})}isEqual(e){return CD(this._delegate,e._delegate)}}class rd extends X1{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new r2(this.firestore,e):null}doc(e){try{return new r2(this.firestore,void 0===e?Ky(this._delegate):Ky(this._delegate,e))}catch(t){throw J1(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=on(n.firestore,_r),r=Ky(n),o=t_(n.converter,e);return nd(t,[Jy(gu(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new r2(this.firestore,t))}isEqual(e){return cD(this._delegate,e._delegate)}withConverter(e){return new rd(this.firestore,this._delegate.withConverter(e?Cu.getInstance(this.firestore,e):null))}}function bu(n){return on(n,Gn)}class nM{constructor(...e){this._delegate=new V4(...e)}static documentId(){return new nM(pi.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof V4&&this._delegate._internalPath.isEqual(e._internalPath)}}class wu{constructor(e){this._delegate=e}static serverTimestamp(){const e=new GI("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new wu(e)}static delete(){const e=new J9("deleteField");return e._methodName="FieldValue.delete",new wu(e)}static arrayUnion(...e){const t=function(...n){return new JN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wu(t)}static arrayRemove(...e){const t=function(...n){return new XN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wu(t)}static increment(e){const t=function(n){return new eL("increment",n)}(e);return t._methodName="FieldValue.increment",new wu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OL={Firestore:RD,GeoPoint:Yy,Timestamp:fi,Blob:np,Transaction:PD,WriteBatch:VD,DocumentReference:r2,DocumentSnapshot:rp,Query:X1,QueryDocumentSnapshot:ip,QuerySnapshot:tM,CollectionReference:rd,FieldPath:nM,FieldValue:wu,setLogLevel:function(n){!function(n){Z2.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function HD(n,e){return function(n,e=Ep.z){return new zn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function rM(n,e){return HD(n,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function r_(n,e){return rM(n,e).pipe(v4(void 0),L7(),(0,Nt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const C=o.find(T=>T.doc.ref.isEqual(h.ref)),E=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(h.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(h.metadata)||!C&&E&&JSON.stringify(E.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),l}))}function BD(n,e,t){return r_(n,t).pipe(b6((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),c8(),(0,Nt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function iM(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function UD(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new Es.wA("firestore-compat",t=>((e,t)=>new RD(e,t,new RL))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},OL)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.4")}(Dl.Z);class jD{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=r_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Nt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(v4(void 0),L7(),Wc(([r,o])=>o.length>0||!r),(0,Nt.U)(([r,o])=>o),En.iC)}auditTrail(e){return this.stateChanges(e).pipe(b6((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UD(e);return BD(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return rM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,Vi.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new $D(this.ref.doc(e),this.afs)}}class $D{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=qD(r,t);return new jD(o,l,this.afs)}snapshotChanges(){return function(n,e){return HD(n,e).pipe(v4(void 0),L7(),(0,Nt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vi.D)(this.ref.get(e)).pipe(En.iC)}}class GL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?r_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wc(t=>t.length>0),En.iC):r_(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe(b6((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UD(e);return BD(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return rM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),En.iC)}get(e){return(0,Vi.D)(this.query.get(e)).pipe(En.iC)}}const GD=new p.OlP("angularfire2.enableFirestorePersistence"),WD=new p.OlP("angularfire2.firestore.persistenceSettings"),WL=new p.OlP("angularfire2.firestore.settings"),qL=new p.OlP("angularfire2.firestore.use-emulator");function qD(n,e=(t=>t)){return{query:e(n),ref:n}}let ZL=(()=>{class n{constructor(t,r,o,l,h,m,C,E,T,x,P,B,Q,Ae,Ve,Ye,bt){this.schedulers=C;const Jt=(0,ci.on)(t,m,r),wt=T;x&&T5(Jt,m,P,Q,Ae,Ve,B,Ye),[this.firestore,this.persistenceEnabled$]=(0,ci.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const An=m.runOutsideAngular(()=>Jt.firestore());if(l&&An.settings(l),wt&&An.useEmulator(...wt),o&&!To(h)){const Lr=()=>{try{return(0,Vi.D)(An.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(g_){return"undefined"!=typeof console&&console.warn(g_),(0,yn.of)(!1)}};return[An,m.runOutsideAngular(Lr)]}return[An,(0,yn.of)(!1)]},[l,wt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=qD(o,r),m=this.schedulers.ngZone.run(()=>l);return new jD(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new GL(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new $D(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ci.Dh),p.LFG(ci.xv,8),p.LFG(GD,8),p.LFG(WL,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(En.HU),p.LFG(WD,8),p.LFG(qL,8),p.LFG(I7,8),p.LFG(iv,8),p.LFG(w7,8),p.LFG(E7,8),p.LFG(C1,8),p.LFG(Nn,8),p.LFG(q1,8),p.LFG(I5,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KL=(()=>{class n{constructor(){b7.Z.registerVersion("angularfire",En.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:GD,useValue:!0},{provide:WD,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[ZL]}),n})();var ZD={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function sp(n){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function KD(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function TQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),r.forEach(function(o){TQ(n,o,t[o])})}return n}function sM(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,o=!1,l=void 0;try{for(var m,h=n[Symbol.iterator]();!(r=(m=h.next()).done)&&(t.push(m.value),!e||t.length!==e);r=!0);}catch(C){o=!0,l=C}finally{try{!r&&null!=h.return&&h.return()}finally{if(o)throw l}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var aM={},QD={};try{"undefined"!=typeof window&&(aM=window),"undefined"!=typeof document&&(QD=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(n){}var eS=(aM.navigator||{}).userAgent,tS=void 0===eS?"":eS,id=aM,Qr=QD,F4=!!Qr.documentElement&&!!Qr.head&&"function"==typeof Qr.addEventListener&&"function"==typeof Qr.createElement,H4=(~tS.indexOf("MSIE")||tS.indexOf("Trident/"),"___FONT_AWESOME___"),sS="svg-inline--fa",lS=[1,2,3,4,5,6,7,8,9,10],$Q=lS.concat([11,12,13,14,15,16,17,18,19,20]),Eu={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},uS=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Eu.GROUP,Eu.SWAP_OPACITY,Eu.PRIMARY,Eu.SECONDARY].concat(lS.map(function(n){return"".concat(n,"x")})).concat($Q.map(function(n){return"w-".concat(n)})),id.FontAwesomeConfig||{});Qr&&"function"==typeof Qr.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=sM(n,2),r=e[1],o=function(n){return""===n||"false"!==n&&("true"===n||n)}(function(n){var e=Qr.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=o&&(uS[r]=o)});var uM=Gt({},{familyPrefix:"fa",replacementClass:sS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},uS);uM.autoReplaceSvg||(uM.observeMutations=!1);var zt=Gt({},uM);id.FontAwesomeConfig=zt;var B4=id||{};B4[H4]||(B4[H4]={}),B4[H4].styles||(B4[H4].styles={}),B4[H4].hooks||(B4[H4].hooks={}),B4[H4].shims||(B4[H4].shims=[]);var ea=B4[H4],hS=[];F4&&((Qr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Qr.readyState)||Qr.addEventListener("DOMContentLoaded",function n(){Qr.removeEventListener("DOMContentLoaded",n),hS.map(function(e){return e()})}));var dM,hM="pending",dS="settled",o_="fulfilled",a_="rejected",XQ=function(){},fS="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,eJ="undefined"==typeof setImmediate?setTimeout:setImmediate,op=[];function tJ(){for(var n=0;n<op.length;n++)op[n][0](op[n][1]);op=[],dM=!1}function c_(n,e){op.push([n,e]),dM||(dM=!0,eJ(tJ,0))}function pS(n){var e=n.owner,t=e._state,r=e._data,o=n[t],l=n.then;if("function"==typeof o){t=o_;try{r=o(r)}catch(h){ap(l,h)}}mS(l,r)||(t===o_&&fM(l,r),t===a_&&ap(l,r))}function mS(n,e){var t;try{if(n===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===sp(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(o){t||(t=!0,e===o?gS(n,o):fM(n,o))},function(o){t||(t=!0,ap(n,o))}),!0}}catch(o){return t||ap(n,o),!0}return!1}function fM(n,e){(n===e||!mS(n,e))&&gS(n,e)}function gS(n,e){n._state===hM&&(n._state=dS,n._data=e,c_(rJ,n))}function ap(n,e){n._state===hM&&(n._state=dS,n._data=e,c_(iJ,n))}function vS(n){n._then=n._then.forEach(pS)}function rJ(n){n._state=o_,vS(n)}function iJ(n){n._state=a_,vS(n),!n._handled&&fS&&global.process.emit("unhandledRejection",n._data,n)}function sJ(n){global.process.emit("rejectionHandled",n)}function mo(n){if("function"!=typeof n)throw new TypeError("Promise resolver "+n+" is not a function");if(!(this instanceof mo))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(n,e){function r(o){ap(e,o)}try{n(function(o){fM(e,o)},r)}catch(o){r(o)}}(n,this)}mo.prototype={constructor:mo,_state:hM,_then:null,_data:void 0,_handled:!1,then:function(e,t){var r={owner:this,then:new this.constructor(XQ),fulfilled:e,rejected:t};return(t||e)&&!this._handled&&(this._handled=!0,this._state===a_&&fS&&c_(sJ,this)),this._state===o_||this._state===a_?c_(pS,r):this._then.push(r),r.then},catch:function(e){return this.then(null,e)}},mo.all=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.all().");return new mo(function(e,t){var r=[],o=0;function l(C){return o++,function(E){r[C]=E,--o||e(r)}}for(var m,h=0;h<n.length;h++)(m=n[h])&&"function"==typeof m.then?m.then(l(h),t):r[h]=m;o||e(r)})},mo.race=function(n){if(!Array.isArray(n))throw new TypeError("You must pass an array to Promise.race().");return new mo(function(e,t){for(var o,r=0;r<n.length;r++)(o=n[r])&&"function"==typeof o.then?o.then(e,t):e(o)})},mo.resolve=function(n){return n&&"object"===sp(n)&&n.constructor===mo?n:new mo(function(e){e(n)})},mo.reject=function(n){return new mo(function(e,t){t(n)})};var U4={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function cp(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function _S(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l_(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t],";")},"")}function mM(n){return n.size!==U4.size||n.x!==U4.x||n.y!==U4.y||n.rotate!==U4.rotate||n.flipX||n.flipY}function CS(n){var e=n.transform,r=n.iconWidth,o={transform:"translate(".concat(n.containerWidth/2," 256)")},l="translate(".concat(32*e.x,", ").concat(32*e.y,") "),h="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),m="rotate(".concat(e.rotate," 0 0)");return{outer:o,inner:{transform:"".concat(l," ").concat(h," ").concat(m)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var gM={x:0,y:0,width:"100%",height:"100%"};function bS(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function hJ(n){return"g"===n.tag?n.children:[n]}function vM(n){var e=n.icons,t=e.main,r=e.mask,o=n.prefix,l=n.iconName,h=n.transform,m=n.symbol,C=n.title,E=n.maskId,T=n.titleId,x=n.extra,P=n.watchable,B=void 0!==P&&P,Q=r.found?r:t,Ae=Q.width,Ve=Q.height,Ye="fak"===o,bt=Ye?"":"fa-w-".concat(Math.ceil(Ae/Ve*16)),Jt=[zt.replacementClass,l?"".concat(zt.familyPrefix,"-").concat(l):"",bt].filter(function(v_){return-1===x.classes.indexOf(v_)}).filter(function(v_){return""!==v_||!!v_}).concat(x.classes).join(" "),wt={children:[],attributes:Gt({},x.attributes,{"data-prefix":o,"data-icon":l,class:Jt,role:x.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Ae," ").concat(Ve)})},An=Ye&&!~x.classes.indexOf("fa-fw")?{width:"".concat(Ae/Ve*16*.0625,"em")}:{};B&&(wt.attributes["data-fa-i2svg"]=""),C&&wt.children.push({tag:"title",attributes:{id:wt.attributes["aria-labelledby"]||"title-".concat(T||cp())},children:[C]});var Lr=Gt({},wt,{prefix:o,iconName:l,main:t,mask:r,maskId:E,transform:h,symbol:m,styles:Gt({},An,x.styles)}),g_=r.found&&t.found?function(n){var e=n.children,t=n.attributes,r=n.main,o=n.mask,l=n.maskId,C=r.icon,T=o.icon,x=CS({transform:n.transform,containerWidth:o.width,iconWidth:r.width}),P={tag:"rect",attributes:Gt({},gM,{fill:"white"})},B=C.children?{children:C.children.map(bS)}:{},Q={tag:"g",attributes:Gt({},x.inner),children:[bS(Gt({tag:C.tag,attributes:Gt({},C.attributes,x.path)},B))]},Ae={tag:"g",attributes:Gt({},x.outer),children:[Q]},Ve="mask-".concat(l||cp()),Ye="clip-".concat(l||cp()),bt={tag:"mask",attributes:Gt({},gM,{id:Ve,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[P,Ae]},Jt={tag:"defs",children:[{tag:"clipPath",attributes:{id:Ye},children:hJ(T)},bt]};return e.push(Jt,{tag:"rect",attributes:Gt({fill:"currentColor","clip-path":"url(#".concat(Ye,")"),mask:"url(#".concat(Ve,")")},gM)}),{children:e,attributes:t}}(Lr):function(n){var e=n.children,t=n.attributes,r=n.main,o=n.transform,h=l_(n.styles);if(h.length>0&&(t.style=h),mM(o)){var m=CS({transform:o,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:Gt({},m.outer),children:[{tag:"g",attributes:Gt({},m.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Gt({},r.icon.attributes,m.path)}]}]})}else e.push(r.icon);return{children:e,attributes:t}}(Lr),vX=g_.attributes;return Lr.children=g_.children,Lr.attributes=vX,m?function(n){var t=n.iconName,r=n.children,l=n.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Gt({},n.attributes,{id:!0===l?"".concat(n.prefix,"-").concat(zt.familyPrefix,"-").concat(t):l}),children:r}]}]}(Lr):function(n){var e=n.children,t=n.main,r=n.mask,o=n.attributes,l=n.styles,h=n.transform;if(mM(h)&&t.found&&!r.found){var E={x:t.width/t.height/2,y:.5};o.style=l_(Gt({},l,{"transform-origin":"".concat(E.x+h.x/16,"em ").concat(E.y+h.y/16,"em")}))}return[{tag:"svg",attributes:o,children:e}]}(Lr)}var CM=function(e,t,r,o){var C,E,T,l=Object.keys(e),h=l.length,m=void 0!==o?function(e,t){return function(r,o,l,h){return e.call(t,r,o,l,h)}}(t,o):t;for(void 0===r?(C=1,T=e[l[0]]):(C=0,T=r);C<h;C++)T=m(T,e[E=l[C]],E,e);return T};function AS(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.skipHooks,o=void 0!==r&&r,l=Object.keys(e).reduce(function(h,m){var C=e[m];return C.icon?h[C.iconName]=C.icon:h[m]=C,h},{});"function"!=typeof ea.hooks.addPack||o?ea.styles[n]=Gt({},ea.styles[n]||{},l):ea.hooks.addPack(n,l),"fas"===n&&AS("fa",e)}var TS=ea.styles,_J=ea.shims,NS=function(){var e=function(o){return CM(TS,function(l,h,m){return l[m]=CM(h,o,{}),l},{})};e(function(r,o,l){return o[3]&&(r[o[3]]=l),r}),e(function(r,o,l){var h=o[2];return r[l]=l,h.forEach(function(m){r[m]=l}),r});var t="far"in TS;CM(_J,function(r,o){var h=o[1];return"far"===h&&!t&&(h="fas"),r[o[0]]={prefix:h,iconName:o[2]},r},{})};function kS(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}function ad(n){var e=n.tag,t=n.attributes,r=void 0===t?{}:t,o=n.children,l=void 0===o?[]:o;return"string"==typeof n?_S(n):"<".concat(e," ").concat(function(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(_S(n[t]),'" ')},"").trim()}(r),">").concat(l.map(ad).join(""),"</").concat(e,">")}NS();function up(n){this.name="MissingIcon",this.message=n||"Icon unavailable",this.stack=(new Error).stack}(up.prototype=Object.create(Error.prototype)).constructor=up;var d_={fill:"currentColor"},FS={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},IM=(Gt({},d_,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Gt({},FS,{attributeName:"opacity"}));function AM(n){var e=n[0],t=n[1],l=sM(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(l)?{tag:"g",attributes:{class:"".concat(zt.familyPrefix,"-").concat(Eu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(zt.familyPrefix,"-").concat(Eu.SECONDARY),fill:"currentColor",d:l[0]}},{tag:"path",attributes:{class:"".concat(zt.familyPrefix,"-").concat(Eu.PRIMARY),fill:"currentColor",d:l[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:l}}}}function hp(){zt.autoAddCss&&!m_&&(function(n){if(n&&F4){var e=Qr.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Qr.head.childNodes,r=null,o=t.length-1;o>-1;o--){var l=t[o],h=(l.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(h)>-1&&(r=l)}Qr.head.insertBefore(e,r)}}(function(){var n="fa",e=sS,t=zt.familyPrefix,r=zt.replacementClass,o='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(t!==n||r!==e){var l=new RegExp("\\.".concat(n,"\\-"),"g"),h=new RegExp("\\--".concat(n,"\\-"),"g"),m=new RegExp("\\.".concat(e),"g");o=o.replace(l,".".concat(t,"-")).replace(h,"--".concat(t,"-")).replace(m,".".concat(r))}return o}()),m_=!0)}function f_(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(r){return ad(r)})}}),Object.defineProperty(n,"node",{get:function(){if(F4){var r=Qr.createElement("div");return r.innerHTML=n.html,r.children}}}),n}function p_(n){var e=n.prefix,t=void 0===e?"fa":e,r=n.iconName;if(r)return kS($S.definitions,t,r)||kS(ea.styles,t,r)}Gt({},d_,{cx:"256",cy:"364",r:"28"}),Gt({},FS,{attributeName:"r",values:"28;14;28;28;14;28;"}),Gt({},IM,{values:"1;0;1;1;0;1;"}),Gt({},d_,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Gt({},IM,{values:"1;0;0;0;0;1;"}),Gt({},d_,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Gt({},IM,{values:"0;0;1;1;0;0;"});var $S=new(function(){function n(){(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function(n,e,t){e&&KD(n.prototype,e)}(n,[{key:"add",value:function(){for(var t=this,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];var h=o.reduce(this._pullDefinitions,{});Object.keys(h).forEach(function(m){t.definitions[m]=Gt({},t.definitions[m]||{},h[m]),AS(m,h[m]),NS()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,r){var o=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(o).map(function(l){var h=o[l],m=h.prefix,C=h.iconName,E=h.icon;t[m]||(t[m]={}),t[m][C]=E}),t}}]),n}()),m_=!1,SM_transform=function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce(function(r,o){var l=o.toLowerCase().split("-"),h=l[0],m=l.slice(1).join("-");if(h&&"h"===m)return r.flipX=!0,r;if(h&&"v"===m)return r.flipY=!0,r;if(m=parseFloat(m),isNaN(m))return r;switch(h){case"grow":r.size=r.size+m;break;case"shrink":r.size=r.size-m;break;case"left":r.x=r.x-m;break;case"right":r.x=r.x+m;break;case"up":r.y=r.y-m;break;case"down":r.y=r.y+m;break;case"rotate":r.rotate=r.rotate+m}return r},t):t}(e)},GS=function(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e||{}).icon?e:p_(e||{}),o=t.mask;return o&&(o=(o||{}).icon?o:p_(o||{})),n(r,Gt({},t,{mask:o}))}}(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.transform,r=void 0===t?U4:t,o=e.symbol,l=void 0!==o&&o,h=e.mask,m=void 0===h?null:h,C=e.maskId,E=void 0===C?null:C,T=e.title,x=void 0===T?null:T,P=e.titleId,B=void 0===P?null:P,Q=e.classes,Ae=void 0===Q?[]:Q,Ve=e.attributes,Ye=void 0===Ve?{}:Ve,bt=e.styles,Jt=void 0===bt?{}:bt;if(n){var wt=n.prefix,An=n.iconName,Lr=n.icon;return f_(Gt({type:"icon"},n),function(){return hp(),zt.autoA11y&&(x?Ye["aria-labelledby"]="".concat(zt.replacementClass,"-title-").concat(B||cp()):(Ye["aria-hidden"]="true",Ye.focusable="false")),vM({icons:{main:AM(Lr),mask:m?AM(m.icon):{found:!1,width:null,height:null,icon:{}}},prefix:wt,iconName:An,transform:Gt({},U4,r),symbol:l,title:x,maskId:E,titleId:B,extra:{attributes:Ye,styles:Jt,classes:Ae}})})}});const ZS=["*"];let KS=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null,this.globalLibrary=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),tX=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const r of t)r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r}addIconPacks(...t){for(const r of t){const o=Object.keys(r).map(l=>r[l]);this.addIcons(...o)}}getIconDefinition(t,r){return t in this.definitions&&r in this.definitions[t]?this.definitions[t][r]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const YS=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let oX=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[p.TTD]}),n})(),aX=(()=>{class n{constructor(t,r){this.renderer=t,this.elementRef=r}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275cmp=p.Xpm({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[p.TTD],ngContentSelectors:ZS,decls:1,vars:0,template:function(t,r){1&t&&(p.F$t(),p.Hsn(0))},encapsulation:2}),n})(),QS=(()=>{class n{constructor(t,r,o,l,h){this.sanitizer=t,this.config=r,this.iconLibrary=o,this.stackItem=l,this.classes=[],null!=h&&null==l&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let r=null;if(r=null==this.icon?this.config.fallbackIcon:this.icon,t){const o=this.findIconDefinition(r);if(null!=o){const l=this.buildParams();this.renderIcon(o,l)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const r=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);if("icon"in r)return r;const o=this.iconLibrary.getIconDefinition(r.prefix,r.iconName);if(null!=o)return o;const l=p_(r);if(null!=l){const h="Global icon library is deprecated. Consult https://github.com/FortAwesome/angular-fontawesome/blob/master/UPGRADING.md for the migration instructions.";if("unset"===this.config.globalLibrary)console.error("FontAwesome: "+h);else if(!this.config.globalLibrary)throw new Error(h);return l}return(n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(r),null}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},r="string"==typeof this.transform?SM_transform(this.transform):this.transform;return{title:this.title,transform:r,classes:[...YS(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,r){const o=GS(t,r);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(o.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(yi),p.Y36(KS),p.Y36(tX),p.Y36(oX,8),p.Y36(aX,8))},n.\u0275cmp=p.Xpm({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,r){2&t&&(p.Ikx("innerHTML",r.renderedIconHTML,p.oJD),p.uIk("title",r.title))},inputs:{classes:"classes",icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",transform:"transform",a11yRole:"a11yRole"},features:[p.TTD],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),cX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const lX=function(){return{color:"red",right:"-25px"}};function uX(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"fa-icon",9),p.NdJ("click",function(){p.CHM(t);const o=p.oxw(),l=o.$implicit,h=o.index,m=p.oxw();return m.usunRekord(l.name,l.$key,m.trybHard,h)}),p.qZA()}if(2&n){const t=p.oxw(2);p.Q6J("icon",t.faTimes)("ngStyle",p.DdM(2,lX))}}function hX(n,e){if(1&n&&(p.TgZ(0,"tr"),p.TgZ(1,"td",4),p._uU(2),p.qZA(),p.TgZ(3,"td",4),p._uU(4),p.qZA(),p.TgZ(5,"td",7),p._uU(6),p.YNc(7,uX,1,3,"fa-icon",8),p.qZA(),p.qZA()),2&n){const t=e.index,r=e.$implicit,o=p.oxw();p.xp6(2),p.Oqu(t+1),p.xp6(2),p.Oqu(r.name),p.xp6(2),p.hij(" ",r.score," "),p.xp6(1),p.Q6J("ngIf",o.kliknietoEdytuj&&o.przegrana)}}function dX(n,e){if(1&n&&(p.TgZ(0,"div",13),p.TgZ(1,"small"),p._uU(2),p.qZA(),p.qZA()),2&n){const t=p.oxw(2);p.xp6(2),p.Oqu(t.statusUsuniecia)}}function fX(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",10),p.TgZ(2,"button",11),p.NdJ("click",function(){return p.CHM(t),p.oxw().edytujClikc()}),p._uU(3,"Edit"),p.qZA(),p.YNc(4,dX,3,1,"div",12),p.qZA(),p._UZ(5,"div",4),p.BQk()}if(2&n){const t=p.oxw();p.xp6(4),p.Q6J("ngIf",!t.prawidlowyGracz)}}let pX=(()=>{class n{constructor(t,r,o){this.tablicaLStorageServive=t,this.currentPlayerService=r,this.rekordyApi=o,this.refreshUsers$=new La(!0),this.rekordy=[],this.hideWhenNoRecords=!1,this.noData=!1,this.preLoader=!0,this.kliknietoEdytuj=!1,this.usrIndex=0,this.statusUsuniecia="",this.prawidlowyGracz=!0,this.gracz="",this.faTimes=ZD,this.trybHard=!1,this.napisLatwy="EASY MODE",this.napisTrudny="HARD MODE",this.graRunning=!1,this.currentPlayerService.dataString$.subscribe(l=>this.gracz=l),this.currentPlayerService.dataBoolean$.subscribe(l=>this.trybHard=l),this.currentPlayerService.gameStatus$.subscribe(l=>this.graRunning=l),this.currentPlayerService.przegrana$.subscribe(l=>this.przegrana=l)}ngOnInit(){this.tablicaTrybTrudny$=this.refreshUsers$.pipe(Br(r=>this.tablicaLStorageServive.getHardRecords())),this.dataState(),this.rekordyApi.getWynikiEz().snapshotChanges().subscribe(r=>{this.rekordy=[],r.forEach(o=>{var l;let h=o.payload.toJSON();"string"==typeof o.key&&(h.$key=o.key),null===(l=this.rekordy)||void 0===l||l.push(h),this.rekordy.sort((m,C)=>C.score-m.score)})})}dataState(){this.rekordyApi.getWynikiEz().valueChanges().subscribe(t=>{this.preLoader=!1,t.length<=0?(this.hideWhenNoRecords=!1,this.noData=!0):(this.hideWhenNoRecords=!0,this.noData=!1)})}edytujClikc(){this.kliknietoEdytuj=!this.kliknietoEdytuj}usunRekord(t,r,o,l){let h=this.gracz;o?"admin69"!==h?(this.prawidlowyGracz=!1,this.statusUsuniecia="You cannot delete a record in hard mode "+this.gracz+" hamie",setTimeout(()=>{this.edytujClikc()},3700)):this.tablicaLStorageServive.sendData(this.tablicaLStorageServive.removeRecord(l,o),this.trybHard):h===t?(this.rekordyApi.deleteRekordEz(r),this.currentPlayerService.saveData(""),this.currentPlayerService.wyswietlajEkranDoWpisaniaUzytkownika(!1),this.currentPlayerService.statusPrzegranej(!1)):(this.prawidlowyGracz=!1,this.statusUsuniecia="You cannot delete someone else's record"),setTimeout(()=>{this.prawidlowyGracz=!0},3700)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wp),p.Y36(Ld),p.Y36(dv))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-tablica-rekordow"]],decls:19,vars:5,consts:[[1,"rowe"],[1,"col-10","column"],[1,"napis-tryb"],[1,"table","table-hover","content-table"],[1,"col-1"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-1","position-relative"],["class","position-absolute",3,"icon","ngStyle","click",4,"ngIf"],[1,"position-absolute",3,"icon","ngStyle","click"],[1,"col","col-11","d-flex","align-items-center","he"],[1,"btn","btn-primary","shadow-none","float-start","ms-4",3,"click"],["class","tekst-ostrzegawczy ms-2",4,"ngIf"],[1,"tekst-ostrzegawczy","ms-2"]],template:function(t,r){1&t&&(p.TgZ(0,"div"),p.TgZ(1,"div",0),p.TgZ(2,"div",1),p.TgZ(3,"div",2),p.TgZ(4,"h3"),p._uU(5),p.qZA(),p.qZA(),p.TgZ(6,"table",3),p.TgZ(7,"thead"),p.TgZ(8,"tr"),p.TgZ(9,"th",4),p._uU(10,"#"),p.qZA(),p.TgZ(11,"th",4),p._uU(12,"Name"),p.qZA(),p.TgZ(13,"th",4),p._uU(14,"Score"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(15,"tbody"),p.YNc(16,hX,8,4,"tr",5),p.ALo(17,"async"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.YNc(18,fX,6,1,"ng-container",6)),2&t&&(p.xp6(5),p.Oqu(r.trybHard?r.napisTrudny:r.napisLatwy),p.xp6(11),p.Q6J("ngForOf",r.trybHard?p.lcZ(17,3,r.tablicaTrybTrudny$):r.rekordy),p.xp6(2),p.Q6J("ngIf",!1===r.graRunning))},directives:[Bt,D1,QS,bo],pipes:[a2],styles:["[_nghost-%COMP%]{display:block;width:100%}.no-border[_ngcontent-%COMP%]{border-color:transparent!important}.btn-group-xs[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-xs[_ngcontent-%COMP%]{padding:.25rem .4rem;font-size:.875rem;line-height:.5;border-radius:.2rem}.napis-tryb[_ngcontent-%COMP%]{text-align:center;margin-left:30px}.he[_ngcontent-%COMP%]{height:48px;margin-right:0}.kolorIksa[_ngcontent-%COMP%]{color:#000}*[_ngcontent-%COMP%]{font-family:sans-serif}.content-table[_ngcontent-%COMP%]{text-align:center;border-collapse:collapse;margin-left:30px;font-size:.9em;max-width:270px;min-width:270px;border-radius:5px 5px 0 0;box-shadow:0 0 20px #00000026;padding:0}.content-table-remove[_ngcontent-%COMP%]{border-collapse:collapse;border-color:#fff;margin:auto;font-size:.9em;max-width:50px;overflow:hidden;padding:0}.content-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#009879;color:#fff;text-align:center;font-weight:bold}.content-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .content-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px}.content-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd}.content-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even){background-color:#f3f3f3}.content-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #dddddd;border-radius:0 0 10px 10px}.content-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.active-row[_ngcontent-%COMP%]{font-weight:bold;color:#009879}.content-table-remove[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-color:#fff}.content-table-remove[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .content-table-remove[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-color:#fff;text-align:start;border-width:0}.content-table-remove[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid white}.content-table-remove[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-of-type{border-top:2px solid white}.rowe[_ngcontent-%COMP%]{margin-left:-5px;margin-right:-5px}.column[_ngcontent-%COMP%]{float:left;width:75%}.column-del[_ngcontent-%COMP%]{float:left;width:25%}fa-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.tekst-ostrzegawczy[_ngcontent-%COMP%]{text-align:center}"]}),n})(),mX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[sw]}),n.\u0275inj=p.cJS({providers:[],imports:[[q0,Rn,ci.hO.initializeApp(pv_firebase),KL,A3,m6,Nd,m6,cX]]}),n})();p.B6R(fv,[pX,D1,bo,x7],[a2]),(0,p.G48)(),Us().bootstrapModule(mX).catch(n=>console.error(n))},4762:(Xe,Ne,F)=>{"use strict";function ye(ie,le){var Ee={};for(var pe in ie)Object.prototype.hasOwnProperty.call(ie,pe)&&le.indexOf(pe)<0&&(Ee[pe]=ie[pe]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(pe=Object.getOwnPropertySymbols(ie);Re<pe.length;Re++)le.indexOf(pe[Re])<0&&Object.prototype.propertyIsEnumerable.call(ie,pe[Re])&&(Ee[pe[Re]]=ie[pe[Re]])}return Ee}function ue(ie,le,Ee,pe){return new(Ee||(Ee=Promise))(function(_e,ut){function Wt(_t){try{pt(pe.next(_t))}catch(mt){ut(mt)}}function Tn(_t){try{pt(pe.throw(_t))}catch(mt){ut(mt)}}function pt(_t){_t.done?_e(_t.value):function(_e){return _e instanceof Ee?_e:new Ee(function(ut){ut(_e)})}(_t.value).then(Wt,Tn)}pt((pe=pe.apply(ie,le||[])).next())})}function ee(ie,le){var pe,Re,_e,ut,Ee={label:0,sent:function(){if(1&_e[0])throw _e[1];return _e[1]},trys:[],ops:[]};return ut={next:Wt(0),throw:Wt(1),return:Wt(2)},"function"==typeof Symbol&&(ut[Symbol.iterator]=function(){return this}),ut;function Wt(pt){return function(_t){return function(pt){if(pe)throw new TypeError("Generator is already executing.");for(;Ee;)try{if(pe=1,Re&&(_e=2&pt[0]?Re.return:pt[0]?Re.throw||((_e=Re.return)&&_e.call(Re),0):Re.next)&&!(_e=_e.call(Re,pt[1])).done)return _e;switch(Re=0,_e&&(pt=[2&pt[0],_e.value]),pt[0]){case 0:case 1:_e=pt;break;case 4:return Ee.label++,{value:pt[1],done:!1};case 5:Ee.label++,Re=pt[1],pt=[0];continue;case 7:pt=Ee.ops.pop(),Ee.trys.pop();continue;default:if(!(_e=(_e=Ee.trys).length>0&&_e[_e.length-1])&&(6===pt[0]||2===pt[0])){Ee=0;continue}if(3===pt[0]&&(!_e||pt[1]>_e[0]&&pt[1]<_e[3])){Ee.label=pt[1];break}if(6===pt[0]&&Ee.label<_e[1]){Ee.label=_e[1],_e=pt;break}if(_e&&Ee.label<_e[2]){Ee.label=_e[2],Ee.ops.push(pt);break}_e[2]&&Ee.ops.pop(),Ee.trys.pop();continue}pt=le.call(ie,Ee)}catch(_t){pt=[6,_t],Re=0}finally{pe=_e=0}if(5&pt[0])throw pt[1];return{value:pt[0]?pt[1]:void 0,done:!0}}([pt,_t])}}}function G(ie){var le="function"==typeof Symbol&&Symbol.iterator,Ee=le&&ie[le],pe=0;if(Ee)return Ee.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&pe>=ie.length&&(ie=void 0),{value:ie&&ie[pe++],done:!ie}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(ie,le){var Ee="function"==typeof Symbol&&ie[Symbol.iterator];if(!Ee)return ie;var Re,ut,pe=Ee.call(ie),_e=[];try{for(;(void 0===le||le-- >0)&&!(Re=pe.next()).done;)_e.push(Re.value)}catch(Wt){ut={error:Wt}}finally{try{Re&&!Re.done&&(Ee=pe.return)&&Ee.call(pe)}finally{if(ut)throw ut.error}}return _e}function we(ie,le,Ee){if(Ee||2===arguments.length)for(var _e,pe=0,Re=le.length;pe<Re;pe++)(_e||!(pe in le))&&(_e||(_e=Array.prototype.slice.call(le,0,pe)),_e[pe]=le[pe]);return ie.concat(_e||Array.prototype.slice.call(le))}F.d(Ne,{_T:()=>ye,mG:()=>ue,Jh:()=>ee,XA:()=>G,CR:()=>de,ev:()=>we})},8239:(Xe,Ne,F)=>{"use strict";function p(V,ye,ae,te,De,ue,ee){try{var O=V[ue](ee),W=O.value}catch(G){return void ae(G)}O.done?ye(W):Promise.resolve(W).then(te,De)}function se(V){return function(){var ye=this,ae=arguments;return new Promise(function(te,De){var ue=V.apply(ye,ae);function ee(W){p(ue,te,De,ee,O,"next",W)}function O(W){p(ue,te,De,ee,O,"throw",W)}ee(void 0)})}}F.d(Ne,{Z:()=>se})}},Xe=>{Xe(Xe.s=9564)}]);